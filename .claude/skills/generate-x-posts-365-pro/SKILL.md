---
name: generate-x-posts-365-pro
description: |
  365日分のX（旧Twitter）投稿を自動生成するスキル。
  バズ構文84パターンを活用し、1年分（365投稿）を73バッチ×5投稿で効率的に生成。
  ジャンル・商品・ターゲットに最適化された投稿を一括作成。
trigger_keywords:
  - "365日分X投稿"
  - "1年分ツイート"
  - "X投稿365"
stage: Development
dependencies:
  - generate-x-posts
priority: P1
model: claude-opus-4-5-20251101  # Opus 4.5 (2026年1月時点の最新モデル)
thinking: true
execution_time: 30-50分
context_optimization:
  external_files:
    - x_patterns_detailed.md
    - x_config.json
  estimated_reduction: 70%
---

# 365日分X投稿自動生成スキル（generate-x-posts-365-pro）

## 概要

このスキルは、365日分のX投稿を一括生成します。発信ジャンル・販売商品・ターゲット層に基づき、バズ構文84パターンを活用して高エンゲージメントな投稿を自動作成します。

### 主要機能

1. **365投稿一括生成**
   - 73バッチ × 5投稿 = 365投稿
   - バッチごとにファイル出力（管理しやすい分割）
   - 重複チェック機能で投稿の多様性を確保

2. **バズ構文84パターン完全活用**
   - 10カテゴリから最適パターンを自動選択
   - ジャンル・ターゲットに応じた構文マッチング
   - パターン使用の偏り防止（均等分散）

3. **カスタマイズ可能なCTA**
   - デフォルトCTAテンプレート内蔵
   - カスタムCTA・リンク設定可能
   - 絵文字はCTA部分のみ許可

4. **品質保証**
   - 280文字制限厳守
   - 絵文字・ハッシュタグ禁止（CTAのみ例外）
   - 重複内容の自動検出・回避

### 制約事項

- **文字数**: 280半角文字（日本語140文字）厳守
- **絵文字**: 本文禁止、CTAのみ使用可
- **ハッシュタグ**: 使用しない（Xのアルゴリズムで不要）
- **1バッチ**: 5投稿ずつ生成（品質維持のため）
- **総投稿数**: 365投稿（73バッチ）

---

## 入力仕様

### 必須パラメータ

| パラメータ | 型 | 説明 | 例 |
|-----------|---|------|---|
| `genre` | string | 発信ジャンル | `"AI活用"`, `"副業"`, `"投資"`, `"健康"` |
| `product` | string | 売りたい商品・サービス | `"AIロードマップ講座"`, `"投資自動化ツール"` |
| `target_audience` | string | ターゲット層 | `"20-30代会社員"`, `"副業初心者"`, `"経営者"` |

### オプションパラメータ

| パラメータ | 型 | デフォルト | 説明 |
|-----------|---|----------|------|
| `cta_template` | string | （下記参照） | カスタムCTAテンプレート |
| `cta_link` | string | `"bit.ly/vip_x"` | CTAに含めるリンクURL |
| `start_batch` | number | `1` | 開始バッチ番号（途中再開用） |
| `end_batch` | number | `73` | 終了バッチ番号（部分生成用） |

### デフォルトCTAテンプレート

```
🎁 今だけ無料プレゼント中

AIを使って毎月30万円を自動で稼ぐロードマップ
完全版をX限定でお届けします

気になる方は⬇️の「詳しくはこちらから」よりどうぞ
↓
{cta_link}
```

**注意**: `{cta_link}`は`cta_link`パラメータの値で自動置換されます。

### 入力例

#### 基本入力（必須パラメータのみ）
```json
{
  "genre": "AI活用",
  "product": "AIロードマップ講座",
  "target_audience": "20-30代会社員"
}
```

#### カスタムCTA入力
```json
{
  "genre": "副業",
  "product": "物販自動化システム",
  "target_audience": "副業初心者",
  "cta_template": "🔥 期間限定で公開中\n\n{product}の詳細はこちら\n↓\n{cta_link}",
  "cta_link": "bit.ly/custom_link"
}
```

#### 部分生成（途中再開）
```json
{
  "genre": "投資",
  "product": "自動売買ツール",
  "target_audience": "30-40代サラリーマン",
  "start_batch": 25,
  "end_batch": 50
}
```

---

## 処理フロー

### 全体フロー図

```
STEP 1: ヒアリング
    ↓
STEP 2: パターン選択・分配
    ↓
STEP 3: バッチ生成ループ（73回）
    ├─ 3-1. 5投稿生成
    ├─ 3-2. 品質検証
    ├─ 3-3. ファイル出力
    └─ 3-4. 進捗報告
    ↓
STEP 4: 最終検証・サマリー出力
```

---

### STEP 1: ヒアリング（3パラメータ確認・補完）

LLMへの指示：
```
ユーザーの入力を確認し、以下の3つの必須パラメータが揃っているか検証：

1. **genre（発信ジャンル）** が指定されているか？
   - 未指定の場合: 「どのジャンルで発信しますか？（例: AI活用、副業、投資、健康、恋愛、ビジネス）」と質問
   - 曖昧な場合: 具体化を促す

2. **product（売りたい商品）** が指定されているか？
   - 未指定の場合: 「最終的に何を販売したいですか？（例: オンライン講座、コンサル、ツール、電子書籍）」と質問
   - 曖昧な場合: 商品の価値・特徴を質問

3. **target_audience（ターゲット層）** が指定されているか？
   - 未指定の場合: 「誰に向けて発信しますか？（例: 20-30代会社員、副業初心者、経営者）」と質問
   - 曖昧な場合: 年齢層・職業・課題を質問

**オプションパラメータの確認**:
- cta_template: 未指定ならデフォルトCTAを使用
- cta_link: 未指定なら "bit.ly/vip_x" を使用

**全パラメータ確定後**:
「以下の設定で365日分の投稿を生成します。よろしいですか？」と確認
- ジャンル: {genre}
- 商品: {product}
- ターゲット: {target_audience}
- CTA: {cta_template または "デフォルト"}
- リンク: {cta_link}
```

---

### STEP 2: パターン選択・分配

LLMへの指示：
```
1. **Read toolで `x_patterns_detailed.md` を読み込み**

2. **ジャンルに最適なカテゴリを特定**:

   ジャンル別の推奨カテゴリ:
   | ジャンル | 推奨カテゴリ（優先順） |
   |---------|---------------------|
   | AI活用 | 1(有益性), 7(数字), 2(権威性) |
   | 副業 | 7(数字), 1(有益性), 5(デメリット) |
   | 投資 | 3(逆張り), 7(数字), 5(デメリット) |
   | 健康 | 9(感情), 1(有益性), 5(デメリット) |
   | 恋愛 | 9(感情), 4(one of them), 6(ネガティブ人物) |
   | ビジネス | 2(権威性), 7(数字), 8(A vs B) |

3. **84パターンを365投稿に分配**:

   分配アルゴリズム:
   - 84パターン × 4〜5回使用 = 336〜420投稿
   - 365投稿に対して各パターンを4-5回使用
   - 同一パターンは連続使用しない（最低10投稿間隔）

   分配計算:
   - カテゴリ1（38パターン）: 約165投稿（45%）
   - カテゴリ2-10（46パターン）: 約200投稿（55%）

4. **パターン使用計画を生成**:

   pattern_plan = {
     "batch_1": ["cat1_p01", "cat7_p03", "cat2_p02", "cat1_p15", "cat3_p01"],
     "batch_2": ["cat1_p08", "cat5_p02", "cat1_p22", "cat9_p04", "cat1_p35"],
     ...
     "batch_73": ["cat1_p12", "cat4_p03", "cat8_p01", "cat1_p28", "cat10_p02"]
   }
```

---

### STEP 3: バッチ生成ループ（73回）

**重要**: 各バッチは5投稿を生成し、品質検証後にファイル出力します。

#### 3-1. 5投稿生成

LLMへの指示：
```
バッチ {batch_number}/73 の5投稿を生成:

for i in 1..5:
  1. **パターン選択**:
     - pattern_plan[batch_number][i] から使用パターンを取得
     - x_patterns_detailed.md から該当パターンのテンプレートを読み込み

  2. **投稿本文生成**:
     - ジャンル: {genre}
     - 商品: {product}
     - ターゲット: {target_audience}
     - パターン: {selected_pattern}

     生成ルール:
     - **絵文字禁止**（本文には一切使用しない）
     - **ハッシュタグ禁止**
     - 数値データを1つ以上含める
     - 具体的なシーン・事例を含める
     - {target_audience}が共感する表現を使用

  3. **CTA追加**:
     - 本文の後に空行2つ
     - cta_template を追加
     - {cta_link} を置換
     - {product} があれば置換
     - **CTAのみ絵文字使用可**

  4. **投稿番号付与**:
     - 投稿番号: {(batch_number - 1) * 5 + i}/365
```

**投稿生成テンプレート**:
```
【投稿 {number}/365】

{hook_pattern}

{main_content}

{cta_template}
```

#### 3-2. 品質検証

LLMへの指示：
```
生成した5投稿に対して以下の検証を実行:

for each post in batch:
  1. **文字数チェック**:
     - Unicode正規化（NFC形式）
     - 半角: 1カウント、全角: 2カウント、絵文字: 2カウント、URL: 23カウント
     - 総カウント数 <= 280 を確認
     - **超過時**: 本文を短縮して再生成

  2. **絵文字チェック**:
     - CTA部分以外に絵文字がないか確認
     - **違反時**: 絵文字を削除して再生成

  3. **ハッシュタグチェック**:
     - # を含む文字列がないか確認
     - **違反時**: ハッシュタグを削除

  4. **重複チェック**:
     - 同一バッチ内で類似度80%以上の投稿がないか
     - 前バッチの投稿と類似度90%以上がないか
     - **違反時**: 別パターンで再生成

  5. **禁止事項チェック**:
     - 誇大広告、誹謗中傷、差別表現など11項目
     - **違反時**: 該当箇所を修正して再生成

検証結果:
- 全項目クリア: 次へ進む
- 1項目以上NG: 再生成（最大3回）
- 3回失敗: エラーログに記録し、次の投稿へ
```

#### 3-3. ファイル出力

LLMへの指示：
```
Write toolで以下のファイルを出力:

ファイルパス:
`Flow/YYYYMM/YYYY-MM-DD/x_posts_365_batch_{batch_number:03d}.md`

例: `Flow/202601/2026-01-08/x_posts_365_batch_001.md`

ファイル内容:
```markdown
# X投稿 365日分 - バッチ {batch_number}/73

**生成日時**: {timestamp}
**ジャンル**: {genre}
**商品**: {product}
**ターゲット**: {target_audience}

---

## 投稿 {(batch_number - 1) * 5 + 1}/365

**パターン**: {pattern_id}
**文字数**: {char_count}/280

```
{post_content_1}
```

---

## 投稿 {(batch_number - 1) * 5 + 2}/365

**パターン**: {pattern_id}
**文字数**: {char_count}/280

```
{post_content_2}
```

---

（以下、投稿3〜5も同様）
```
```

#### 3-4. 進捗報告

LLMへの指示：
```
バッチ完了後、以下の進捗を報告:

**バッチ {batch_number}/73 完了**
- 生成投稿数: 5
- 累計投稿数: {batch_number * 5}/365
- 進捗率: {(batch_number / 73) * 100:.1f}%
- 次のバッチ: {batch_number + 1}/73

10バッチごとに詳細サマリーを出力:
- 使用パターン分布
- 平均文字数
- エラー発生数
- 推定残り時間
```

---

### STEP 4: 最終検証・サマリー出力

LLMへの指示：
```
全73バッチ完了後、以下の最終検証とサマリーを出力:

1. **全体統計**:
   - 総投稿数: 365
   - 総バッチ数: 73
   - エラー投稿数: {error_count}
   - 再生成回数: {regeneration_count}

2. **パターン使用分布**:
   - カテゴリ1: {cat1_count}回
   - カテゴリ2: {cat2_count}回
   ...
   - カテゴリ10: {cat10_count}回

3. **品質統計**:
   - 平均文字数: {avg_char_count}/280
   - 最大文字数: {max_char_count}/280
   - 最小文字数: {min_char_count}/280

4. **ファイル一覧**:
   - Flow/YYYYMM/YYYY-MM-DD/x_posts_365_batch_001.md
   - Flow/YYYYMM/YYYY-MM-DD/x_posts_365_batch_002.md
   ...
   - Flow/YYYYMM/YYYY-MM-DD/x_posts_365_batch_073.md

5. **サマリーファイル出力**:
   ファイルパス: `Flow/YYYYMM/YYYY-MM-DD/x_posts_365_summary.md`

サマリー内容:
```markdown
# X投稿 365日分 - 生成サマリー

**生成日時**: {timestamp}
**ジャンル**: {genre}
**商品**: {product}
**ターゲット**: {target_audience}

## 生成統計

| 項目 | 値 |
|------|---|
| 総投稿数 | 365 |
| 総バッチ数 | 73 |
| エラー投稿数 | {error_count} |
| 再生成回数 | {regeneration_count} |
| 平均文字数 | {avg_char_count}/280 |

## パターン使用分布

| カテゴリ | 使用回数 | 割合 |
|---------|---------|-----|
| 1. 有益性強調 | {cat1_count} | {cat1_percent}% |
| 2. 権威性活用 | {cat2_count} | {cat2_percent}% |
| ... | ... | ... |

## ファイル一覧

1. x_posts_365_batch_001.md（投稿1-5）
2. x_posts_365_batch_002.md（投稿6-10）
...
73. x_posts_365_batch_073.md（投稿361-365）

## 次のアクション

1. 各バッチファイルを確認
2. 必要に応じて個別投稿を編集
3. Late APIで予約投稿を設定
```
```

---

## 出力仕様

### バッチファイル形式

```markdown
# X投稿 365日分 - バッチ 001/73

**生成日時**: 2026-01-08 14:30:00
**ジャンル**: AI活用
**商品**: AIロードマップ講座
**ターゲット**: 20-30代会社員

---

## 投稿 1/365

**パターン**: cat1_p01（これあんまり知ってる人少ないんですが）
**文字数**: 268/280

```
これあんまり知ってる人少ないんですが

AIで月30万円稼ぐ人がやってる習慣、実は3つだけです。

1. 朝30分のプロンプト練習
2. 週1回の新ツール検証
3. 毎日の作業時間記録

これを3ヶ月続けた人の83%が収益化に成功してます。

🎁 今だけ無料プレゼント中

AIを使って毎月30万円を自動で稼ぐロードマップ
完全版をX限定でお届けします

気になる方は⬇️の「詳しくはこちらから」よりどうぞ
↓
bit.ly/vip_x
```

---

## 投稿 2/365

**パターン**: cat7_p03（数字で証明）
**文字数**: 245/280

```
3日で2,847人が登録した方法を公開します

AIを使った副業で結果が出る人は
必ずこの順番を守ってます。

Step1: 市場リサーチ（1時間）
Step2: コンテンツ設計（30分）
Step3: 自動化設定（2時間）

順番を間違えると、3ヶ月無駄にします。

🎁 今だけ無料プレゼント中

AIを使って毎月30万円を自動で稼ぐロードマップ
完全版をX限定でお届けします

気になる方は⬇️の「詳しくはこちらから」よりどうぞ
↓
bit.ly/vip_x
```

---

（以下、投稿3〜5も同様）
```

### サマリーファイル形式

```markdown
# X投稿 365日分 - 生成サマリー

**生成日時**: 2026-01-08 15:45:00
**ジャンル**: AI活用
**商品**: AIロードマップ講座
**ターゲット**: 20-30代会社員

## 生成統計

| 項目 | 値 |
|------|---|
| 総投稿数 | 365 |
| 総バッチ数 | 73 |
| エラー投稿数 | 2 |
| 再生成回数 | 5 |
| 平均文字数 | 248/280 |

## パターン使用分布

| カテゴリ | 使用回数 | 割合 |
|---------|---------|-----|
| 1. 有益性強調 | 165 | 45.2% |
| 2. 権威性活用 | 40 | 11.0% |
| 3. 逆張り構文 | 20 | 5.5% |
| 4. one of them | 20 | 5.5% |
| 5. デメリット | 20 | 5.5% |
| 6. ネガティブ人物 | 15 | 4.1% |
| 7. 数字・実績 | 35 | 9.6% |
| 8. A vs B比較 | 20 | 5.5% |
| 9. 喜怒哀楽 | 20 | 5.5% |
| 10. CTA型終結 | 10 | 2.7% |

## ファイル一覧

1. x_posts_365_batch_001.md（投稿1-5）
2. x_posts_365_batch_002.md（投稿6-10）
...
73. x_posts_365_batch_073.md（投稿361-365）
```

---

## エラーハンドリング

### エラーパターンと対処

| エラー | 原因 | 対処 |
|--------|------|------|
| 文字数超過 | 本文が280カウント超 | 本文を短縮して再生成 |
| 絵文字違反 | CTA以外に絵文字あり | 絵文字を削除して再生成 |
| 重複検出 | 類似度80%以上の投稿 | 別パターンで再生成 |
| 禁止事項違反 | 11項目のいずれかに該当 | 該当箇所を修正して再生成 |
| パターン枯渇 | 84パターン使い切り | 使用済みパターンを再利用（10投稿以上間隔） |

### リトライ設定

- **最大リトライ回数**: 3回/投稿
- **リトライ間隔**: 即時（LLM推論のため）
- **3回失敗時**: エラーログに記録し、次の投稿へスキップ

### エラーログファイル

```markdown
# X投稿 365日分 - エラーログ

**生成日時**: 2026-01-08 15:45:00

## エラー一覧

### エラー 1
- **バッチ**: 15
- **投稿番号**: 72/365
- **エラー種別**: 文字数超過
- **詳細**: 本文が312カウント（32カウント超過）
- **対処**: 3回再生成後も失敗、スキップ

### エラー 2
- **バッチ**: 42
- **投稿番号**: 208/365
- **エラー種別**: 重複検出
- **詳細**: 投稿203と類似度87%
- **対処**: 別パターンで再生成成功
```

---

## 実装チェックリスト

### Phase 1: 基本実装
- [ ] STEP 1: ヒアリング機能
- [ ] STEP 2: パターン選択・分配アルゴリズム
- [ ] STEP 3-1: 5投稿生成ロジック
- [ ] STEP 3-2: 品質検証（文字数、絵文字、ハッシュタグ）
- [ ] STEP 3-3: ファイル出力機能
- [ ] STEP 3-4: 進捗報告機能

### Phase 2: 品質向上
- [ ] 重複チェック機能強化
- [ ] パターン均等分散アルゴリズム
- [ ] エラーハンドリング完備
- [ ] サマリーファイル出力

### Phase 3: 最適化
- [ ] 途中再開機能（start_batch, end_batch）
- [ ] カスタムCTA対応
- [ ] パフォーマンス最適化（30-50分目標）

---

## 参照ファイル

- **バズ構文詳細**: `@.claude/skills/generate-x-posts/x_patterns_detailed.md`
- **設定ファイル**: `@.claude/skills/generate-x-posts/x_config.json`
- **基本スキル**: `@.claude/skills/generate-x-posts/SKILL.md`

---

## バージョン履歴

- **v1.0.0** (2026-01-08): 初版リリース
  - 365日分X投稿一括生成機能
  - バズ構文84パターン活用
  - 73バッチ×5投稿の分割出力
  - 品質検証（文字数、絵文字、ハッシュタグ、重複）
  - カスタムCTA対応
  - エラーハンドリング・ログ出力
