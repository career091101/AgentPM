---
name: daily-tasks-ultralight
description: |
  Ultra Light 4コマンド運用による日次タスク管理。タスクを考えるのが苦手な人向け。

  運用方法: 入力→AI整形→選択→実行

  使用タイミング:
  - 朝の起動時
  - タスクが思いつかない時
  - 気がかりを整理したい時
  - タスクをClaude Codeで実行したい時

  所要時間: 3-5分（1サイクル）
  出力: daily_tasks.yaml（inbox/candidates/tasks）+ task_prompts.md
---

# Daily Tasks Ultra Light Skill

タスクを考えない日次タスク管理システム。

---

## このSkillでできること

1. **inbox 管理**: 気がかりを何行でも入れるだけ（Todo化しない）
2. **Todoパターン生成**: AI が完了までのTodoパターン（2〜5個）を提示、各パターンは複数Todoと実行順序を含む
3. **Done 定義選択**: Todoに適した候補を2〜5個から選ぶだけ
4. **複数選択対応**: 必要な数だけタスクを追加可能
5. **タスクプロンプト生成**: tasksをClaude Code実行可能なプロンプト形式に変換

---

## 入力・出力

| 項目 | 内容 |
|------|------|
| **入力** | 気がかり何行でも（単語でもOK） |
| **出力** | `Flow/{YYYYMM}/{YYYY-MM-DD}/daily_tasks.yaml` |
| **次のSkill** | タスク実行後に status を completed に変更 |
| **ステージ** | 日次運用 |

---

## Knowledge Base参照

- 対話台本: `.claude/daily/intake_prompt.md`
- 使い方ガイド: `.claude/daily/README.md`
- YAML構造: `daily_tasks.yaml` (inbox/candidates/tasks)

---

## Instructions

### 📋 3つのコマンド

---

## 1️⃣ タスクメモ（inbox追記）

### トリガー
ユーザーが「**タスクメモ**」と言った時

### 実行フロー

**AI**:
```
何が気がかりですか？何行でも入力できます。

【入力例】
・[inbox項目1]
・[inbox項目2]
・[inbox項目3]
```

**ユーザー**: [3行の悩み・気がかりを入力]

**AI**:
1. `Flow/202512/2025-12-30/daily_tasks.yaml` を読み込み
2. inbox配列に3行追加（既存項目は削除しない）
3. YAMLファイルを保存
4. 確認メッセージを表示:

```yaml
✅ inboxに追加しました

inbox:
  - "[入力内容1]"
  - "[入力内容2]"
  - "[入力内容3]"
```

---

## 2️⃣ 次の一手（候補生成）

### トリガー
ユーザーが「**次の一手**」と言った時

### 実行フロー

**STEP 1: inbox項目選択**

**AI**:
1. `daily_tasks.yaml` の inbox を読み込み
2. 選択肢を表示:

```
inboxから1件選んでください：

1. [inbox項目1]
2. [inbox項目2]
3. [inbox項目3]

番号で指定:
```

**ユーザー**: [番号を入力、例: 1]

**STEP 2: Todoパターン生成（2〜5個）**

**AI**:
1. 選択した項目を分析
2. 完了までのTodoパターンに分解（2〜5パターン）
3. 各パターンを生成:
   - **パターン名**: アプローチの特徴を表す
   - **Todoリスト**: 最初のTodoから最終成果物までの全ステップ
4. 候補を表示:

```
「[選択した項目]」の完了までのTodo候補：

【パターンA: [アプローチ名]】
1. [Todo1]
2. [Todo2]
3. [Todo3]
→ 完了: [最終成果物]

【パターンB: [アプローチ名]】
1. [Todo1]
2. [Todo2]
3. [Todo3]
4. [Todo4]
→ 完了: [最終成果物]

（必要に応じてパターンC, D... と追加）

💡 おすすめ: パターン[A/B/C...]（1→2→3の順で実行）
理由: [このTodo組み合わせを推奨する理由を1-2行で説明]

どのパターンで進めますか？(A/B/C...)
```

**パターン生成のコツ**:
- 抽象的NG: 「[大まかな作業名]」
- 具体的OK: 「[具体的な成果物]を[数量]作る」など実行可能
- おすすめは実行順序も含めて推奨

**ユーザー**: [パターンを入力、例: A]

**STEP 3: candidates追加**

**AI**:
1. `daily_tasks.yaml` の candidates を上書き（前回のパターンは削除）
2. YAMLファイルを保存
3. 確認メッセージを表示:

```yaml
✅ candidatesに追加しました

candidates:
  - "パターンA: [アプローチ名]"
  - "1. [Todo1]"
  - "2. [Todo2]"
  - "3. [Todo3]"
  - "→ 完了: [最終成果物]"
```

---

## 3️⃣ これやる（tasks確定）

### トリガー
ユーザーが「**これやる**」と言った時

### 実行フロー

**STEP 1: 候補選択**

**AI**:
```
どれをやりますか？(A/B/C、複数選択可、例: A,C または 全部)
```

**ユーザー**: [A, B, C のいずれか、複数（例: A,C）、または「全部」を入力]

**STEP 2: Done定義選択（一括指定）**

**AI**:
```
各パターンのDone定義を選んでください：

パターンA: [アプローチ名]
1. [A用完了基準1]
2. [A用完了基準2]
3. [A用完了基準3]

パターンC: [アプローチ名]
1. [C用完了基準1]
2. [C用完了基準2]

💡 おすすめ: A=1または2, C=1
理由: パターンAは1と2のどちらも適切（1は早期完了重視、2は品質重視）。パターンCは1が最適。

入力形式: A=1, C=2（カンマ区切りで指定）
```

**ユーザー**: [A=1, C=2 の形式で入力]

**STEP 3: tasks追加**

**AI**:
1. `daily_tasks.yaml` の tasks を読み込み
2. 選択した各パターンについて、タスクID自動採番:
   - 既存タスクの最大ID取得（例: T002）
   - +1して新規ID生成（例: T003, T004...）
   - 初回はT001
3. Done定義: 各Todoの性質に応じた具体的な完了基準
4. 選択した各パターンをtasks配列に追加:
```yaml
- id: T[番号]
  what: "[選択した候補の内容]"
  done: "[選択したDone定義]"
  status: pending
  created_at: "[現在時刻 YYYY-MM-DD HH:MM]"
```
5. YAMLファイルを保存
6. 確認メッセージを表示:
```yaml
✅ tasksに追加しました（[N]個追加）

tasks:
  - id: T[番号1]
    what: "[選択した候補1の内容]"
    done: "[選択したDone定義1]"
    status: pending
    created_at: "[現在時刻]"

  - id: T[番号2]
    what: "[選択した候補2の内容]"
    done: "[選択したDone定義2]"
    status: pending
    created_at: "[現在時刻]"

  （選択した数だけ表示）
```

---

## 4️⃣ タスクプロンプト生成（task_prompts.md作成）

### トリガー
ユーザーが「**タスクプロンプト生成**」と言った時

### 実行フロー

**STEP 1: daily_tasks.yaml読み込み**

**AI**:
1. `Flow/202512/2025-12-30/daily_tasks.yaml` の tasks セクションを読み込み
2. pending状態のタスク数を確認

**STEP 2: task_prompts.md生成**

**AI**:
1. 各タスクについてClaude Code実行可能なプロンプトを生成:
   - **タスクID**: T001-1, T001-2...
   - **what**: タスクの内容
   - **done**: 完了基準
   - **実行手順**: ステップバイステップの詳細手順
   - **Claude Codeコピペ用プロンプト**: そのままコピペして実行できる形式

2. 以下のフォーマットでMarkdownファイルを作成:

```markdown
# Claude Code実行用タスクプロンプト

**生成日時**: YYYY-MM-DD
**対象**: daily_tasks.yaml の全タスク

**✨ 使い方**:
1. 各タスクの「📋 実行用プロンプト」セクションのコードブロックを見つける
2. コードブロック全体を選択してコピー（マウスドラッグまたはトリプルクリック）
3. Claude Codeに貼り付けて実行

---

## [タスクグループ名] タスク（Nステップ）

### T001-1: [タスク名]

**📋 実行用プロンプト（以下のコードブロックをコピー）**:

```
[このタスクを実行するための詳細なシステムプロンプト]

目的: [タスクの目的]
手順:
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

完了基準: [Done定義]
```

---

### T001-2: [タスク名]

**📋 実行用プロンプト（以下のコードブロックをコピー）**:

```
[詳細なシステムプロンプト]
...
```

（全タスク分を生成）
```

3. ファイルを保存: `Flow/202512/2025-12-30/task_prompts.md`

**STEP 3: 確認メッセージ**

**AI**:
```
✅ task_prompts.md を作成しました

対象タスク: [N]個
保存先: Flow/202512/2025-12-30/task_prompts.md

各タスクのプロンプトをClaude Codeにコピペして実行できます。
```

### プロンプト生成ルール

**重要**: 各タスクのプロンプトには以下を必ず含める:

1. **タスクの目的** - なぜこのタスクを実行するのか
2. **実行手順** - ステップバイステップの詳細手順（3-7ステップ）
3. **ファイルパス** - 読み込む/作成するファイルの絶対パス
4. **完了基準** - Done定義（具体的で測定可能）
5. **保存先** - 成果物の保存場所

**Good例** (コピペしやすい形式):
```markdown
### T001-3: Done定義セクション更新

**📋 実行用プロンプト（以下のコードブロックをコピー）**:

```
aipm_v0/.claude/daily/intake_prompt.md のDone定義セクションを編集してください。

目的: Done定義の選び方を汎用的な内容に変更
手順:
1. /Users/yuichi/AIPM/aipm_v0/.claude/daily/intake_prompt.md を読み込む
2. 「### Done定義の選び方」セクションを置き換える

old_string: ### Done定義の選び方
- **迷ったら3番**（メモが5行ある）
...

new_string: ### Done定義の選び方
AIがTodoの性質に応じて適切な候補（2〜5個）を提示します：
...

完了基準: Done定義セクションが汎用的な内容に変更されている
```
```

**Bad例**（抽象的すぎる）:
```markdown
### T999: ファイル編集

**📋 実行用プロンプト（以下のコードブロックをコピー）**:

```
ファイルを編集してください
```
```

**改善ポイント**:
- ❌ どのファイルか不明
- ❌ 何を編集するか不明
- ❌ 完了基準がない

### YAML更新処理

なし（このコマンドはdaily_tasks.yamlを変更しない）

---

## 🔄 運用ルール

### inbox
- **無制限**: 思いついたら即追記
- **削除不要**: タスク化しなくてもOK（書き溜める場所）
- **型**: 「〇〇が進まない」「△△が不安」など、モヤモヤを単語で書く

### candidates
- **使い捨て**: 選んだTodoをtasksへ移動
- **上書きOK**: 前回のパターンは削除してOK
- **生成ルール**: 完了までのTodoパターンに分解（2〜5パターン程度、各パターンは複数Todo）

### tasks
- **制限なし**: 必要な数だけ追加可能
- **statusは2種類のみ**: pending（未完了）/ completed（完了）
- **Done定義**: Todoの性質に応じて2〜5個から選ぶ（数字制限なし、柔軟な表現）

---

## 💡 対話Tips

### Todoパターン生成のコツ
**Good例**:
```
【パターンA: [アプローチ名]】
1. [Todo1]
2. [Todo2]
3. [Todo3]
→ 完了: [最終成果物]

💡 おすすめ: パターンA（1→2→3の順で実行）
理由: [このTodo組み合わせを推奨する理由を1-2行で説明]
```

**Bad例**（抽象的すぎる）:
```
【パターンA】
1. [抽象的な作業名]
2. [抽象的な作業名]
3. [抽象的な作業名]
```

### Done定義の選び方
AIがTodoの性質に応じて適切な候補（2〜5個）を提示します：
- **成果物系**: 「送れる/提出できる状態」「レビュー通過」「承認済み」
- **検証系**: 「動作確認が通る」「テスト全通過」
- **調査系**: 「メモがある」「レポート完成」
- **計画系**: 「次のステップが明確」「アクションプラン完成」
- **💡 おすすめ表示を参考に**: 状況に応じて複数選択肢を推奨（例: A=1または2, C=1）、各選択肢の違い・メリットを説明

### inbox の書き方例
```yaml
inbox:
  - "[項目名]"           # 単語だけでもOK
  - "[項目名]"           # これもOK
  - "[項目名]が進まない"   # 詰まってること
  - "[項目名]が不安"       # モヤモヤ
  - "[項目名]を忘れそう"   # 気がかり
```

---

## 🚨 エラーハンドリング

### Q1: candidatesが刺さらない
**A**: 「次の一手」を再実行してください。別の候補が出ます。

### Q2: inboxが空
**A**: 以下のメッセージを表示：
```
📭 inboxが空です。
「タスクメモ」で気がかりを3行入れてください。
```

---

## 📊 YAML構造（完全例）

```yaml
date: 2025-12-30

inbox:
  - "[inbox項目1]"
  - "[inbox項目2]"
  - "[inbox項目3]"

candidates:
  - "パターンA: [アプローチ名]"
  - "1. [Todo1]"
  - "2. [Todo2]"
  - "3. [Todo3]"
  - "→ 完了: [最終成果物]"

tasks:
  - id: T001
    what: "[Todo内容]"
    done: "[完了基準]"
    status: pending
    created_at: "2025-12-30 09:00"

  - id: T002
    what: "[Todo内容]"
    done: "[完了基準]"
    status: completed
    created_at: "2025-12-30 10:30"
```

---

## 🔄 毎日のルーチン

### 【朝】inbox に3行入れる（3分）

#### Step 1: 新しい日のフォルダ作成
```bash
cd /Users/yuichi/AIPM/aipm_v0
mkdir -p Flow/202512/$(date +%Y-%m-%d)
cp Flow/202512/2025-12-30/daily_tasks.yaml Flow/202512/$(date +%Y-%m-%d)/
cp Flow/202512/2025-12-30/failure_log.yaml Flow/202512/$(date +%Y-%m-%d)/
```

#### Step 2: 起動タスク（思いつかない日でも回す）
「**タスクメモ**」→ inbox に3行入れる

---

### 【日中】タスク実行（1-2時間）

#### Todo実行中
```yaml
# daily_tasks.yaml を開く
tasks:
  - id: T001
    what: "[Todo内容]"
    done: "[完了基準]"
    status: pending  # 作業中
```

#### Todo完了
```yaml
status: completed  # 完了時に変更
```

#### 失敗記録（エラー発生時）
```yaml
# failure_log.yaml に1行追記
failures:
  - time: "HH:MM"
    error: "[エラー内容]"
    action: "[対応アクション]"
```

---

### 【夜】振り返り（3分）

#### 完了確認（目視でOK）
```bash
# daily_tasks.yaml を開いて目視
tasks:
  - status: completed  # ✅
  - status: completed  # ✅
  - status: pending    # ❌（明日へ繰り越し）
```

---

**更新履歴**:
- 2025-12-30 v2.1: Ultra Light 4コマンド運用（タスクプロンプト生成機能追加）
- 2025-12-30 v2.0: Ultra Light 3コマンド運用（Claude Code Skill化）

**作成者**: Claude Sonnet 4.5
**実装方針**: タスクを考えない → 悩みを書く → AIが候補提示 → 選ぶだけ → Claude Codeで実行
