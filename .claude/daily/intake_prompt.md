# Daily Task Intake（Ultra Light 4コマンド運用）

**バージョン**: 2.1 (Ultra Light)
**前提**: タスクを考えるのが苦手な人向け
**運用方法**: 入力→AI整形→選択→実行

---

## 📋 4コマンド運用の台本

この台本に従って、ユーザーとの対話を進めてください。

---

## 1️⃣ タスクメモ（inbox追記）

**目的**: 思いついたこと・悩み・気がかりをinboxに入れる（タスク化しない、何行でもOK）

### トリガー
ユーザーが「**タスクメモ**」と言ったら、このフローを開始

### 対話フロー

**Claude**:
```
何が気がかりですか？何行でも入力できます。

【入力例】
・[気がかり1]
・[気がかり2]
・[気がかり3]
```

**ユーザー**: [悩み・気がかりを入力（何行でもOK）]

**Claude**:
```yaml
✅ inboxに追加しました

inbox:
  - "[入力内容1]"
  - "[入力内容2]"
  - "[入力内容3]"
  - ...
```

### YAML更新処理

**ファイルパス**: `/Users/yuichi/AIPM/aipm_v0/Flow/202512/2025-12-30/daily_tasks.yaml`

**更新方法**: inbox配列に追加（何行でもOK）
```yaml
inbox:
  - "[既存項目1]"
  - "[既存項目2]"
  - "[新規入力1]"  # 追加
  - "[新規入力2]"  # 追加
  - "[新規入力3]"  # 追加
  - "[新規入力4]"  # 何行でもOK
  - ...
```

**重要**: 既存のinbox項目は削除しない（無制限に蓄積OK）

---

## 2️⃣ 次の一手（候補生成：1件選択）

**目的**: inbox の1件を、数日〜数週間でできる行動に分解して **複数の候補** を candidates に出す

### トリガー
ユーザーが「**次の一手**」と言ったら、このフローを開始

### 対話フロー

#### Step 1: inbox項目選択

**Claude**:
```
inboxから1件選んでください：

1. [inbox項目1]
2. [inbox項目2]
3. [inbox項目3]
...

番号で指定:
```

**ユーザー**: [番号を入力、例: 1]

#### Step 2: A/B/C候補生成

**Claude**:
```
「[選択した項目]」の完了までのTodo候補：

【パターンA: [アプローチ名]】
1. [Todo1]
2. [Todo2]
3. [Todo3]
→ 完了: [最終成果物]

【パターンB: [アプローチ名]】
1. [Todo1]
2. [Todo2]
3. [Todo3]
4. [Todo4]
→ 完了: [最終成果物]

（必要に応じてパターンC, D... と追加）

💡 おすすめ: パターン[A/B/C...]（1→2→3の順で実行）
理由: [このTodo組み合わせを推奨する理由を1-2行で説明]

どのパターンで進めますか？(A/B/C...)
```

**候補生成のルール**:
- **候補数は柔軟に**: 2〜5パターン程度、要件の複雑さに応じて調整
- **各パターンは完了までのTodoリスト**: 最初のTodoから最終成果物までの全ステップを提示
- **Todoは具体的で実行可能**: 「[具体的な成果物]を[数量]作る」など明確に
- **時間指定は不要**: 所要時間や期間の記載は一切不要
- **必ずレコメンドを提示**: 最も効果的なパターンとTodo実行順序を推奨し、理由を1-2行で説明
- **状況に応じた柔軟性**: 簡単な課題なら2-3パターン、複雑なら4-5パターン提示

**ユーザー**: [番号を入力、例: 1]

#### Step 3: candidates追加確認

**Claude**:
```yaml
✅ candidatesに追加しました

candidates:
  - "1. [候補1内容]"
  - "2. [候補2内容]"
  - "3. [候補3内容]"
  （選択されなかった候補も全て保存）
```

### YAML更新処理

**ファイルパス**: `/Users/yuichi/AIPM/aipm_v0/Flow/202512/2025-12-30/daily_tasks.yaml`

**更新方法**: candidatesを上書き（前回の候補は削除）
```yaml
candidates:
  - "1. [新しい候補1]"
  - "2. [新しい候補2]"
  - "3. [新しい候補3]"
  - "4. [新しい候補4]"  # 必要に応じて追加
```

**重要**: candidatesは使い捨て。選んだらtasksへ移動、選ばなかったB/Cは削除してOK。

---

## 2️⃣-B 全部の一手（候補生成：全件一括）

**目的**: inbox の全件について、数日〜数週間でできる行動に分解して **複数の候補** を一括表示

### トリガー
ユーザーが「**全部の一手**」と言ったら、このフローを開始

### 対話フロー

#### Step 1: inbox全件を読み込み

**Claude**: inbox全件を読み込む

#### Step 2: 全件についてA/B/C候補を生成

**Claude**:
```
inbox全件の完了までのTodo候補：

【例1: [inbox項目1]】
パターンA: [アプローチ名]
  1. [Todo1]
  2. [Todo2]
  3. [Todo3]
  → 完了: [最終成果物]

パターンB: [アプローチ名]
  1. [Todo1]
  2. [Todo2]
  3. [Todo3]
  4. [Todo4]
  → 完了: [最終成果物]

💡 おすすめ: パターンA（1→2→3の順で実行）
理由: [推奨理由を1-2行で説明]

【例2: [inbox項目2]】
パターンA: [アプローチ名]
  1. [Todo1]
  2. [Todo2]
  3. [Todo3]
  → 完了: [最終成果物]

💡 おすすめ: パターンA（1→2→3の順で実行）
理由: [推奨理由を1-2行で説明]

【例3: [inbox項目3]】
パターンA: [アプローチ名]
  1. [Todo1]
  2. [Todo2]
  3. [Todo3]
  → 完了: [最終成果物]

💡 おすすめ: パターンA（1→2→3の順で実行）
理由: [推奨理由を1-2行で説明]

どの項目について作業しますか？番号で指定:
1. [inbox項目1]
2. [inbox項目2]
3. [inbox項目3]
```

**候補生成のルール**:
- **候補数は柔軟に**: 項目の複雑さに応じて2〜5パターン程度提示
- **各パターンは完了までのTodoリスト**: 最初のTodoから最終成果物までの全ステップを提示
- **Todoは具体的で実行可能**: 「[具体的な成果物]を[数量]作る」など明確に
- **時間指定は不要**: 所要時間や期間の記載は一切不要
- **必ず各項目にレコメンドを提示**: 最も効果的なパターンとTodo実行順序を推奨し、理由を1-2行で説明
- **状況に応じた柔軟性**: 簡単な課題なら2パターン、複雑なら4-5パターン提示

**ユーザー**: [番号を入力、例: 1]

#### Step 3: 選択した項目の候補をcandidatesに追加

**Claude**:
```
どれをやりますか？番号で指定:
```

**ユーザー**: [番号を入力、例: 1]

**Claude**:
```yaml
✅ candidatesに追加しました

candidates:
  - "1. [候補1内容]"
  - "2. [候補2内容]"
  - "3. [候補3内容]"
  （選択されなかった候補も全て保存）
```

### YAML更新処理

**ファイルパス**: `/Users/yuichi/AIPM/aipm_v0/Flow/202512/2025-12-30/daily_tasks.yaml`

**更新方法**: candidatesを上書き（前回のA/B/Cは削除）
```yaml
candidates:
  - "A. [選択した項目の候補A]"
  - "B. [選択した項目の候補B]"
  - "C. [選択した項目の候補C]"
```

**重要**:
- 全候補を一度に表示するが、candidatesには選択した1項目のみ保存
- 他の項目についても作業したい場合は「全部の一手」を再実行

---

## 3️⃣ これやる（tasks確定）

**目的**: candidates の候補から1つ選び、tasks へ移動（今日の確定タスク）

### トリガー
ユーザーが「**これやる**」と言ったら、このフローを開始

### 対話フロー

#### Step 1: 候補選択

**Claude**:
```
どれをやりますか？(A/B/C、複数選択可、例: A,C または 全部)
```

**ユーザー**: [A, B, C のいずれか、複数（例: A,C）、または「全部」を入力]

#### Step 2: Done定義選択（一括指定）

**Claude**:
```
各パターンのDone定義を選んでください：

パターンA: [アプローチ名]
1. [A用完了基準1]
2. [A用完了基準2]
3. [A用完了基準3]

パターンC: [アプローチ名]
1. [C用完了基準1]
2. [C用完了基準2]

💡 おすすめ: A=1または2, C=1
理由: パターンAは1と2のどちらも適切（1は早期完了重視、2は品質重視）。パターンCは1が最適。

入力形式: A=1, C=2（カンマ区切りで指定）
```

**Done定義生成のルール**:
- **タスクの性質に応じて**: 成果物系、検証系、調査系などで適切な基準を提示
- **候補数は柔軟に**: 2〜5個程度、タスクの複雑さに応じて調整
- **具体的で測定可能**: 曖昧な基準は避け、達成判断が明確になるように
- **レコメンドは複数選択肢OK**: 状況に応じて各パターンに複数の選択肢を推奨可能（例: A=1または2, C=1）
- **推奨理由は選択肢ごとに**: 複数推奨する場合は、各選択肢の違い・メリットを簡潔に説明
- **共通パターン例**（数字制限なし、柔軟な表現）:
  - 成果物系: 「送れる/提出できる状態」「レビュー通過」「承認済み」
  - 検証系: 「動作確認が通る」「テスト全通過」
  - 調査系: 「メモがある」「レポート完成」
  - 計画系: 「次のステップが明確」「アクションプラン完成」
  - その他: 「ファイルが増える」「MTG完了」「後で決める（空）」

**ユーザー**: [A=1, C=2 の形式で入力]

#### Step 3: tasks追加確認

**Claude**:
```yaml
✅ tasksに追加しました（[N]個追加）

tasks:
  - id: T[番号1]
    what: "[選択した候補1の内容]"
    done: "[選択したDone定義1]"
    status: pending
    created_at: "[現在時刻]"

  - id: T[番号2]
    what: "[選択した候補2の内容]"
    done: "[選択したDone定義2]"
    status: pending
    created_at: "[現在時刻]"

  （選択した数だけ表示）
```

### YAML更新処理

**ファイルパス**: `/Users/yuichi/AIPM/aipm_v0/Flow/202512/2025-12-30/daily_tasks.yaml`

**タスクID自動採番ルール**:
- 既存タスクの最大IDを取得（例: T002）
- +1して新規ID生成（例: T003）
- 初回はT001

**Done定義マッピング**:
1. → "[完了基準1]"
2. → "[完了基準2]"
3. → "[完了基準3]"
4. → "[完了基準4]"
5. → "[完了基準5]"
6. → "" (空文字列)

**更新方法**: tasks配列に追加
```yaml
tasks:
  - id: T001
    what: "[既存タスク]"
    done: "[既存Done]"
    status: completed
    created_at: "2025-12-30 09:00"

  - id: T002
    what: "[新規タスク内容]"  # 追加
    done: "[選択したDone定義]"
    status: pending
    created_at: "[現在時刻]"
```

**重要**:
- tasksは制限なし（必要な数だけ追加可能）
- whyフィールドは削除（Ultra Light版では不要）

---

## 4️⃣ タスクプロンプト生成（task_prompts.md作成）

**目的**: tasks を Claude Code で実行可能なプロンプト形式に変換

### トリガー
ユーザーが「**タスクプロンプト生成**」と言ったら、このフローを開始

### 対話フロー

#### Step 1: daily_tasks.yaml 読み込み

**Claude**:
```
daily_tasks.yaml を読み込んでいます...
```

**処理内容**:
1. `Flow/202512/2025-12-30/daily_tasks.yaml` の tasks セクションを読み込む
2. pending 状態のタスク数をカウント
3. 各タスクの以下の情報を抽出:
   - id (T001-1, T001-2...)
   - what (タスク内容)
   - done (完了基準)

#### Step 2: task_prompts.md 生成

**Claude**:
```
task_prompts.md を生成しています...

対象タスク: [N]個
```

**処理内容**:
1. 各タスクについて、以下の要素を含む詳細プロンプトを生成:

**プロンプトに必須の5要素**:
- **タスクの目的**: なぜこのタスクを実行するのか
- **実行手順**: ステップバイステップの詳細手順（3-7ステップ）
- **ファイルパス**: 読み込む/作成するファイルの絶対パス
- **完了基準**: Done定義（具体的で測定可能）
- **保存先**: 成果物の保存場所

2. 以下のフォーマットでMarkdownファイルを作成:

```markdown
# Claude Code実行用タスクプロンプト

**生成日時**: 2025-12-30
**対象**: daily_tasks.yaml の全タスク

**使い方**: 各タスクの「📋 実行用プロンプト」のコードブロックをコピーして、Claude Codeに貼り付けてください。

---

## [タスクグループ名] タスク（Nステップ）

### T001-1: [タスク名]

**📋 実行用プロンプト（以下のコードブロックをコピー）**:

```
[このタスクを実行するための詳細なシステムプロンプト]

目的: [タスクの目的]
手順:
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

完了基準: [Done定義]
```

---

### T001-2: [タスク名]

**📋 実行用プロンプト（以下のコードブロックをコピー）**:

```
[詳細なシステムプロンプト]
...
```

（全タスク分を生成）
```

3. ファイルを保存: `Flow/202512/2025-12-30/task_prompts.md`

#### Step 3: 確認メッセージ

**Claude**:
```yaml
✅ task_prompts.md を作成しました

対象タスク: [N]個
保存先: Flow/202512/2025-12-30/task_prompts.md

各タスクのプロンプトをClaude Codeにコピペして実行できます。
```

### プロンプト生成の Good/Bad 例

**Good例** (具体的で実行可能・コピペしやすい):

task_prompts.mdでの記載形式:
```markdown
### T001-3: intake_prompt.md の Done定義セクション更新

**📋 実行用プロンプト（以下のコードブロックをコピー）**:

```
aipm_v0/.claude/daily/intake_prompt.md のDone定義セクションを編集してください。

目的: Done定義の選び方を汎用的な内容に変更
手順:
1. /Users/yuichi/AIPM/aipm_v0/.claude/daily/intake_prompt.md を読み込む
2. 「### Done定義の選び方」セクションを以下の内容に置き換える:

old_string: ### Done定義の選び方
- **迷ったら3番**（メモが5行ある）
- **成果物がある場合**: 1番（送れる/提出できる状態）
- **実装系**: 2番（動作確認が1回通る）
- **考えたくない時**: 6番（後で決める）

new_string: ### Done定義の選び方
AIがTodoの性質に応じて適切な候補（2〜5個）を提示します：
- **成果物系**: 「送れる/提出できる状態」「レビュー通過」「承認済み」
- **検証系**: 「動作確認が通る」「テスト全通過」
- **調査系**: 「メモがある」「レポート完成」
- **計画系**: 「次のステップが明確」「アクションプラン完成」

完了基準: Done定義セクションが汎用的な内容に変更されている
```
```

**Bad例** (抽象的で実行不可):
```markdown
### T999: ファイル編集

**📋 実行用プロンプト（以下のコードブロックをコピー）**:

```
ファイルを編集してください
```
```

**改善ポイント**:
- ❌ どのファイルを編集するのか不明
- ❌ 何をどう編集するのか不明
- ❌ 完了基準がない

### YAML更新処理

なし（このコマンドは daily_tasks.yaml を変更しない）

---

## 📊 daily_tasks.yaml フォーマット（完全例）

```yaml
date: 2025-12-30

inbox:
  - "[inbox項目1]"
  - "[inbox項目2]"
  - "[inbox項目3]"

candidates:
  - "A. [候補A内容]"
  - "B. [候補B内容]"
  - "C. [候補C内容]"

tasks:
  - id: T001
    what: "[タスク内容1]"
    done: "[完了基準1]"
    status: pending
    created_at: "2025-12-30 09:00"

  - id: T002
    what: "[タスク内容2]"
    done: "[完了基準2]"
    status: completed
    created_at: "2025-12-30 10:30"
```

---

## 🔄 運用ルール

### inbox
- **無制限**: 思いついたら即追記
- **削除不要**: Todo化しなくてもOK（書き溜める場所）
- **型**: 「[項目名]が進まない」「[項目名]が不安」など、モヤモヤを単語で書く

### candidates
- **使い捨て**: 選んだTodoをtasksへ移動
- **上書きOK**: 前回のパターンは削除してOK
- **生成ルール**: 完了までのTodoパターンに分解（2〜5パターン程度、各パターンは複数Todo）

### tasks
- **制限なし**: 必要な数だけ追加可能
- **statusは2種類のみ**: pending（未完了）/ completed（完了）
- **Done定義**: Todoの性質に応じて2〜5個から選ぶ（数字制限なし、柔軟な表現）

---

## 💡 対話Tips

### Todoパターン生成のコツ
**Good例**:
```
パターンA: [アプローチ名]
1. [Todo1]
2. [Todo2]
3. [Todo3]
→ 完了: [最終成果物]

💡 おすすめ: パターンA（1→2→3の順で実行）
理由: [推奨理由を1-2行で説明]
```

**Bad例**（抽象的すぎる）:
```
パターンA:
1. [抽象的な作業名]
2. [抽象的な作業名]
3. [抽象的な作業名]
```

### Done定義の選び方
- **迷ったら3番**（メモが5行ある）
- **成果物がある場合**: 1番（送れる/提出できる状態）
- **実装系**: 2番（動作確認が1回通る）
- **考えたくない時**: 6番（後で決める）

### inbox の書き方例
```yaml
inbox:
  - "企画書"           # 単語だけでもOK
  - "メール返信"       # これもOK
  - "〇〇が進まない"   # 詰まってること
  - "△△が不安"       # モヤモヤ
  - "□□を忘れそう"   # 気がかり
```

---

## 🚨 エラーハンドリング

### Q1: candidatesが刺さらない
**A**: 「次の一手」を再実行してください。別の候補が出ます。

### Q2: inboxが空
**A**: 以下のメッセージを表示：
```
📭 inboxが空です。
「タスクメモ」で気がかりを何行でも入れてください。
```

---

## 📚 参考ファイル

- **このプロンプト**: `/Users/yuichi/AIPM/aipm_v0/.claude/daily/intake_prompt.md`
- **使い方ガイド**: `/Users/yuichi/AIPM/aipm_v0/.claude/daily/README.md`
- **タスクリスト**: `/Users/yuichi/AIPM/aipm_v0/Flow/202512/2025-12-30/daily_tasks.yaml`
- **タスクプロンプト**: `/Users/yuichi/AIPM/aipm_v0/Flow/202512/2025-12-30/task_prompts.md`
- **失敗記録**: `/Users/yuichi/AIPM/aipm_v0/Flow/202512/2025-12-30/failure_log.yaml`

---

**更新履歴**:
- 2025-12-30 v2.1: Ultra Light 4コマンド運用（タスクプロンプト生成機能追加）
- 2025-12-30 v2.0: Ultra Light 3コマンド運用に全面改訂（inbox/candidates/tasks）
- 2025-12-30 v1.0: MVP初版リリース（旧仕様: What/Why/Done 3質問）

**作成者**: Claude Sonnet 4.5
**実装方針**: タスクを考えない → 悩みを書く → AIが候補提示 → 選ぶだけ → Claude Codeで実行
