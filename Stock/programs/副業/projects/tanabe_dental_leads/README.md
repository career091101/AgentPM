# 田辺玩具 歯科医院リード収集プロジェクト

## プロジェクト概要

**クライアント**: 田辺玩具
**目的**: 小児歯科・矯正歯科向けガチャガチャ導入営業リスト作成
**予算**: ¥30,000（約$200）
**目標収集数**: 3,826件（既存1,615件 + 新規2,211件）
**対象エリア**: 北海道・沖縄を除く45都府県

---

## プロジェクトステータス

| フェーズ | ステータス | 完了日 |
|---------|----------|--------|
| **Phase 0: テスト収集** | ✅ 完了 | 2026-01-04 |
| **Phase 1: 本番収集** | ⬜ 未着手 | - |
| **Phase B: スコアリング** | ⬜ 未着手 | - |
| **納品** | ⬜ 未着手 | - |

---

## Phase 0: テスト収集結果（2026-01-04）

### 検証目的
Google Maps API重複排除システムの動作確認と予算内実現可能性の検証

### 実行結果

| 項目 | 結果 |
|------|------|
| **検索地域** | 東京都（中心座標: 35.6812, 139.7671、半径50km） |
| **検索キーワード** | 小児歯科、矯正歯科、こども歯科 |
| **総API呼び出し** | 60件 |
| **重複スキップ** | 9件 (15.0%削減) |
| **新規ユニーク収集** | 51件 |
| **重複率** | 0.0% |
| **推定コスト** | $1.02 (¥153) |

### データ品質検証

| 基準 | 目標 | 実績 | 達成 |
|------|------|------|------|
| 重複率 | ≤ 10% | **0.0%** | ✅ |
| データ完全性 (医院名) | ≥ 90% | **100%** | ✅ |
| Google評価有り | ≥ 90% | **100%** | ✅ |
| WebサイトURL有り | ≥ 80% | **0%** | ⚠️ Phase Bで対応 |

**総合評価**: ✅ **検証合格**

### 技術的成果

1. **3層重複排除システムの実装完了**
   - Layer 1: 収集時重複チェック (collect_with_dedup.py)
   - Layer 2: マージ時重複チェック (merge_all_batches_with_dedup.py)
   - Layer 3: データ品質検証 (validate_data_quality.py)

2. **CSV列名変換の実装**
   - Google Maps API生データ → 日本語列名への自動変換
   - validator との完全互換性確保

3. **コスト削減効果の確認**
   - セッション内で15%のAPI呼び出し削減
   - 既存履歴との照合による重複回避

### 出力ファイル
- `test_100_clinics_20260104_142354.csv` - 51件のユニークデータ
- `collection_history.json` - 1,666件の収集履歴（既存1,615件 + 新規51件）

---

## Phase 1: 本番収集計画

### 目標

| 項目 | 値 |
|------|-----|
| **予算** | ¥25,500（予算の85%使用） |
| **残予算** | ¥4,500（緊急時対応用） |
| **検索パターン数** | 67パターン |
| **API呼び出し見積もり** | 10,000回 |
| **推定新規ユニーク** | 2,211件 |
| **既存データ** | 1,615件 |
| **合計目標** | **3,826件** |

### 検索範囲

**主要8都府県** × 2-3エリア × 3キーワード = 67パターン

| 都府県 | エリア数 | パターン数 |
|--------|---------|----------|
| 東京都 | 3 | 9 |
| 神奈川県 | 2 | 6 |
| 大阪府 | 2 | 6 |
| 愛知県 | 2 | 6 |
| 埼玉県 | 2 | 6 |
| 千葉県 | 2 | 6 |
| 兵庫県 | 2 | 6 |
| 福岡県 | 2 | 6 |
| **合計** | **17** | **51パターン** |

※ 実際は67パターンまで拡大予定

### 実行手順

```bash
cd /Users/yuichi/AIPM/aipm_v0/Stock/programs/副業/projects/tanabe_dental_leads

# STEP 1: 本番収集スクリプト作成
# scripts/collect_budget_optimized.py

# STEP 2: 本番実行（2-4時間）
source venv/bin/activate
python scripts/collect_budget_optimized.py

# STEP 3: データ品質検証
python scripts/validate_data_quality.py data/dental_leads_budget_YYYYMMDD_HHMMSS.csv

# STEP 4: 既存データとの統合
python scripts/merge_all_batches_with_dedup.py

# STEP 5: 最終統合CSVの確認
# → data/dental_leads_final_budget_YYYYMMDD_HHMMSS.csv (3,826件、重複0件)
```

### 成功基準

- [ ] 総件数: 3,800件以上（目標: 3,826件）
- [ ] 重複率 ≤ 10%
- [ ] データ完全性 ≥ 90%
- [ ] WebサイトURL有り ≥ 80%（Phase Bで改善）
- [ ] 既存1,615件との統合成功（重複なし）
- [ ] APIコスト: ¥25,500以内（残予算¥4,500確保）
- [ ] 実行時間: 4.5時間以内

---

## Phase B: スコアリング

### 目的
営業優先度スコアの算出とWebサイトURL取得

### スコアリング基準

```
Google評価 × 20点（最大100点）
+ レビュー件数ボーナス
  - 100件以上: 20点
  - 50-99件: 15点
  - 20-49件: 10点
  - 10-19件: 5点
  - 10件未満: 0点
+ WebサイトURLあり: 10点
= 合計スコア（最大130点）
```

### スコア帯別分布（Phase 0実績ベース）

| スコア帯 | 想定割合 | 想定件数 | 営業アクション |
|---------|---------|---------|--------------|
| 70点以上 | 28.5% | 1,090件 | 優先アプローチ推奨 |
| 40-69点 | 51.6% | 1,974件 | 中優先度 |
| 40点未満 | 19.9% | 762件 | 低優先度 |

### WebサイトURL取得戦略

**Phase Bでの対応**:
1. スコア70点以上の医院のみPlace Details API呼び出し
2. 推定1,090件 × $0.017 = $18.53（¥2,780）
3. 高スコア医院の詳細情報（営業時間、医院長名等）も同時取得

---

## コスト分析

### Phase 0実績
- API呼び出し: 60件
- コスト: $1.02 (¥153)

### Phase 1推定（推奨プラン）
- API呼び出し: 10,000回
- コスト: $170 (¥25,500)

### Phase B推定
- API呼び出し（Place Details）: 1,090件
- コスト: $18.53 (¥2,780)

### 総コスト見積もり
- Phase 0-1: $171.02 (¥25,653)
- Phase B: $18.53 (¥2,780)
- **合計**: $189.55 (¥28,433)
- **予算内**: ¥30,000 - ¥28,433 = **¥1,567 余剰**

---

## データ仕様

### CSV出力フォーマット

| 列名 | 説明 | データ型 |
|------|------|---------|
| 医院名 | 医院名称 | String |
| WebサイトURL | WebサイトURL（Phase Bで取得） | String |
| Google評価 | Google評価（1.0-5.0） | Float |
| レビュー件数 | レビュー件数 | Integer |
| 住所 | 住所 | String |
| Place ID | Google Maps Place ID | String |
| 営業状態 | 営業中/閉業等 | String |
| 電話番号 | 電話番号（Phase Bで取得） | String |
| 緯度 | 緯度 | Float |
| 経度 | 経度 | Float |
| スコア | 営業優先度スコア | Integer |
| 医院長名 | 医院長名（Phase Bで取得） | String |

---

## ディレクトリ構造

```
tanabe_dental_leads/
├── README.md                                   # 本ファイル
├── documents/
│   ├── 1_initiating/
│   │   └── project_charter.md                 # プロジェクト憲章
│   ├── 2_discovery/
│   │   ├── problem_statement.md               # 課題定義
│   │   └── solution_definition.md             # ソリューション定義
│   ├── 3_planning/
│   │   ├── wbs.md                             # WBS
│   │   └── risk_plan.md                       # リスク計画
│   └── 4_executing/
│       └── development_plan.md                # 開発計画
├── scripts/
│   ├── collect_with_dedup.py                  # Layer 1: 収集時重複排除
│   ├── merge_all_batches_with_dedup.py        # Layer 2: マージ時重複排除
│   ├── validate_data_quality.py               # Layer 3: データ品質検証
│   ├── test_collect_100.py                    # Phase 0: テスト収集
│   └── collect_budget_optimized.py            # Phase 1: 本番収集（作成予定）
├── data/
│   ├── test_100_clinics_20260104_142354.csv   # Phase 0出力
│   ├── collection_history.json                # 収集履歴
│   └── dental_leads_final_YYYYMMDD.csv        # Phase 1最終出力（予定）
└── evidence/
    ├── phase0_validation_report.txt           # Phase 0検証レポート
    └── phase1_validation_report.txt           # Phase 1検証レポート（予定）
```

---

## リスク管理

### リスク1: API制限超過
**影響**: 収集の一時停止
**軽減策**: レート制限対策（2秒待機）実装済み、1日100,000リクエストまで可能

### リスク2: 重複率が予想より高い
**影響**: 目標件数未達
**軽減策**: 検索半径を30km → 20kmに狭める、検索中心座標を増やす

### リスク3: API コスト超過
**影響**: 予算オーバー
**軽減策**: 1,000件ごとにコスト確認、残予算¥4,500を確保

### リスク4: データ品質低下
**影響**: WebサイトURL欠損、データ不完全
**軽減策**: Phase Bで高スコア医院のみPlace Details API呼び出し

---

## 参照ドキュメント

### Flow（開発中ファイル）
- `/Flow/202601/2026-01-03/tanabe_dental_leads/` - Phase 0作業ディレクトリ
- `/Flow/202601/2026-01-03/tanabe_dental_leads/README.md` - 詳細技術メモ
- `/Flow/202601/2026-01-03/tanabe_dental_leads/DEDUPLICATION_EFFECTIVENESS_REPORT.md` - 重複排除効果検証

### 計画ファイル
- `@.claude/plans/melodic-scribbling-pebble.md` - 15,000件収集計画（修正版: 3,826件）

---

## 更新履歴

- **2026-01-04 14:30**: プロジェクト作成、Phase 0完了報告追加
- **2026-01-04 14:24**: Phase 0テスト収集完了（51件、重複率0.0%）
- **2026-01-04 14:23**: CSV列名変換実装完了
- **2026-01-04**: プロジェクト開始

---

**Phase 0テスト収集は正常に完了しました。Phase 1本番収集の準備が整いました。**
