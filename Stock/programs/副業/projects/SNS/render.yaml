# Render.com設定ファイル
# https://render.com/docs/cron-jobs

services:
  # Cron Job: 日次アナリティクス収集
  - type: cron
    name: daily-analytics-collection
    env: python
    schedule: "0 0 * * *" # 毎日00:00 UTC (JST 9:00)
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python scripts/daily_analytics_collection.py"
    envVars:
      - key: LATE_API_KEY
        sync: false # Render.com DashboardでSecret設定
      - key: PYTHON_VERSION
        value: "3.11.0"

  # オプション: Web Service（ダッシュボード）
  # - type: web
  #   name: sns-analytics-dashboard
  #   env: python
  #   buildCommand: "pip install -r requirements.txt"
  #   startCommand: "uvicorn app:app --host 0.0.0.0 --port $PORT"
  #   envVars:
  #     - key: DATABASE_URL
  #       fromDatabase:
  #         name: analytics-db
  #         property: connectionString
