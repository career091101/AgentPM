# SNS投稿管理アプリ 機能テストケース

**作成日時**: 2026-01-04
**テスト対象**: SNS Approval Web Application (React + Flask)
**テスト目的**: 全機能の動作確認（AI修正機能を含む）

---

## テストケース一覧

### TC-01: 投稿一覧表示機能

**目的**: 初期表示時に3つの投稿案が正しく表示されることを確認

**前提条件**:
- Flask APIが起動している (http://localhost:5555)
- React frontendが起動している (http://localhost:3000)
- テストデータ（posts_generated_test.json）が存在する

**テスト手順**:
1. ブラウザでhttp://localhost:3000にアクセス
2. ページが完全に読み込まれるまで待機（3秒）
3. 画面をキャプチャ

**期待結果**:
- ✅ ヘッダー「SNS投稿管理」が表示される
- ✅ 3つの投稿案カード（案1、案2、案3）が表示される
- ✅ 各カードに以下が含まれる:
  - タイトル
  - 本文プレビュー
  - プラットフォーム情報
  - 「この案を選択」ボタン
  - 「編集」ボタン

---

### TC-02: 編集モーダル表示機能

**目的**: 編集ボタンクリック時にモーダルが正しく表示されることを確認

**前提条件**:
- TC-01が成功している

**テスト手順**:
1. 任意の投稿案の「編集」ボタンをクリック
2. 2秒待機
3. モーダルの内容を確認

**期待結果**:
- ✅ モーダルが表示される
- ✅ モーダルタイトル「投稿内容を編集」が表示される
- ✅ 2つのタブ（「手動編集」「AI修正」）が表示される
- ✅ デフォルトで「手動編集」タブが選択されている
- ✅ テキストエリアに投稿内容が表示される
- ✅ 文字数カウンターが表示される
- ✅ Undo/Redoボタンが表示される
- ✅ キャンセル/保存ボタンが表示される

---

### TC-03: 手動編集機能 - テキスト入力

**目的**: テキストエリアでの文字入力と文字数カウントが正しく動作することを確認

**前提条件**:
- TC-02が成功している
- 編集モーダルが開いている

**テスト手順**:
1. テキストエリア内の既存テキストを選択（Cmd+A）
2. 新しいテキストを入力: "テスト投稿です。"
3. 文字数カウンターを確認

**期待結果**:
- ✅ テキストが正しく入力される
- ✅ 文字数カウンターが更新される（「文字数: 9字」）
- ✅ 入力内容がリアルタイムで反映される

---

### TC-04: 手動編集機能 - Undo/Redo

**目的**: Undo/Redo機能が正しく動作することを確認

**前提条件**:
- TC-03が成功している

**テスト手順**:
1. 「元に戻す」ボタンをクリック
2. テキストエリアの内容を確認
3. 「やり直す」ボタンをクリック
4. テキストエリアの内容を確認

**期待結果**:
- ✅ 「元に戻す」クリックで編集前の状態に戻る
- ✅ 「やり直す」クリックで編集後の状態に戻る
- ✅ 文字数カウンターも連動して更新される

---

### TC-05: AI修正タブ表示機能

**目的**: AI修正タブが正しく表示されることを確認

**前提条件**:
- 編集モーダルが開いている

**テスト手順**:
1. 「AI修正」タブをクリック
2. 1秒待機
3. タブの内容を確認

**期待結果**:
- ✅ AI修正タブに切り替わる
- ✅ 修正依頼用のテキストエリアが表示される
- ✅ 「修正を依頼」ボタンが表示される
- ✅ プレースホルダーテキストが表示される（例: "どのように修正しますか？"）

---

### TC-06: AI修正機能 - 修正依頼送信

**目的**: AI修正依頼が正しくAPIに送信されることを確認

**前提条件**:
- TC-05が成功している
- AI修正タブが表示されている

**テスト手順**:
1. 修正依頼テキストエリアに入力: "もっとカジュアルな表現に変更してください"
2. 「修正を依頼」ボタンをクリック
3. ネットワークリクエストを監視
4. レスポンスを確認

**期待結果**:
- ✅ POST http://localhost:5555/api/refine リクエストが送信される
- ✅ リクエストボディに修正依頼内容が含まれる
- ✅ レスポンスが正常に返る（200 OK）
- ✅ 修正後のテキストがテキストエリアに反映される
- ✅ ローディング状態が表示される（ボタン無効化など）

---

### TC-07: 保存機能

**目的**: 編集内容の保存が正しく動作することを確認

**前提条件**:
- 編集モーダルが開いている
- テキストを編集済み

**テスト手順**:
1. 「保存」ボタンをクリック
2. モーダルの状態を確認
3. 投稿一覧画面を確認

**期待結果**:
- ✅ モーダルが閉じる
- ✅ 投稿一覧画面に戻る
- ✅ 編集した内容が投稿カードに反映される
- ✅ 成功トースト通知が表示される（実装されている場合）

---

### TC-08: キャンセル機能

**目的**: 編集のキャンセルが正しく動作することを確認

**前提条件**:
- 編集モーダルが開いている
- テキストを編集済み

**テスト手順**:
1. 「キャンセル」ボタンをクリック
2. モーダルの状態を確認
3. 再度「編集」ボタンをクリック
4. テキストエリアの内容を確認

**期待結果**:
- ✅ モーダルが閉じる
- ✅ 投稿一覧画面に戻る
- ✅ 編集内容が保存されていない（元の内容のまま）

---

### TC-09: 「この案を選択」ボタン機能

**目的**: 投稿案の選択・承認が正しく動作することを確認

**前提条件**:
- TC-01が成功している

**テスト手順**:
1. 任意の投稿案の「この案を選択」ボタンをクリック
2. ネットワークリクエストを監視
3. レスポンスを確認
4. UI変化を確認

**期待結果**:
- ✅ POST http://localhost:5555/api/approve リクエストが送信される
- ✅ リクエストボディに選択した投稿の情報が含まれる
- ✅ レスポンスが正常に返る（200 OK）
- ✅ 成功トースト通知が表示される
- ✅ 選択したカードの見た目が変化する（実装されている場合）

---

### TC-10: エラーハンドリング - API障害

**目的**: APIエラー時の挙動が適切であることを確認

**前提条件**:
- Flask APIを停止する

**テスト手順**:
1. Flask APIを停止
2. ブラウザでhttp://localhost:3000にアクセス
3. エラー表示を確認

**期待結果**:
- ✅ エラーメッセージが表示される
- ✅ アプリケーションがクラッシュしない
- ✅ ユーザーにわかりやすいエラー内容が表示される

---

### TC-11: エラーハンドリング - AI修正失敗

**目的**: AI修正APIエラー時の挙動が適切であることを確認

**前提条件**:
- 編集モーダルのAI修正タブが開いている

**テスト手順**:
1. 修正依頼テキストエリアに入力
2. 「修正を依頼」ボタンをクリック
3. APIがエラーを返す場合の挙動を確認

**期待結果**:
- ✅ エラートースト通知が表示される
- ✅ ローディング状態が解除される
- ✅ ボタンが再度クリック可能になる
- ✅ 元のテキストが保持される

---

### TC-12: レスポンシブデザイン

**目的**: 異なる画面サイズで正しく表示されることを確認

**前提条件**:
- TC-01が成功している

**テスト手順**:
1. ブラウザウィンドウサイズを変更（1024x768）
2. 画面をキャプチャ
3. ブラウザウィンドウサイズを変更（375x667 - モバイルサイズ）
4. 画面をキャプチャ

**期待結果**:
- ✅ タブレットサイズで適切にレイアウトされる
- ✅ モバイルサイズで適切にレイアウトされる
- ✅ テキストが読める
- ✅ ボタンがクリック可能なサイズである

---

## テスト実行記録

| TC番号 | テスト項目 | 実行日時 | 結果 | 備考 |
|--------|----------|---------|------|------|
| TC-01 | 投稿一覧表示機能 | - | - | - |
| TC-02 | 編集モーダル表示機能 | - | - | - |
| TC-03 | 手動編集機能 - テキスト入力 | - | - | - |
| TC-04 | 手動編集機能 - Undo/Redo | - | - | - |
| TC-05 | AI修正タブ表示機能 | - | - | - |
| TC-06 | AI修正機能 - 修正依頼送信 | - | - | - |
| TC-07 | 保存機能 | - | - | - |
| TC-08 | キャンセル機能 | - | - | - |
| TC-09 | 「この案を選択」ボタン機能 | - | - | - |
| TC-10 | エラーハンドリング - API障害 | - | - | - |
| TC-11 | エラーハンドリング - AI修正失敗 | - | - | - |
| TC-12 | レスポンシブデザイン | - | - | - |

---

## テスト環境

| 項目 | 詳細 |
|------|------|
| OS | macOS (Darwin 25.1.0) |
| ブラウザ | Chrome (Claude in Chrome MCP経由) |
| フロントエンド | React 18.2 + Vite 5.0 (http://localhost:3000) |
| バックエンド | Flask + Flask-CORS (http://localhost:5555) |

---

**テストケース作成者**: Claude Code
**最終更新日**: 2026-01-04
