# Threads Insights データ収集ガイド

Threads Web版のInsightsページから週間総括データを収集します。

## 重要な注意事項

**Threadsの洞察データはフォロワー100人以上で利用可能です。**

- フォロワー100人未満: 週間総括データのみ取得可能
- フォロワー100人以上: 詳細な洞察データも取得可能

## セットアップ

### 1. 依存パッケージのインストール

```bash
cd /Users/yuichi/AIPM/aipm_v0/Stock/programs/副業/projects/SNS
pip install -r requirements.txt
playwright install chromium
```

## 使用方法

### Threads Webスクレイピング

```bash
cd /Users/yuichi/AIPM/aipm_v0/Stock/programs/副業/projects/SNS/scripts
python3 scrape_threads_insights.py
```

**実行手順:**

1. スクリプトを実行するとChromeブラウザが自動的に開きます
2. Threadsにログインしてください（初回のみ、Instagramと同じアカウント）
3. ログイン後、スクリプトが自動的にデータを取得します
4. 次回以降はログイン状態が保存されるため、自動実行されます

**取得データ:**

- `threads_weekly_recap_YYYYMMDD_HHMMSS.csv` - 週間総括データ
- `threads_insights_YYYYMMDD_HHMMSS.csv` - 洞察データ（フォロワー100人以上の場合のみ）

### 出力CSV形式

**週間総括ファイル (`threads_weekly_recap_*.csv`):**

| カラム名 | 説明 |
|---------|------|
| 期間 | データ取得期間（例: 12月24日から12月31日） |
| 取得日時 | データ取得日時 |
| 投稿数 | 週間の投稿数 |
| 表示モード | 週間のビュー数 |
| 返信数 | 週間の返信数 |
| 新たなフォロワー | 週間の新規フォロワー数 |

**洞察データファイル (`threads_insights_*.csv`) - フォロワー100人以上の場合:**

| カラム名 | 説明 |
|---------|------|
| 期間 | データ取得期間（過去90日間） |
| 取得日時 | データ取得日時 |
| 総ビュー数 | 過去90日間の総ビュー数 |
| 総エンゲージメント数 | いいね、返信、リポストなどの合計 |
| フォロワー数 | 現在のフォロワー数 |

## トラブルシューティング

### エラー: ログインページから進まない

**解決策:**

1. Instagramアカウントでログインしてください（ThreadsはInstagramアカウントを使用）
2. 2段階認証が有効な場合は、認証コードを入力してください
3. ログイン後、スクリプトが自動的に進行します

### データが取得できない

**原因:**

- フォロワー数が100人未満のため、詳細な洞察データが利用できない
- Threads Web UIの構造が変更された可能性があります
- インターネット接続が不安定です

**解決策:**

1. フォロワー数を確認してください（100人以上で詳細データ利用可能）
2. 週間総括データは取得できているか確認してください
3. スクリプトを再実行してください

### ブラウザが閉じない

**解決策:**

- `Ctrl+C`でスクリプトを強制終了してください
- 手動でブラウザを閉じてください

## Instagram と Threads の違い

| 項目 | Instagram | Threads |
|------|-----------|---------|
| 洞察データ利用条件 | クリエイター/ビジネスアカウント | フォロワー100人以上 |
| データ取得期間 | 過去90日間 | 週間総括 + 過去90日間 |
| 主要メトリクス | インプレッション、リーチ、エンゲージメント | ビュー、返信、新規フォロワー |
| ログイン | Instagramアカウント | Instagramアカウント（共通） |

## 注意事項

1. **利用規約遵守**: Threadsの利用規約に従ってデータを取得してください
2. **レート制限**: 短時間に大量のリクエストを送信しないでください
3. **データ保存**: 取得したデータは個人使用のみに限定してください
4. **UI変更**: Threads Web UIは頻繁に変更されるため、スクリプトが動作しなくなる可能性があります
5. **フォロワー数**: 詳細な洞察データにはフォロワー100人以上が必要です

## 次のステップ

データ取得後、以下のスクリプトでデータ分析を実行できます:

```bash
# 分析スクリプト（作成予定）
python3 analyze_threads_posts.py
```

## フォロワー数を100人以上にするためのヒント

Threadsの週間総括ページに表示される「今週のヒント」を参考にしてください：

- 新しいコンテンツフォーマットを試す
- メディアやタグを追加する
- 定期的に投稿する
- コミュニティとエンゲージする
