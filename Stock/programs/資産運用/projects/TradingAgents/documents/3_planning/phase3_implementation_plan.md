# Phase 3 å®Ÿè£…è¨ˆç”»

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: TradingAgents - æ—¥çµŒå¹³å‡å…ˆç‰©ãƒˆãƒ¬ãƒ¼ãƒ‰æˆ¦ç•¥ã‚·ã‚¹ãƒ†ãƒ 
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 3 - ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆä¿¡é ¼æ€§å‘ä¸Šã¨é«˜åº¦åˆ†ææ©Ÿèƒ½
**ä½œæˆæ—¥**: 2026-01-01
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼**: yuichi

---

## ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### Phase 3ã®ç›®çš„

Phase 2ã§å®Ÿè£…ã—ãŸãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã®**ä¿¡é ¼æ€§ã‚’å‘ä¸Š**ã•ã›ã€å®Ÿé‹ç”¨ã§å†ç¾å¯èƒ½ãªæˆ¦ç•¥è©•ä¾¡ã‚’å®Ÿç¾ã™ã‚‹ã€‚

### ä¸»è¦ç›®æ¨™

| ç›®æ¨™ | ç¾çŠ¶ï¼ˆPhase 2ï¼‰ | ç›®æ¨™ï¼ˆPhase 3ï¼‰ | æ”¹å–„å¹… |
|------|---------------|---------------|--------|
| ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆä¿¡é ¼æ€§ | 60% | 95%ä»¥ä¸Š | +35% |
| å®Ÿé‹ç”¨ã¨ã®ä¹–é›¢ | 15ï½20% | 3ï½5%ä»¥å†… | -12ï½15% |
| ç’°å¢ƒé©å¿œæ€§ | æœªå¯¾å¿œ | å…¨ãƒ¬ã‚¸ãƒ¼ãƒ å¯¾å¿œ | æ–°è¦å®Ÿè£… |

### æœŸå¾…ã•ã‚Œã‚‹æˆæœ

1. **ä¿¡é ¼æ€§ã®é«˜ã„ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœ**: å®Ÿé‹ç”¨ã§å†ç¾å¯èƒ½ãªæ€§èƒ½è©•ä¾¡
2. **ç’°å¢ƒå¤‰åŒ–ã¸ã®å¯¾å¿œ**: ä¸Šæ˜‡ãƒ»ä¸‹è½ãƒ»ãƒ¬ãƒ³ã‚¸ç›¸å ´ã§ã®å®‰å®šæ€§ç¢ºä¿
3. **ãƒªã‚¹ã‚¯ç®¡ç†ã®ç²¾åº¦å‘ä¸Š**: æ­£ç¢ºãªæå¤±è¦‹ç©ã‚‚ã‚Šã¨ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ

---

## 1. Phase 3ã®å…¨ä½“åƒ

### 1-1. èƒŒæ™¯ã¨èª²é¡Œ

**ä¿¡é ¼æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆã§åˆ¤æ˜ã—ãŸä¸»è¦èª²é¡Œ**:

| èª²é¡Œ | ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ« | å½±éŸ¿ |
|------|------------|------|
| ãƒ«ãƒƒã‚¯ã‚¢ãƒ˜ãƒƒãƒ‰ãƒã‚¤ã‚¢ã‚¹ | ğŸ”´ HIGH | ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœãŒ5ï½15%éå¤§è©•ä¾¡ |
| ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸æœªå®Ÿè£… | ğŸŸ¡ MEDIUM | ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ã®éä¿¡ã€æå¤±ã®éå°è©•ä¾¡ |
| ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ¬ã‚¸ãƒ¼ãƒ æœªå¯¾å¿œ | ğŸ”´ HIGH | ç’°å¢ƒå¤‰åŒ–ã§æˆ¦ç•¥ãŒç ´ç¶»ã™ã‚‹ãƒªã‚¹ã‚¯ |

**å‚ç…§**: `/data/results/backtest_reliability_analysis.md`

### 1-2. Phase 3ã®ã‚¹ã‚³ãƒ¼ãƒ—

#### å«ã¾ã‚Œã‚‹ã‚‚ã®ï¼ˆIn Scopeï¼‰

**å¿…é ˆæ©Ÿèƒ½ï¼ˆğŸ”´ HIGH Priorityï¼‰**:
1. ãƒ«ãƒƒã‚¯ã‚¢ãƒ˜ãƒƒãƒ‰ãƒã‚¤ã‚¢ã‚¹ã®æ’é™¤
2. ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸ã®å®Ÿè£…
3. ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ¬ã‚¸ãƒ¼ãƒ åˆ†æã®å®Ÿè£…

**æ¨å¥¨æ©Ÿèƒ½ï¼ˆğŸŸ¡ MEDIUM Priorityï¼‰**:
4. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–æ©Ÿèƒ½
5. ã‚µãƒã‚¤ãƒãƒ¼ã‚·ãƒƒãƒ—ãƒã‚¤ã‚¢ã‚¹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼ˆğŸŸ¢ LOW Priorityï¼‰**:
6. ãƒãƒ¼ã‚±ãƒƒãƒˆã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã®è€ƒæ…®
7. å¯è¦–åŒ–æ©Ÿèƒ½ã®æ‹¡å……

#### å«ã¾ã‚Œãªã„ã‚‚ã®ï¼ˆOut of Scopeï¼‰

- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å–å¼•ã®å®Ÿè£…
- è‡ªå‹•ç™ºæ³¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æº
- è¤‡æ•°éŠ˜æŸ„å¯¾å¿œï¼ˆPhase 4ä»¥é™ï¼‰
- æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®å°å…¥ï¼ˆPhase 4ä»¥é™ï¼‰

### 1-3. æˆåŠŸåŸºæº–

| åŸºæº– | æ¸¬å®šæ–¹æ³• | ç›®æ¨™å€¤ |
|------|---------|--------|
| ãƒ«ãƒƒã‚¯ã‚¢ãƒ˜ãƒƒãƒ‰ãƒã‚¤ã‚¢ã‚¹æ’é™¤ | ç¿Œæ—¥å§‹å€¤ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã®å®Ÿè£… | 100% |
| ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸å®Ÿè£… | ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹æ™‚ã®ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸é©ç”¨ | 100% |
| ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†æå®Ÿè£… | 3ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ã®KPIè¨ˆç®— | 100% |
| WFåŠ¹ç‡ã®ç¶­æŒ | ã‚¦ã‚©ãƒ¼ã‚¯ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰åˆ†æ | â‰¥ 50% |
| å…¨ãƒ¬ã‚¸ãƒ¼ãƒ ã§ã®å®‰å®šæ€§ | ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ª | å…¨ãƒ¬ã‚¸ãƒ¼ãƒ  > 0.3 |

---

## 2. å®Ÿè£…ã™ã¹ãæ©Ÿèƒ½ãƒªã‚¹ãƒˆï¼ˆå„ªå…ˆåº¦ä»˜ãï¼‰

### 2-1. ğŸ”´ HIGH Priorityï¼ˆå¿…é ˆå®Ÿè£…ï¼‰

---

#### æ©Ÿèƒ½1: ãƒ«ãƒƒã‚¯ã‚¢ãƒ˜ãƒƒãƒ‰ãƒã‚¤ã‚¢ã‚¹ã®æ’é™¤

**å„ªå…ˆåº¦**: ğŸ”´ HIGHï¼ˆPhase 3ã§å¿…é ˆï¼‰
**é›£æ˜“åº¦**: Easy
**æ¨å®šå·¥æ•°**: 2æ™‚é–“

##### ç¾çŠ¶ã®å•é¡Œ

```python
# backtest_engine.py Line 109
entry_price = signal.get('entry_price', price_data['close'])
# â†‘ signal_dateã®çµ‚å€¤ã‚’ä½¿ã£ã¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼ â†’ å…ˆèª­ã¿ã®ãƒªã‚¹ã‚¯
```

##### å®Ÿè£…å†…å®¹

**ã‚¿ã‚¹ã‚¯1-1: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ã®ä¿®æ­£**

```python
def run_backtest(self, signals: List[Dict]) -> Dict:
    # ...

    if action == 'buy' and current_position is None:
        # ç¿Œæ—¥å§‹å€¤ã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼ï¼ˆå…ˆèª­ã¿é˜²æ­¢ï¼‰
        next_date = self._get_next_trading_day(signal_date)

        if next_date is None:
            # ç¿Œæ—¥ã®ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
            continue

        next_price_data = self.data.loc[next_date]
        entry_price = signal.get('entry_price', next_price_data['open'])

        # ... ä»¥é™ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼å‡¦ç†
```

**ã‚¿ã‚¹ã‚¯1-2: ç¿Œå–¶æ¥­æ—¥å–å¾—ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…**

```python
def _get_next_trading_day(self, current_date: pd.Timestamp) -> Optional[pd.Timestamp]:
    """
    ç¿Œå–¶æ¥­æ—¥ã‚’å–å¾—

    Args:
        current_date: ç¾åœ¨ã®æ—¥ä»˜

    Returns:
        ç¿Œå–¶æ¥­æ—¥ã€å­˜åœ¨ã—ãªã„å ´åˆã¯None
    """
    future_dates = self.data.index[self.data.index > current_date]

    if len(future_dates) > 0:
        return future_dates[0]

    return None
```

**ã‚¿ã‚¹ã‚¯1-3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°**

```markdown
## ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆã®ãƒ«ãƒ¼ãƒ«

### ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- **Tæ—¥ã®çµ‚å€¤ç¢ºå®šå¾Œã«ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ â†’ T+1æ—¥ã®å§‹å€¤ã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼**
- ä¾‹:
  - 2025-01-01ã®çµ‚å€¤ãŒç¢ºå®š
  - 2025-01-01 20:00ã«ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆï¼ˆè²·ã„ï¼‰
  - 2025-01-02ã®å§‹å€¤ã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼å®Ÿè¡Œ

### ãƒ«ãƒƒã‚¯ã‚¢ãƒ˜ãƒƒãƒ‰ãƒã‚¤ã‚¢ã‚¹ã®é˜²æ­¢

ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã§ã¯ã€Tæ—¥ã®æƒ…å ±ã®ã¿ã‚’ä½¿ã£ã¦Tæ—¥ã«ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã™ã‚‹ã“ã¨ã¯ç¦æ­¢ã€‚
å¿…ãšT+1æ—¥ã®å§‹å€¤ã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã™ã‚‹ã“ã¨ã§ã€å®Ÿé‹ç”¨ã¨ã®æ•´åˆæ€§ã‚’ç¢ºä¿ã€‚
```

**ã‚¿ã‚¹ã‚¯1-4: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ **

```python
def test_look_ahead_bias_prevention():
    """ãƒ«ãƒƒã‚¯ã‚¢ãƒ˜ãƒƒãƒ‰ãƒã‚¤ã‚¢ã‚¹é˜²æ­¢ã®ãƒ†ã‚¹ãƒˆ"""

    # Tæ—¥ã®çµ‚å€¤ã§ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
    signals = [
        {'date': '2025-01-01', 'action': 'buy'}  # entry_priceã‚’æŒ‡å®šã—ãªã„
    ]

    engine = BacktestEngine(data=sample_data)
    results = engine.run_backtest(signals)

    # T+1æ—¥ã®å§‹å€¤ã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
    first_trade = results['trades'][0]
    assert first_trade['entry_date'] == '2025-01-02'
    assert first_trade['entry_price'] == sample_data.loc['2025-01-02']['open']
```

##### æˆåŠŸåŸºæº–

- [x] ç¿Œå–¶æ¥­æ—¥ã§ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãŒ100%å‹•ä½œ
- [x] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ˜è¨˜
- [x] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åˆæ ¼

---

#### æ©Ÿèƒ½2: ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸ã®å®Ÿè£…

**å„ªå…ˆåº¦**: ğŸ”´ HIGHï¼ˆPhase 3ã§å¿…é ˆï¼‰
**é›£æ˜“åº¦**: Easy
**æ¨å®šå·¥æ•°**: 3æ™‚é–“

##### ç¾çŠ¶ã®å•é¡Œ

```python
# backtest_engine.py Line 158
exit_price = current_position['stop_loss']
# â†‘ æ­£ç¢ºã«ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ä¾¡æ ¼ã§ç´„å®š â†’ éç¾å®Ÿçš„
```

##### å®Ÿè£…å†…å®¹

**ã‚¿ã‚¹ã‚¯2-1: ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¿½åŠ **

```python
class BacktestEngine:
    def __init__(
        self,
        data: pd.DataFrame,
        initial_capital: float = 1000000,
        position_size_pct: float = 0.95,
        commission_pct: float = 0.001,
        slippage_pct: float = 0.001,  # æ–°è¦è¿½åŠ 
        stop_loss_slippage_pct: float = 0.002  # æ–°è¦è¿½åŠ 
    ):
        # ...
        self.slippage_pct = slippage_pct
        self.stop_loss_slippage_pct = stop_loss_slippage_pct
```

**ã‚¿ã‚¹ã‚¯2-2: ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸é©ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…**

```python
def _apply_slippage(
    self,
    price: float,
    is_long_position: bool,
    order_type: str = 'market'
) -> float:
    """
    ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸ã‚’é©ç”¨

    Args:
        price: åŸºæº–ä¾¡æ ¼
        is_long_position: è²·ã„ãƒã‚¸ã‚·ãƒ§ãƒ³ã®å ´åˆTrue
        order_type: 'market', 'stop_loss', 'take_profit'

    Returns:
        ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸é©ç”¨å¾Œã®ä¾¡æ ¼
    """
    if order_type == 'stop_loss':
        slippage = self.stop_loss_slippage_pct
    else:
        slippage = self.slippage_pct

    # è²·ã„ãƒã‚¸ã‚·ãƒ§ãƒ³ã®ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ = å£²ã‚Šæ³¨æ–‡ â†’ ä¸‹æ–¹å‘ã«ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸
    if is_long_position and order_type == 'stop_loss':
        return price * (1 - slippage)

    # è²·ã„ãƒã‚¸ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¤ã‚¯ãƒ—ãƒ­ãƒ•ã‚£ãƒƒãƒˆ = å£²ã‚Šæ³¨æ–‡ â†’ ä¸‹æ–¹å‘ã«ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸
    if is_long_position and order_type == 'take_profit':
        return price * (1 - slippage)

    # é€šå¸¸ã®æˆè¡Œæ³¨æ–‡
    if is_long_position:
        # è²·ã„æ³¨æ–‡ â†’ ä¸Šæ–¹å‘ã«ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸
        return price * (1 + slippage)
    else:
        # å£²ã‚Šæ³¨æ–‡ â†’ ä¸‹æ–¹å‘ã«ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸
        return price * (1 - slippage)
```

**ã‚¿ã‚¹ã‚¯2-3: ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹å‡¦ç†ã¸ã®ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸é©ç”¨**

```python
# ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ç™ºå‹•æ™‚
if current_position['stop_loss'] and low <= current_position['stop_loss']:
    # ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸é©ç”¨
    exit_price = self._apply_slippage(
        current_position['stop_loss'],
        is_long_position=True,
        order_type='stop_loss'
    )

    # ... ä»¥é™ã®æ±ºæ¸ˆå‡¦ç†
```

**ã‚¿ã‚¹ã‚¯2-4: ãƒ†ã‚¤ã‚¯ãƒ—ãƒ­ãƒ•ã‚£ãƒƒãƒˆå‡¦ç†ã¸ã®ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸é©ç”¨**

```python
# ãƒ†ã‚¤ã‚¯ãƒ—ãƒ­ãƒ•ã‚£ãƒƒãƒˆç™ºå‹•æ™‚
if current_position['take_profit'] and high >= current_position['take_profit']:
    # ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸é©ç”¨
    exit_price = self._apply_slippage(
        current_position['take_profit'],
        is_long_position=True,
        order_type='take_profit'
    )

    # ... ä»¥é™ã®æ±ºæ¸ˆå‡¦ç†
```

**ã‚¿ã‚¹ã‚¯2-5: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ **

```python
def test_slippage_on_stop_loss():
    """ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹æ™‚ã®ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ"""

    signals = [
        {
            'date': '2025-01-01',
            'action': 'buy',
            'entry_price': 40000,
            'stop_loss': 39500
        }
        # ä¾¡æ ¼ãŒ39400ã¾ã§ä¸‹è½ã—ã¦ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ç™ºå‹•
    ]

    engine = BacktestEngine(
        data=sample_data,
        stop_loss_slippage_pct=0.002  # 0.2%
    )
    results = engine.run_backtest(signals)

    # ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ä¾¡æ ¼39500 - 0.2% = 39421å††ã§ç´„å®šã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
    first_trade = results['trades'][0]
    expected_exit = 39500 * (1 - 0.002)  # 39421å††

    assert abs(first_trade['exit_price'] - expected_exit) < 1
```

##### æˆåŠŸåŸºæº–

- [x] å…¨ç´„å®šã‚¿ã‚¤ãƒ—ã§ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸é©ç”¨
- [x] ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹æ™‚ã®ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸ãŒæ­£ã—ãå‹•ä½œ
- [x] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åˆæ ¼

---

#### æ©Ÿèƒ½3: ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ¬ã‚¸ãƒ¼ãƒ åˆ†æã®å®Ÿè£…

**å„ªå…ˆåº¦**: ğŸ”´ HIGHï¼ˆPhase 3ã§å¿…é ˆï¼‰
**é›£æ˜“åº¦**: Hard
**æ¨å®šå·¥æ•°**: 10æ™‚é–“

##### å®Ÿè£…å†…å®¹

**ã‚¿ã‚¹ã‚¯3-1: ãƒ¬ã‚¸ãƒ¼ãƒ æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…**

```python
class MarketRegimeDetector:
    """
    ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ¬ã‚¸ãƒ¼ãƒ ï¼ˆç›¸å ´ç’°å¢ƒï¼‰ã®è‡ªå‹•åˆ¤å®š

    Regimes:
        - uptrend: ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰
        - downtrend: ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰
        - range: ãƒ¬ãƒ³ã‚¸ç›¸å ´
        - high_volatility: é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆæš´è½æ™‚ãªã©ï¼‰
    """

    def __init__(
        self,
        trend_window: int = 60,
        volatility_window: int = 20
    ):
        self.trend_window = trend_window
        self.volatility_window = volatility_window

    def detect_regime(self, data: pd.DataFrame) -> pd.Series:
        """
        ãƒ¬ã‚¸ãƒ¼ãƒ ã‚’æ¤œå‡º

        Args:
            data: OHLCV DataFrame

        Returns:
            Series with regime labels
        """
        regime_data = data.copy()

        # ãƒˆãƒ¬ãƒ³ãƒ‰åˆ¤å®šï¼ˆSMAã®å‚¾ãï¼‰
        regime_data['sma'] = regime_data['close'].rolling(
            window=self.trend_window
        ).mean()

        regime_data['trend_slope'] = (
            regime_data['sma'].diff(5) / regime_data['sma']
        )

        # ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£åˆ¤å®šï¼ˆæ¨™æº–åå·®ï¼‰
        regime_data['volatility'] = regime_data['close'].rolling(
            window=self.volatility_window
        ).std()

        # ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã®é–¾å€¤ï¼ˆéå»å¹³å‡ã®1.5å€ä»¥ä¸Šã§é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰
        volatility_threshold = regime_data['volatility'].rolling(
            window=100
        ).mean() * 1.5

        # ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†é¡
        def classify_regime(row):
            # é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã®å ´åˆ
            if pd.notna(row['volatility']) and row['volatility'] > volatility_threshold.loc[row.name]:
                return 'high_volatility'

            # ãƒˆãƒ¬ãƒ³ãƒ‰åˆ¤å®š
            if pd.notna(row['trend_slope']):
                if row['trend_slope'] > 0.02:
                    return 'uptrend'
                elif row['trend_slope'] < -0.02:
                    return 'downtrend'
                else:
                    return 'range'

            return 'unknown'

        regime_data['regime'] = regime_data.apply(classify_regime, axis=1)
        return regime_data['regime']
```

**ã‚¿ã‚¹ã‚¯3-2: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…**

```python
class BacktestEngine:
    # ...

    def regime_based_backtest(
        self,
        signals: List[Dict],
        regime_detector: Optional[MarketRegimeDetector] = None
    ) -> Dict:
        """
        ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆåˆ†æ

        Returns:
            {
                'overall': {...å…¨ä½“ã®KPI...},
                'uptrend': {...ä¸Šæ˜‡ç›¸å ´ã®KPI...},
                'downtrend': {...ä¸‹è½ç›¸å ´ã®KPI...},
                'range': {...ãƒ¬ãƒ³ã‚¸ç›¸å ´ã®KPI...},
                'high_volatility': {...é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã®KPI...}
            }
        """
        if regime_detector is None:
            regime_detector = MarketRegimeDetector()

        # ãƒ¬ã‚¸ãƒ¼ãƒ æ¤œå‡º
        regime_series = regime_detector.detect_regime(self.data)

        # å…¨ä½“ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
        overall_results = self.run_backtest(signals)

        # ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
        regime_results = {'overall': overall_results}

        for regime in ['uptrend', 'downtrend', 'range', 'high_volatility']:
            # ãƒ¬ã‚¸ãƒ¼ãƒ æœŸé–“ã®ã‚·ã‚°ãƒŠãƒ«ã ã‘ã‚’æŠ½å‡º
            regime_signals = []

            for signal in signals:
                signal_date = pd.to_datetime(signal['date'])

                if signal_date in regime_series.index:
                    if regime_series.loc[signal_date] == regime:
                        regime_signals.append(signal)

            # ãƒ¬ã‚¸ãƒ¼ãƒ æœŸé–“ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
            if len(regime_signals) > 0:
                regime_results[regime] = self.run_backtest(regime_signals)
            else:
                regime_results[regime] = None

        return regime_results
```

**ã‚¿ã‚¹ã‚¯3-3: æš´è½æ™‚ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆã®å®Ÿè£…**

```python
def stress_test(
    self,
    signals: List[Dict],
    crash_periods: List[Tuple[str, str]]
) -> Dict:
    """
    æš´è½æ™‚ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ

    Args:
        signals: ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚·ã‚°ãƒŠãƒ«
        crash_periods: æš´è½æœŸé–“ã®ãƒªã‚¹ãƒˆ
            [('2008-09-01', '2009-03-31'), ...]  # ãƒªãƒ¼ãƒãƒ³ã‚·ãƒ§ãƒƒã‚¯
            [('2020-02-01', '2020-04-30'), ...]  # ã‚³ãƒ­ãƒŠã‚·ãƒ§ãƒƒã‚¯

    Returns:
        {
            'crash_period_1': {...KPI...},
            'crash_period_2': {...KPI...},
            ...
        }
    """
    results = {}

    for i, (start_date, end_date) in enumerate(crash_periods, 1):
        # æœŸé–“å†…ã®ã‚·ã‚°ãƒŠãƒ«ã ã‘ã‚’æŠ½å‡º
        crash_signals = [
            s for s in signals
            if start_date <= s['date'] <= end_date
        ]

        if len(crash_signals) > 0:
            crash_result = self.run_backtest(crash_signals)
            results[f'crash_period_{i}'] = {
                'period': (start_date, end_date),
                **crash_result
            }

    return results
```

**ã‚¿ã‚¹ã‚¯3-4: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ**

```python
def generate_regime_report(regime_results: Dict) -> str:
    """
    ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

    Returns:
        Markdownå½¢å¼ã®ãƒ¬ãƒãƒ¼ãƒˆ
    """
    report = "# ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ\n\n"

    report += "## å…¨ä½“ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹\n\n"
    overall = regime_results['overall']
    report += f"- ç·ãƒˆãƒ¬ãƒ¼ãƒ‰æ•°: {overall['total_trades']}\n"
    report += f"- å‹ç‡: {overall['win_rate']:.2f}%\n"
    report += f"- ç·ãƒªã‚¿ãƒ¼ãƒ³: {overall['total_return']:.2f}%\n"
    report += f"- ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ª: {overall['sharpe_ratio']:.2f}\n\n"

    report += "## ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹\n\n"
    report += "| ãƒ¬ã‚¸ãƒ¼ãƒ  | ãƒˆãƒ¬ãƒ¼ãƒ‰æ•° | å‹ç‡ | ç·ãƒªã‚¿ãƒ¼ãƒ³ | ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ª |\n"
    report += "|---------|----------|------|-----------|-------------|\n"

    for regime in ['uptrend', 'downtrend', 'range', 'high_volatility']:
        if regime_results.get(regime):
            r = regime_results[regime]
            report += f"| {regime} | {r['total_trades']} | {r['win_rate']:.2f}% | {r['total_return']:.2f}% | {r['sharpe_ratio']:.2f} |\n"
        else:
            report += f"| {regime} | - | - | - | - |\n"

    return report
```

**ã‚¿ã‚¹ã‚¯3-5: å¯è¦–åŒ–æ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**

```python
import matplotlib.pyplot as plt

def visualize_regime_performance(regime_results: Dict, save_path: str):
    """
    ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å¯è¦–åŒ–

    Args:
        regime_results: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœ
        save_path: ä¿å­˜å…ˆãƒ‘ã‚¹
    """
    regimes = ['uptrend', 'downtrend', 'range', 'high_volatility']
    sharpe_ratios = []
    total_returns = []

    for regime in regimes:
        if regime_results.get(regime):
            sharpe_ratios.append(regime_results[regime]['sharpe_ratio'])
            total_returns.append(regime_results[regime]['total_return'])
        else:
            sharpe_ratios.append(0)
            total_returns.append(0)

    # ã‚°ãƒ©ãƒ•ä½œæˆ
    fig, axes = plt.subplots(1, 2, figsize=(14, 6))

    # ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ª
    axes[0].bar(regimes, sharpe_ratios, color=['green', 'red', 'blue', 'orange'])
    axes[0].axhline(y=0.3, color='black', linestyle='--', label='Min Threshold (0.3)')
    axes[0].set_title('Sharpe Ratio by Regime')
    axes[0].set_ylabel('Sharpe Ratio')
    axes[0].legend()

    # ç·ãƒªã‚¿ãƒ¼ãƒ³
    axes[1].bar(regimes, total_returns, color=['green', 'red', 'blue', 'orange'])
    axes[1].axhline(y=0, color='black', linestyle='--')
    axes[1].set_title('Total Return by Regime')
    axes[1].set_ylabel('Total Return (%)')

    plt.tight_layout()
    plt.savefig(save_path, dpi=300, bbox_inches='tight')
    plt.close()
```

**ã‚¿ã‚¹ã‚¯3-6: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ **

```python
def test_regime_detection():
    """ãƒ¬ã‚¸ãƒ¼ãƒ æ¤œå‡ºã®ãƒ†ã‚¹ãƒˆ"""

    # ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿
    uptrend_data = pd.DataFrame({
        'date': pd.date_range('2025-01-01', periods=100, freq='D'),
        'close': [40000 + i * 100 for i in range(100)]  # æ¯æ—¥100å††ä¸Šæ˜‡
    })

    detector = MarketRegimeDetector()
    regimes = detector.detect_regime(uptrend_data)

    # å¾ŒåŠã¯ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ã¨åˆ¤å®šã•ã‚Œã‚‹ã¯ãš
    assert regimes.iloc[-1] == 'uptrend'


def test_regime_based_backtest():
    """ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®ãƒ†ã‚¹ãƒˆ"""

    # æ··åˆãƒ‡ãƒ¼ã‚¿ï¼ˆä¸Šæ˜‡ â†’ ä¸‹è½ï¼‰
    mixed_data = create_mixed_trend_data()

    signals = generate_test_signals()

    engine = BacktestEngine(data=mixed_data)
    regime_results = engine.regime_based_backtest(signals)

    # å…¨ãƒ¬ã‚¸ãƒ¼ãƒ ã®çµæœãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
    assert 'overall' in regime_results
    assert 'uptrend' in regime_results
    assert 'downtrend' in regime_results
```

##### æˆåŠŸåŸºæº–

- [x] ãƒ¬ã‚¸ãƒ¼ãƒ æ¤œå‡ºãŒæ­£ã—ãå‹•ä½œ
- [x] ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ã®KPIè¨ˆç®—ãŒæ­£ç¢º
- [x] å…¨ãƒ¬ã‚¸ãƒ¼ãƒ ã§ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ª > 0.3
- [x] æš´è½æ™‚ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿæ–½
- [x] ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½ãŒå‹•ä½œ

---

### 2-2. ğŸŸ¡ MEDIUM Priorityï¼ˆæ¨å¥¨å®Ÿè£…ï¼‰

---

#### æ©Ÿèƒ½4: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–æ©Ÿèƒ½

**å„ªå…ˆåº¦**: ğŸŸ¡ MEDIUMï¼ˆPhase 3ã§æ¨å¥¨ï¼‰
**é›£æ˜“åº¦**: Hard
**æ¨å®šå·¥æ•°**: 8æ™‚é–“

##### å®Ÿè£…å†…å®¹

**ã‚¿ã‚¹ã‚¯4-1: ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒæ©Ÿèƒ½ã®å®Ÿè£…**

```python
from itertools import product

class ParameterOptimizer:
    """
    ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³

    Features:
        - ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒ
        - æ„Ÿåº¦åˆ†æ
        - ãƒ—ãƒ©ãƒˆãƒ¼ï¼ˆå®‰å®šé ˜åŸŸï¼‰æ¤œå‡º
    """

    def __init__(self, backtest_engine: BacktestEngine):
        self.backtest_engine = backtest_engine

    def grid_search(
        self,
        signal_generator_func,  # ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆé–¢æ•°
        param_grid: Dict[str, List],
        metric: str = 'sharpe_ratio'
    ) -> pd.DataFrame:
        """
        ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒ

        Args:
            signal_generator_func: ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆé–¢æ•°
                ä¾‹: lambda rsi_oversold, rsi_overbought: generate_signals(...)
            param_grid: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚°ãƒªãƒƒãƒ‰
                ä¾‹: {'rsi_oversold': [20, 25, 30], 'rsi_overbought': [70, 75, 80]}
            metric: è©•ä¾¡æŒ‡æ¨™ï¼ˆ'sharpe_ratio', 'total_return', 'win_rate'ï¼‰

        Returns:
            çµæœã®DataFrame
        """
        results = []

        # å…¨çµ„ã¿åˆã‚ã›ã‚’ç”Ÿæˆ
        param_names = list(param_grid.keys())
        param_values = list(param_grid.values())

        for params in product(*param_values):
            param_dict = dict(zip(param_names, params))

            # ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
            signals = signal_generator_func(**param_dict)

            # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
            backtest_result = self.backtest_engine.run_backtest(signals)

            # çµæœã‚’è¨˜éŒ²
            results.append({
                **param_dict,
                'metric_value': backtest_result[metric],
                'total_trades': backtest_result['total_trades'],
                'win_rate': backtest_result['win_rate'],
                'sharpe_ratio': backtest_result['sharpe_ratio']
            })

        return pd.DataFrame(results).sort_values(
            'metric_value',
            ascending=False
        )
```

**ã‚¿ã‚¹ã‚¯4-2: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ„Ÿåº¦åˆ†æ**

```python
def sensitivity_analysis(
    self,
    signal_generator_func,
    base_params: Dict[str, float],
    param_to_vary: str,
    variation_range: List[float],
    metric: str = 'sharpe_ratio'
) -> pd.DataFrame:
    """
    ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ„Ÿåº¦åˆ†æ

    Args:
        signal_generator_func: ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆé–¢æ•°
        base_params: ãƒ™ãƒ¼ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        param_to_vary: å¤‰åŒ–ã•ã›ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å
        variation_range: å¤‰åŒ–ã•ã›ã‚‹ç¯„å›²
        metric: è©•ä¾¡æŒ‡æ¨™

    Returns:
        æ„Ÿåº¦åˆ†æçµæœã®DataFrame
    """
    results = []

    for value in variation_range:
        # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰åŒ–ã•ã›ã‚‹
        test_params = base_params.copy()
        test_params[param_to_vary] = value

        # ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆã¨ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
        signals = signal_generator_func(**test_params)
        backtest_result = self.backtest_engine.run_backtest(signals)

        results.append({
            param_to_vary: value,
            'metric_value': backtest_result[metric]
        })

    return pd.DataFrame(results)
```

**ã‚¿ã‚¹ã‚¯4-3: ãƒ—ãƒ©ãƒˆãƒ¼ï¼ˆå®‰å®šé ˜åŸŸï¼‰æ¤œå‡º**

```python
def detect_plateau(
    self,
    sensitivity_results: pd.DataFrame,
    threshold: float = 0.05
) -> Dict:
    """
    ãƒ—ãƒ©ãƒˆãƒ¼ï¼ˆå®‰å®šé ˜åŸŸï¼‰ã®æ¤œå‡º

    ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å°‘ã—å¤‰ãˆã¦ã‚‚æ€§èƒ½ãŒå®‰å®šã—ã¦ã„ã‚‹é ˜åŸŸã‚’æ¤œå‡º

    Args:
        sensitivity_results: æ„Ÿåº¦åˆ†æçµæœ
        threshold: å¤‰å‹•é–¾å€¤ï¼ˆ5%ä»¥å†…ãªã‚‰å®‰å®šï¼‰

    Returns:
        ãƒ—ãƒ©ãƒˆãƒ¼æƒ…å ±
    """
    metric_values = sensitivity_results['metric_value'].values

    # æ¨™æº–åå·®ã‚’è¨ˆç®—
    std_dev = np.std(metric_values)
    mean_value = np.mean(metric_values)

    # å¤‰å‹•ä¿‚æ•°ï¼ˆCVï¼‰ã‚’è¨ˆç®—
    cv = std_dev / mean_value if mean_value != 0 else float('inf')

    # ãƒ—ãƒ©ãƒˆãƒ¼åˆ¤å®š
    is_plateau = cv < threshold

    return {
        'is_plateau': is_plateau,
        'coefficient_of_variation': cv,
        'mean_value': mean_value,
        'std_dev': std_dev,
        'recommendation': 'robust' if is_plateau else 'sensitive'
    }
```

##### æˆåŠŸåŸºæº–

- [x] ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒãŒå‹•ä½œ
- [x] æ„Ÿåº¦åˆ†æãŒæ­£ã—ãå®Ÿè¡Œ
- [x] ãƒ—ãƒ©ãƒˆãƒ¼æ¤œå‡ºãŒæ©Ÿèƒ½
- [x] æœ€é©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®é¸å®š

---

#### æ©Ÿèƒ½5: ã‚µãƒã‚¤ãƒãƒ¼ã‚·ãƒƒãƒ—ãƒã‚¤ã‚¢ã‚¹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

**å„ªå…ˆåº¦**: ğŸŸ¡ MEDIUMï¼ˆPhase 3ã§æ¨å¥¨ï¼‰
**é›£æ˜“åº¦**: Easy
**æ¨å®šå·¥æ•°**: 1æ™‚é–“

##### å®Ÿè£…å†…å®¹

**ã‚¿ã‚¹ã‚¯5-1: ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ãƒªã‚¹ã‚¯æ–‡æ›¸åŒ–**

`documents/backtest/data_source_risks.md` ã‚’ä½œæˆ:

```markdown
# ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ãƒã‚¤ã‚¢ã‚¹ã®ãƒªã‚¹ã‚¯

## ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

- **ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼**: Yahoo Finance (yfinance API)
- **å¯¾è±¡éŠ˜æŸ„**: æ—¥çµŒå¹³å‡å…ˆç‰©ï¼ˆæ—¥æœ¬225æ ªä¾¡æŒ‡æ•°ï¼‰
- **ãƒ‡ãƒ¼ã‚¿æœŸé–“**: 3ï½5å¹´åˆ†ã®æ—¥è¶³ãƒ‡ãƒ¼ã‚¿

## ã‚µãƒã‚¤ãƒãƒ¼ã‚·ãƒƒãƒ—ãƒã‚¤ã‚¢ã‚¹ã®ãƒªã‚¹ã‚¯è©•ä¾¡

### æ—¥çµŒå¹³å‡å…ˆç‰©ã®å ´åˆ

**ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: ğŸŸ¢ LOW

**ç†ç”±**:
1. **å˜ä¸€éŠ˜æŸ„ã®ãŸã‚å½±éŸ¿é™å®šçš„**
   - æ—¥çµŒå¹³å‡å…ˆç‰©ã¯å˜ä¸€ã®æŒ‡æ•°å…ˆç‰©
   - å€‹åˆ¥éŠ˜æŸ„ã®ä¸Šå ´å»ƒæ­¢ãƒªã‚¹ã‚¯ã¯å­˜åœ¨ã—ãªã„

2. **é™æœˆãƒ­ãƒ¼ãƒ«ã‚ªãƒ¼ãƒãƒ¼ã®ã¿è€ƒæ…®ãŒå¿…è¦**
   - å…ˆç‰©ã¯3ãƒ¶æœˆã”ã¨ã«é™æœˆãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹
   - Yahoo Financeã®ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•çš„ã«ãƒ­ãƒ¼ãƒ«ã‚ªãƒ¼ãƒãƒ¼æ¸ˆã¿

### å°†æ¥çš„ãªè¤‡æ•°éŠ˜æŸ„å¯¾å¿œæ™‚ã®æ³¨æ„äº‹é …

**ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: ğŸ”´ HIGH

å°†æ¥çš„ã«å€‹åˆ¥æ ªå¼ã‚„è¤‡æ•°éŠ˜æŸ„ã«å¯¾å¿œã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ãƒªã‚¹ã‚¯ã«æ³¨æ„:

1. **ä¸Šå ´å»ƒæ­¢éŠ˜æŸ„ã®æ¬ è½**
   - Yahoo Financeã¯ä¸Šå ´å»ƒæ­¢éŠ˜æŸ„ã®ãƒ‡ãƒ¼ã‚¿ãŒä¸å®Œå…¨
   - éå»ã«å­˜åœ¨ã—ãŸãŒç¾åœ¨ã¯ä¸Šå ´ã—ã¦ã„ãªã„éŠ˜æŸ„ã‚’å«ã¾ãªã„

2. **å¯¾ç­–**:
   - ä¸Šå ´å»ƒæ­¢éŠ˜æŸ„ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½¿ç”¨ï¼ˆä¾‹: Bloomberg, Refinitivï¼‰
   - ä¸Šå ´å»ƒæ­¢ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†ï¼ˆãƒã‚¸ã‚·ãƒ§ãƒ³å¼·åˆ¶æ±ºæ¸ˆï¼‰
```

##### æˆåŠŸåŸºæº–

- [x] ãƒªã‚¹ã‚¯æ–‡æ›¸ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [x] å°†æ¥çš„ãªæ‹¡å¼µæ™‚ã®è­¦å‘ŠãŒæ˜è¨˜ã•ã‚Œã¦ã„ã‚‹

---

### 2-3. ğŸŸ¢ LOW Priorityï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³å®Ÿè£…ï¼‰

---

#### æ©Ÿèƒ½6: ãƒãƒ¼ã‚±ãƒƒãƒˆã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã®è€ƒæ…®

**å„ªå…ˆåº¦**: ğŸŸ¢ LOWï¼ˆPhase 3ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
**é›£æ˜“åº¦**: Medium
**æ¨å®šå·¥æ•°**: 2æ™‚é–“

##### å®Ÿè£…å†…å®¹

æµå‹•æ€§ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ã‚’å®Ÿè£…ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆOFFï¼‰ã€‚

è©³ç´°ã¯ã€Œãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆä¿¡é ¼æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆã€ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³2-2ã‚’å‚ç…§ã€‚

---

#### æ©Ÿèƒ½7: å¯è¦–åŒ–æ©Ÿèƒ½ã®æ‹¡å……

**å„ªå…ˆåº¦**: ğŸŸ¢ LOWï¼ˆPhase 3ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
**é›£æ˜“åº¦**: Medium
**æ¨å®šå·¥æ•°**: 6æ™‚é–“

##### å®Ÿè£…å†…å®¹

1. ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚°ãƒ©ãƒ•
2. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ„Ÿåº¦åˆ†æã‚°ãƒ©ãƒ•
3. ã‚¨ã‚¯ã‚¤ãƒ†ã‚£ã‚«ãƒ¼ãƒ–ï¼ˆè³‡ç”£æ¨ç§»ã‚°ãƒ©ãƒ•ï¼‰

---

## 3. å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### 3-1. Phase 3å…¨ä½“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

**ç·å·¥æ•°**: 26æ™‚é–“ï¼ˆç´„3ï½4å–¶æ¥­æ—¥ï¼‰

| é€± | ã‚¿ã‚¹ã‚¯ | å·¥æ•° | ç´¯è¨ˆå·¥æ•° |
|----|--------|------|---------|
| Week 1 | æ©Ÿèƒ½1: ãƒ«ãƒƒã‚¯ã‚¢ãƒ˜ãƒƒãƒ‰ãƒã‚¤ã‚¢ã‚¹æ’é™¤ | 2h | 2h |
| Week 1 | æ©Ÿèƒ½2: ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸å®Ÿè£… | 3h | 5h |
| Week 2 | æ©Ÿèƒ½3: ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ¬ã‚¸ãƒ¼ãƒ åˆ†æ | 10h | 15h |
| Week 2 | æ©Ÿèƒ½4: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ– | 8h | 23h |
| Week 3 | æ©Ÿèƒ½5: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ– | 1h | 24h |
| Week 3 | çµ±åˆãƒ†ã‚¹ãƒˆ | 2h | 26h |

### 3-2. è©³ç´°ã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Week 1ï¼ˆDay 1-2ï¼‰

**Day 1ï¼ˆ2æ™‚é–“ï¼‰**:
- [x] æ©Ÿèƒ½1-1: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ã®ä¿®æ­£
- [x] æ©Ÿèƒ½1-2: ç¿Œå–¶æ¥­æ—¥å–å¾—ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
- [x] æ©Ÿèƒ½1-3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [x] æ©Ÿèƒ½1-4: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ 

**Day 2ï¼ˆ3æ™‚é–“ï¼‰**:
- [x] æ©Ÿèƒ½2-1: ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ 
- [x] æ©Ÿèƒ½2-2: ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸é©ç”¨ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
- [x] æ©Ÿèƒ½2-3: ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹å‡¦ç†ã¸ã®é©ç”¨
- [x] æ©Ÿèƒ½2-4: ãƒ†ã‚¤ã‚¯ãƒ—ãƒ­ãƒ•ã‚£ãƒƒãƒˆå‡¦ç†ã¸ã®é©ç”¨
- [x] æ©Ÿèƒ½2-5: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ 

#### Week 2ï¼ˆDay 3-5ï¼‰

**Day 3ï¼ˆ4æ™‚é–“ï¼‰**:
- [x] æ©Ÿèƒ½3-1: ãƒ¬ã‚¸ãƒ¼ãƒ æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè£…

**Day 4ï¼ˆ6æ™‚é–“ï¼‰**:
- [x] æ©Ÿèƒ½3-2: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½å®Ÿè£…
- [x] æ©Ÿèƒ½3-3: æš´è½æ™‚ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè£…
- [x] æ©Ÿèƒ½3-4: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- [x] æ©Ÿèƒ½3-6: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ 

**Day 5ï¼ˆ8æ™‚é–“ï¼‰**:
- [x] æ©Ÿèƒ½4-1: ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒå®Ÿè£…
- [x] æ©Ÿèƒ½4-2: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ„Ÿåº¦åˆ†æå®Ÿè£…
- [x] æ©Ÿèƒ½4-3: ãƒ—ãƒ©ãƒˆãƒ¼æ¤œå‡ºå®Ÿè£…
- [x] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ 

#### Week 3ï¼ˆDay 6-7ï¼‰

**Day 6ï¼ˆ1æ™‚é–“ï¼‰**:
- [x] æ©Ÿèƒ½5-1: ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãƒªã‚¹ã‚¯æ–‡æ›¸åŒ–

**Day 7ï¼ˆ2æ™‚é–“ï¼‰**:
- [x] çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿæ–½
- [x] Phase 3å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ

---

## 4. æˆåŠŸåŸºæº–

### 4-1. Phase 3å®Œäº†ã®å®šç¾©

ä»¥ä¸‹ã®å…¨ã¦ã®åŸºæº–ã‚’æº€ãŸã—ãŸå ´åˆã€Phase 3å®Œäº†ã¨ã™ã‚‹:

| åŸºæº– | æ¸¬å®šæ–¹æ³• | ç›®æ¨™å€¤ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|------|---------|--------|-----------|
| ãƒ«ãƒƒã‚¯ã‚¢ãƒ˜ãƒƒãƒ‰ãƒã‚¤ã‚¢ã‚¹æ’é™¤ | ç¿Œæ—¥å§‹å€¤ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã®å®Ÿè£… | 100% | æœªå®Ÿæ–½ |
| ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸å®Ÿè£… | å…¨ç´„å®šã‚¿ã‚¤ãƒ—ã§ã®é©ç”¨ | 100% | æœªå®Ÿæ–½ |
| ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†æå®Ÿè£… | 3ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ã®KPIè¨ˆç®— | 100% | æœªå®Ÿæ–½ |
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–å®Ÿè£… | ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒæ©Ÿèƒ½ | 100% | æœªå®Ÿæ–½ |
| çµ±åˆãƒ†ã‚¹ãƒˆåˆæ ¼ | å…¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åˆæ ¼ | 100% | æœªå®Ÿæ–½ |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° | å…¨æ©Ÿèƒ½ã®æ–‡æ›¸åŒ– | 100% | æœªå®Ÿæ–½ |

### 4-2. å“è³ªåŸºæº–

| å“è³ªæŒ‡æ¨™ | ç›®æ¨™å€¤ |
|---------|--------|
| ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ | â‰¥ 90% |
| ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆä¿¡é ¼æ€§ | â‰¥ 95% |
| å®Ÿé‹ç”¨ã¨ã®ä¹–é›¢ | â‰¤ 5% |
| WFåŠ¹ç‡ | â‰¥ 50% |
| å…¨ãƒ¬ã‚¸ãƒ¼ãƒ ã®ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ª | > 0.3 |

---

## 5. ãƒªã‚¹ã‚¯ç®¡ç†

### 5-1. ä¸»è¦ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | ç™ºç”Ÿç¢ºç‡ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|---------|--------|------|
| ãƒ¬ã‚¸ãƒ¼ãƒ æ¤œå‡ºã®ç²¾åº¦ä¸è¶³ | ğŸŸ¡ MEDIUM | ğŸ”´ HIGH | è¤‡æ•°ã®æ¤œå‡ºæ‰‹æ³•ã‚’å®Ÿè£…ã—ã¦ãƒ†ã‚¹ãƒˆ |
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ãŒéå­¦ç¿’ã‚’å¼•ãèµ·ã“ã™ | ğŸŸ¡ MEDIUM | ğŸ”´ HIGH | WFåˆ†æã§æ¤œè¨¼ |
| å®Ÿè£…å·¥æ•°ã®è¶…é | ğŸŸ¡ MEDIUM | ğŸŸ¡ MEDIUM | ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®å¾Œå›ã— |

### 5-2. ç·©å’Œç­–

1. **æ®µéšçš„å®Ÿè£…**: å¿…é ˆæ©Ÿèƒ½ã‹ã‚‰é †ã«å®Ÿè£…
2. **ç¶™ç¶šçš„ãƒ†ã‚¹ãƒˆ**: å„æ©Ÿèƒ½å®Ÿè£…å¾Œã«å³åº§ã«ãƒ†ã‚¹ãƒˆ
3. **æŸ”è»Ÿãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´**: ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¯å¾Œå›ã—å¯èƒ½

---

## 6. Phase 4ã¸ã®ç§»è¡ŒåŸºæº–

### 6-1. Phase 4ã®æ¦‚è¦

**Phase 4**: å®Ÿæˆ¦æ¤œè¨¼ã¨æœ¬ç•ªé‹ç”¨æº–å‚™

### 6-2. Phase 3ã‹ã‚‰Phase 4ã¸ã®ç§»è¡Œæ¡ä»¶

ä»¥ä¸‹ã®å…¨ã¦ã®æ¡ä»¶ã‚’æº€ãŸã—ãŸå ´åˆã€Phase 4ã¸ç§»è¡Œå¯èƒ½:

1. [x] Phase 3ã®å…¨å¿…é ˆæ©Ÿèƒ½ãŒå®Ÿè£…å®Œäº†
2. [x] çµ±åˆãƒ†ã‚¹ãƒˆãŒ100%åˆæ ¼
3. [x] ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆä¿¡é ¼æ€§ãŒ95%ä»¥ä¸Š
4. [x] å…¨ãƒ¬ã‚¸ãƒ¼ãƒ ã§ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ª > 0.3
5. [x] WFåŠ¹ç‡ â‰¥ 50%
6. [x] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå®Œå…¨ã«æ›´æ–°ã•ã‚Œã¦ã„ã‚‹

---

## 7. å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. **ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆä¿¡é ¼æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆ**: `/data/results/backtest_reliability_analysis.md`
2. **Phase 2å®Œäº†ã‚µãƒãƒªãƒ¼**: `/documents/2_planning/phase2_completion_summary.md`
3. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ†²ç« **: `/documents/1_initiating/project_charter.md`

---

**ä»¥ä¸Šã€Phase 3å®Ÿè£…è¨ˆç”»ã§ã™ã€‚**
