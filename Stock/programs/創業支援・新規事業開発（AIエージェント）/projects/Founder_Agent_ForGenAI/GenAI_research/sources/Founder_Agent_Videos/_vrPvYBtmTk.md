---
title: "はい、どうもこんにちは。ひろです。本日 はデファの親子チャンクについて説明 しようかなと思っています。以前にラグの 制度向上について説明した動画をあげたん ですが、その後にですね、デフの"
video_id: "_vrPvYBtmTk"
video_url: "https://www.youtube.com/watch?v=_vrPvYBtmTk"
speaker: "Unknown"
channel: "Unknown"
date: ""
duration: ""
tags:
  - "AI"
  - "LLM"
topics:
  - "LLM Development"
summary: |
  
key_points:
  - "See transcript for details"
category: "AI & Technology"
confidence_level: "high"
---

# Transcript: _vrPvYBtmTk

- URL: https://www.youtube.com/watch?v=_vrPvYBtmTk
- Retrieved at: 2025-12-30T11:31:42+09:00

## Text

- [00:00] はい、どうもこんにちは。ひろです。本日
- [00:01] はデファの親子チャンクについて説明
- [00:04] しようかなと思っています。以前にラグの
- [00:06] 制度向上について説明した動画をあげたん
- [00:09] ですが、その後にですね、デフの
- [00:11] アップデートで親子チャンクという機能が
- [00:13] 追加されました。ただこの親子チャンクに
- [00:16] ついて仕組みがよくわからんていう声が
- [00:17] 多かったので、そ、今回は親子チャンクの
- [00:20] 使い方について説明しようかなと思います
- [00:22] 。実際にですね、この親子チャンクを使う
- [00:24] ことによってチャットボットの回答制度を
- [00:26] 大きく上げることができるので、是非学ん
- [00:28] でみてください。また動画の後半ではいつ
- [00:31] も通り半ゾーンで挑戦してみようかなと
- [00:33] 思います。今回学んだ親子チャンクを利用
- [00:35] して売上分析のAIエージェントの開発
- [00:38] ってところまでやっていこうかなと思い
- [00:39] ます。また今回紹介したAIエージェント
- [00:42] の方をプレゼントしようかなと思います。
- [00:44] LINE公式サイトの方で親子チャンクと
- [00:46] 入れて入力をしていただくとプレゼントの
- [00:48] 方を送付させていただきます。で、親子
- [00:50] チャンクってどこにあるのかって言うと
- [00:52] このチャンクの設定のところにですね、実
- [00:55] は親子モードってのがあるんですね。これ
- [00:56] ですね。この親子モードを選択すると
- [00:59] チャンクを親子モードで設定することが
- [01:01] できます。ただこの使い方がちょっと
- [01:03] 難しいのでその辺を説明しようかなと思い
- [01:05] ます。ちょっと前提のお話をさせて
- [01:07] いただきたいんですけど、ま、この辺の
- [01:09] チャンクの設定とかインデックスの方法の
- [01:11] 設定とかですね、この辺の情報がそもそも
- [01:14] 分からないていう方はですね、以前に基礎
- [01:16] 編っていうことでラグについての簡単な
- [01:18] 説明をしたものがあるんですね。もしまだ
- [01:20] そちらを見てないという方はそちらをまず
- [01:22] 見てもらった上で今回の動画を見てもらう
- [01:24] と理解がより深まるんじゃないかなと思い
- [01:27] ます。で、ラグの基礎編の動画に関しては
- [01:29] 概要欄の方に載せておきます。では1番
- [01:32] 最初にラグとは何かのおさいのところ
- [01:34] ちょっとお話ししようかなと思います。
- [01:35] ラグとは外部の知識ベースから関連情報を
- [01:38] 検索し、その情報を元に回答を生成する
- [01:42] 仕組みをラグと言ったりします。まず
- [01:44] ユーザーがアプリケーションの方に質問を
- [01:46] 入力するとまず1番最初に外部の情報な
- [01:48] ナレッジですね。あれちの情報を取りに
- [01:50] 行きます。そしてその撮った情報を元に
- [01:52] ですね、LLMに質問と検索結果を入力し
- [01:55] てテキストを作成してもらう。この仕組み
- [01:57] の中でいうこの部分ですね、外部情報の
- [02:00] 仕組みをラグと言ってたりします。もう
- [02:01] 少し分かりやすい例を言うと、例えばです
- [02:03] ね、自社で化粧水のプロダクトを販売し
- [02:06] てると想定します。で、そのプロダクト、
- [02:08] 化粧水ですね、化粧水の概要情報だとか
- [02:11] 化粧水の成分といった情報をこの外部の
- [02:13] 情報として持たしておきます。で、例えば
- [02:15] ユーザーがこの化粧水の成分は何ですかっ
- [02:18] て質問した場合、まず1番最初
- [02:20] アプリケーションからその化粧水の情報が
- [02:22] 入ってる外部情報のところに化粧水の情報
- [02:25] を取りに行きます。で、化粧水の情報を
- [02:27] 取れたらその情報を元にですね、再度AI
- [02:29] に回答を生成してもらう。このような
- [02:31] 仕組みをラグと言ったりします。で、今回
- [02:33] 説明するこの親子チャンクなんですが、
- [02:35] 親子チャンクってそもそも何だって話はも
- [02:37] で、そこの辺の概要の説明をしようかなと
- [02:39] 思います。ちなみになんですけど、この
- [02:40] チャンクというのはですね、ま、分かり
- [02:42] やすく言うと1つの情報を1つにまとめて
- [02:45] 渡してしまうと情報がパンクしてしまうの
- [02:47] で、ある程度の塊としてこの部分ですね、
- [02:50] この部分の情報を登録する1つの塊を
- [02:53] チャンクっていうようなイメージになって
- [02:54] おります。で、親チャンクは何かと言うと
- [02:56] 、ある程度まとまれのある大きな文章の塊
- [02:59] をまず親チャンクとして登録します。
- [03:01] 例えばマニュアルで言うと第3章
- [03:03] インストール方法の全体ですね。ここの
- [03:05] 全体の部分を親子チャンクとして登録して
- [03:07] あげます。で、親子ジャンクの特徴として
- [03:09] は、文脈を保持した大きな単位だとか、
- [03:11] 背景情報を含むだとか、概要的な内容を
- [03:13] モ羅的に登録するといった特徴があります
- [03:15] 。で、この親子チャンクをさらに細かく
- [03:17] 分けたものをコチャンクと言ったりします
- [03:19] 。例えば親チャンクの方で第3章
- [03:21] インストールの方法と登録したらコ
- [03:22] チャンクの方では第3章の1
- [03:25] インストーラーのダウンロード方法を1つ
- [03:27] のコちゃんとして登録して2つ目、第3の
- [03:30] 2セットアップ手順をコチャンクとして
- [03:32] 登録する。このように親チャンクをさらに
- [03:35] 細かくしてコチャンクとして登録していき
- [03:37] ます。このように親子チャンクとは
- [03:38] チャンクをですね、大きな塊りの親
- [03:41] チャンクとして分けて、その親チャンクを
- [03:43] また細かく分けるコチャンクと分ける。
- [03:44] このような仕組みを親子チャンクと言い
- [03:46] ます。親チャンクとコチャンクのイメージ
- [03:48] としてはこんな感じですね。親チャンクの
- [03:50] 中を1つのチャンクとしてそれを細かくコ
- [03:52] チャンクの方に分けていくようなイメージ
- [03:54] 。このようなこの画像のイメージが非常に
- [03:56] 近いんじゃないかなと思います。で、次に
- [03:58] ですね、この親子チャンクの仕組みがなぜ
- [04:00] 必要なのかっていうところを説明しようか
- [04:02] なと思います。従来のラグはテキスト同じ
- [04:05] 流度でチャンク化して検索していました。
- [04:07] ただこの方法には次のような問題があり
- [04:09] ます。例えばですね、京都は日本の伝統
- [04:12] 文化が色濃く残る都市であり、代表的な
- [04:15] 観光観光地には金覚寺を清めづらがある。
- [04:18] 京都の気温は式がはっきりしておりみたい
- [04:20] な感じの一分があったと想定します。これ
- [04:23] をですね、例えば金格とか清めといった
- [04:26] 小さなチャンクとして切り出してしまうと
- [04:28] 、その背後の情報っていうところが
- [04:30] 抜け漏れてしまうので、それが京都にある
- [04:33] ことやなぜ有名なのかといった背景が
- [04:35] 伝わらず不自然な回答につがってしまうと
- [04:38] いうデメリットがあります。じゃあ細かく
- [04:40] すると背景とか情報とか説明の分が抜けて
- [04:43] しまうんであればもうこれをですね、一分
- [04:45] として1つのチャンクとして登録してして
- [04:48] しまえばいいんじゃないのかみたいな話に
- [04:49] なると思うんですけど、そうするとですね
- [04:51] 、逆に検索制度が下がるというデメリット
- [04:54] もあります。例えば京都の代表的な観光地
- [04:56] はという質問に対し見学じゃらと答える
- [05:00] ことはできるんですが、ここの文章を1つ
- [05:02] のチャンクとしますと余計な情報も入って
- [05:04] しまうので気候や文化の情報まで一緒に
- [05:07] 混ざってしまって回答が女調になって焦点
- [05:10] がずれたりする恐れがあります。これが
- [05:12] 問題点でありました。チャンクが大き
- [05:14] すぎると関係ない情報も含まれノイズが
- [05:16] 大きくなってしまう。一方、チャンクを
- [05:18] 小さくしてしまうと文脈が失われ、断片的
- [05:21] な情報のみで背景情報だとか理由が不明確
- [05:24] になってしまう。こういった問題を解決
- [05:26] するために親子チャンクってものが登場し
- [05:28] ました。親子チャンクを使えば制度と文脈
- [05:30] の両方を確保しながら最適なバランスを
- [05:33] 実現することができます。で、どうやって
- [05:35] 解決するのかっていうところだと思うん
- [05:37] ですけど、親子チャンクではまずコ
- [05:39] チャンクを検索することで制度を担保し
- [05:41] ます。その後にですね、親チャンクを
- [05:43] 呼び出して前後の文脈も補強するといった
- [05:45] 手順で答えるので、コチャンクの方で検索
- [05:49] の生活を性格さを担保し、親チャンクの方
- [05:52] で文脈の豊かさを担保する。こういった
- [05:54] 両方を可能にすることができます。で、
- [05:56] この親チャンクってどういう仕組みなのか
- [05:58] なっていうところ少し説明しようかなと
- [06:00] 思います。ちょっと技術的な話なので
- [06:02] 踏み込みすぎかなとは思うんですが、
- [06:04] ちょっとこの辺の仕組みもですね、面白い
- [06:05] ので説明しようかなと思います。親子
- [06:07] チャンクの仕組みとしてまず1番最初に
- [06:09] ドキュメントですね。ここの外部情報ナチ
- [06:12] として登録された情報をドキュメントとし
- [06:15] て分割します。アップロードされた
- [06:16] ドキュメントを意味のあるセクションごと
- [06:18] に分割し親ちゃん工作する。これが1番
- [06:21] 最初にすることです。例えば賞とか説とか
- [06:24] トピックなどの論理的な区切りを基準に
- [06:27] 分割します。で、ドキュメントを分割した
- [06:29] 後に親チャンクをさらに分割します。各親
- [06:32] チャンクを検索に最適化された小さなコ
- [06:35] チャンクに細分化します。で、親チャンク
- [06:38] の後にコチャンクを細分化するした後に
- [06:40] ですね、どうやって検索するのかというと
- [06:42] 、ユーザーの質問の流れに対してまずコ
- [06:44] チャンクで精密検索を行って関連する親
- [06:48] チャンクの文脈情報もその後に含めて回答
- [06:50] 制成する。このような親チャンクの仕組み
- [06:52] になっております。ちょっとこの説明だけ
- [06:54] だとですね、少しイメージがつきづらいか
- [06:55] なと思うので、親チャンクの検索される
- [06:58] 流れについても説明しようかなと思います
- [06:59] 。まずドキュメントをですね、親チャンク
- [07:02] 例えばこれだと3つですね。123みたい
- [07:04] な親チャンクの3つに分けてそれをサイド
- [07:06] にコチャンクとして分けるようなイメージ
- [07:08] ですね。例えば1つ目の親チャンクをです
- [07:10] ね、3つのコチャンクに分ける。で、2つ
- [07:11] 目の親チャンクを4つのコチャンクに
- [07:14] 分ける。このような感じでドキュメントを
- [07:15] 分割していきます。で、彼にですね、
- [07:18] ユーザーが質問をするとどのように検索さ
- [07:21] れるのかと言うと、まずユーザーが質問を
- [07:23] 入力します。クエルとして発行されると、
- [07:26] まずその質問に対して1番近い情報をコ
- [07:29] チャンクの中から探し出して見つけていき
- [07:31] ます。この質問と意味合いの近い情報を
- [07:34] 持っているコチャンクはどれかなっていう
- [07:36] ところをまず検索します。で、ヒットした
- [07:38] コチャンクの情報。例えばこれですね。
- [07:39] この情報をヒットすればその情報のコ
- [07:42] ちゃんの情報を見た後に親ちゃんの方の
- [07:44] 情報を見てそのコちゃんと親ちゃんの情報
- [07:47] を元にですね、LLMが回答を生成して
- [07:50] ユーザーに対してアンサーですね、質問の
- [07:51] 回答するようなイメージになっております
- [07:53] 。もう少し具体的に説明しましょうか。
- [07:55] 例えばユーザーがこの化粧品の成分は何で
- [07:58] すかっていう風に質問したとします。そう
- [08:00] するとこの化粧水の成分と1番見合いが
- [08:03] 近いコチャンクの情報を持っている
- [08:05] チャンクを探しに行きます。で、例えばコ
- [08:08] チャンクの中に成分表を持っている情報が
- [08:10] あればそれが1番意味合い的に近いので
- [08:12] その情報のコチャンクにヒットします。で
- [08:13] 、次に化粧性の成分をまとめているコ
- [08:15] チャンクの親チャンク。例えば、ま、成分
- [08:18] 表だけじゃなく化粧水がどのように作られ
- [08:20] たかみたいな情報を持っている。もう少し
- [08:22] 概念的な大きな情報を持っている親
- [08:24] チャンクの情報も取得します。化粧水の
- [08:26] 成分の情報を持つチャンクともう少し抽象
- [08:29] 的な大きな概念ですね。その化粧水の成分
- [08:32] だけではなくてその成分表全ての情報を
- [08:34] 持った親チャンクこの2つの情報を元に
- [08:37] LLMの方に回答の生成の依頼をお願いし
- [08:40] 、LLMがユーザーにとって最適な回答を
- [08:42] するようなイメージになっております。
- [08:44] これが親子チャンクを使った検索の仕組み
- [08:46] の処理ロジックになっております。ま、
- [08:48] 少し難しいんですがこんなもんだなと思っ
- [08:50] といてください。で、この親子チャンクは
- [08:51] ですね、どういうところでよく使えるの
- [08:53] かっていう活用のところも説明しようかな
- [08:55] と思います。例えばFAQですね。
- [08:58] ユーザーから返品は何日以内にできますか
- [09:00] と質問があった場合、コチャンクでは商品
- [09:02] 到ちゃうから7日以内ですといった具体的
- [09:04] な回答部分を設ヒットすることができます
- [09:06] 。その上で親チャンクを参照することで
- [09:09] 返品には未用であることが条件だとか仮
- [09:12] 変装の送料はお客様負担といった前後の
- [09:15] 条件も合わせて回答することができます。
- [09:17] 親子ちゃコ活用すればこういったFAQ
- [09:19] 検索をすることができます。他には
- [09:21] マニュアル検索ですね。製品マニュアルの
- [09:23] ような長文のドキュメントは親チャンクと
- [09:25] して登録しといて、コチャンクでは
- [09:26] インストラのダウンロード方法といった
- [09:28] ピンポイントで検索するといったことも
- [09:30] 可能になります。こういったことを親
- [09:32] チャンクを使えば実現することができます
- [09:34] 。ではここまででの親子チャンクの概念に
- [09:37] ついて説明したのでここからですね実際に
- [09:41] を使って親子チャンクの方を設定してみて
- [09:43] その親子チャンクの挙動ってところを確認
- [09:45] していこうかなと思います。で、流れとし
- [09:47] ては今回7ステップで進めていこうかなと
- [09:49] 思います。まずのナレッジベースで親子
- [09:52] チャンクを作ってみましょう。具体的には
- [09:54] のナレッジの登録のところから
- [09:56] アップロードします。そしてその中の
- [09:58] チャンクの設定のところで今回説明した
- [10:00] 親子を選択してみます。で、実際にですね
- [10:03] 、親子チャンクは親子チャンクの設定とコ
- [10:05] チャンクの設定2つの設定が必要なので、
- [10:07] 最初に親子チャンクの設定をして、次にコ
- [10:09] チャンクの設定をします。で、実際に
- [10:11] どんな感じでチャンカ分けられたのかなっ
- [10:13] てところをプレビューで確認しましょう。
- [10:15] で、今回はそれでも終わりでもいいんです
- [10:17] けど、実際にですね、親子チャンクの挙動
- [10:19] ってところを確認してみたいので、今回は
- [10:21] AIエージェントを使ってですね、実際に
- [10:23] 親子チャンクの方を利用してみて挙動の
- [10:25] ところを確認する。この7ステップで進め
- [10:27] ていこうかなと思います。では1番最初
- [10:29] ですね、このナレッチベースで親子
- [10:30] チャンクを作成するっていうところから
- [10:32] 進めていこうかなと思います。で、いつも
- [10:34] 通りですね、デファイのトップページに
- [10:35] 行ってもらってナレッジを選択します。で
- [10:38] 、ナレッチを選択するとここにナレッジ
- [10:39] ベースを作成というのがあるので、これを
- [10:41] 選択します。そうするとですね、データ
- [10:44] ソースをアップロードするところがあるの
- [10:45] で、こっからですね、ナレッジとして登録
- [10:47] したい情報を追加していくようなイメージ
- [10:49] になっております。で、今回はですね、
- [10:51] サンプルで売上データのexelという
- [10:54] ところを用意しました。文字が小さいなの
- [10:56] で大きくするとですね、こんな感じで営業
- [10:58] の担当者一覧というのを作りまして、その
- [11:00] 営業がですね、売上月と商品と売上金額と
- [11:04] 個数、これをですね、バーっといっぱい
- [11:06] デモを作っていました。大体ですね、
- [11:08] 300ぐらいですかね、300ぐらいの
- [11:10] デモのデータを作ったので、これをですね
- [11:12] 、今回リファイのナレッチとして登録
- [11:14] しようかなと思います。イとしては高井
- [11:16] さんとか田中さんとか佐藤さんとかですね
- [11:17] 、営業の担当者とその人がですね、何の
- [11:20] 商品をいくら何個を売り上げたのかって
- [11:22] いうのをまとめた情報ですね。これを
- [11:24] Excelを用意したので、これをですね
- [11:25] 、ナレッチとして登録します。ですので、
- [11:27] このテキストファイルをアップロードに
- [11:28] ですね、このExcelをアップロードし
- [11:30] ていきます。で、今回はドラッグ&
- [11:32] ドロップでやってみましょうか。ドラッグ
- [11:34] ドロップでここに入れるとですね、
- [11:35] テキストファイルをアップロードできるの
- [11:36] で、これで次へを選択します。これが
- [11:38] できればナレッジベースで作成するという
- [11:40] ところとデータソースをアップロードした
- [11:42] ので1と2のステップが終わった終わった
- [11:44] と思います。で、次にですね、チャンク
- [11:46] 設定のところを実際にやっていこうかなと
- [11:48] 思います。で、チャンク設定でお役を選択
- [11:49] ですね。これはどうするかと言うと、この
- [11:51] チャンク設定のところですね、チャンクの
- [11:53] 設定の下に親子っていうのがあるんですね
- [11:55] 。これを選択します。そうすると親子の
- [11:57] チャンクモードっていうものを選択でき
- [11:59] ます。で、この親子モードには段落モード
- [12:02] と全部モード、この2つがあります。これ
- [12:04] を使用用途に合わせて選んでくことも重要
- [12:06] になります。で、この2つ、一体何が違う
- [12:09] んだっていうところですね。親チャンクの
- [12:10] 設定として段落モードと全部モード。何が
- [12:12] 違うのかというと、段落モードは開業など
- [12:14] の区切りで分割するモード、親段落モード
- [12:17] と言います。特徴としては1つの親
- [12:18] チャンクが全分モードよりは比較的小さめ
- [12:21] になるという特徴があります。一方、全文
- [12:23] モードですね。これはどういうものかと
- [12:24] いうと、文章全体を親チャンクとして扱う
- [12:27] ものを全分モードと言います。これは段落
- [12:29] モードよりも1つの親ちゃんは比較的
- [12:32] 大きめになる特徴があります。そうですね
- [12:34] 、全部モードはちゃんを分けるんじゃなく
- [12:35] て、もうそれぞ、それ丸ごとですね、1つ
- [12:37] の親として登録するので、残落モードより
- [12:39] 1つの親ちゃんは比較的大きになるという
- [12:41] 特徴があります。で、ま、色々説明あるん
- [12:43] ですけど、それぞれ向いてるケースがある
- [12:45] ので、ちょっと説明しようかなと思います
- [12:46] 。で、段落モードの向いてるケースとして
- [12:48] はFAQやとかヘルプページですね、あと
- [12:51] は利用規契約とか契約書といった段落ごと
- [12:54] に意味が変わっているもののっていうのが
- [12:56] 非常に向いてるんじゃないかなと思います
- [12:57] 。一方全部モードはですね、製品
- [12:59] マニュアルとか操作ガイドとか書籍や
- [13:01] レポートの小立て構造だとかマニュアル
- [13:04] 全部をですね、理解した方がいいような
- [13:06] ケースにはこの全部モードってのが向いて
- [13:08] います。で、段落モードのメリットとして
- [13:10] は検索制度が高いですね。比較的細かく
- [13:12] ちゃんを分けるのでその分制度が高いと
- [13:15] いうメリットがあります。ピンポイントな
- [13:16] 回答が出やすいという特徴もあります。
- [13:18] 一方全部モードは全部をですね、1つの親
- [13:20] として登録するので文脈を広く保持できる
- [13:23] という特徴があります。やまとまりまごと
- [13:25] の背景っていうところを生かしたい場合は
- [13:27] この全部モードが向いてるのかなと思い
- [13:28] ます。それぞれメリットとかデメリットっ
- [13:30] ていうのがですね、あるので今回のケース
- [13:32] はどちらに当てはまるのかっていうのを
- [13:34] 考えながらやると非常にいいんじゃないか
- [13:36] なと思います。で、今回段落全分どっちに
- [13:39] していきましょうか。今回はですね、この
- [13:41] 1から300行まで全てをですね、1つの
- [13:44] 親として登録したいので、今回のケースで
- [13:46] 言うと全分モードが向いてるかなと思うの
- [13:48] で、今回全分モードを選択しようかなと
- [13:50] 思います。で、これができれば親チャンク
- [13:51] の設定のところが一旦可能になるので、次
- [13:53] はコチャンクの設定のところやっていき
- [13:54] ましょうか。で、コチャンクの設定という
- [13:56] のは何かと言うと、この部分ですね、
- [13:58] 先ほど親チャンクを設定したの、次、この
- [14:00] コチャンクですね、このコチャンクを
- [14:01] 分けるというところの設定をしていこうか
- [14:03] なと思います。で、コチャンクの設定は
- [14:05] ですね、このコンテキストを親チャンクの
- [14:07] 下にある検索用コチャンクってところで
- [14:09] 設定することができます。で、チャンク石
- [14:11] 識別士ってところは何かと言うと、どの
- [14:14] タイミングでチャンク識別として区切るの
- [14:16] かっていうところをこのチャンク式別と
- [14:18] いったりします。で、デフォルトでですね
- [14:19] 、このスラッシュNって書いてるんです
- [14:21] けど、これはどういったことかと言うと、
- [14:23] 開業のタイミングでそれを1つのコチンク
- [14:25] として登録してくださいという意味になり
- [14:26] ます。なのでイメージとしてはですね、
- [14:29] ここで毎回1人ずつ開業しますよね。なの
- [14:32] でこのデフォルトのスラNのままで大丈夫
- [14:34] だと思います。これをするとですね、この
- [14:36] 開業ごとにコチャンクとして分けてくるの
- [14:38] で、親チャンクとしてこれ全体をですね、
- [14:40] 登録したんですが、コチャンクとしては
- [14:42] この各を1つずつのコチャンクとして登録
- [14:44] してくれるんじゃないかなと思います。
- [14:45] これがですね、実際にその通りにちゃん
- [14:47] 分かって分けられてるのかどうかっていう
- [14:49] ところを確認する方法はこのチャンクを
- [14:51] プレビュってところをするんですね。そう
- [14:52] するとこの右側にですね、実際のチャンク
- [14:54] のプレビューを見ることができます。
- [14:56] イメージとしてはここですね、コチャンク
- [14:58] の設定ができたので実際にプレビューで
- [14:59] 確認ってところですね。で、プレビュー見
- [15:01] てみましょうか。プレビュー見てみると
- [15:03] このC1、C2、C3って1つずつ分かれ
- [15:06] てますよね。こんな感じでこれが1つずつ
- [15:08] がコチャンクとして登録されてるという
- [15:09] 意味になっております。で、親子チャンク
- [15:11] としては1つだけですね。これ全てが親子
- [15:14] チャンク1つとして登録されてることも
- [15:15] 分かります。コチャンクがそれぞれ分れて
- [15:18] いて、親チャンクはこの全ての情報が1つ
- [15:20] の親として登録されてる。これを
- [15:21] プレビューで確認することができました。
- [15:23] で、他にもですね、インデックス方法とか
- [15:24] 色々設定はあるんですが、今回のメインの
- [15:27] トピックはですね、親子チャンクの設定
- [15:28] 方法なので、他のところはデフォルトの
- [15:30] ままでいいかなと思います。で、これから
- [15:32] できればですね、保存して処理を押すと
- [15:34] ですね、売上データのナレッチが登録
- [15:35] できるかなと思います。保存して処理を
- [15:37] クリックします。そうするとですね、
- [15:39] ナレッチベースが作成されましたと出まし
- [15:41] た。ここ1から6までを実際に終わらせる
- [15:44] ことができました。で、ここで終わっても
- [15:46] いいんですけど、実際に親子チャンクの
- [15:47] 挙動ってところを見ないと親子チャンクの
- [15:49] メリットっていうところが実際目に見て
- [15:51] 分からないと思うので、今回はAI
- [15:53] エージェントで実際に親子チャンクを利用
- [15:54] してみるってところも最後やってみようか
- [15:56] なと思います。ファイまずトップページに
- [15:57] もらって最初から作成でエージェント
- [16:00] モードを選択します。で、今回はですね、
- [16:02] この売上データをですね、ラグとナレーと
- [16:05] して登録したので、この情報を元にですね
- [16:07] 、例えば山田さんが2020年の7月に
- [16:09] どのぐらいの商品を売りましたかだとか、
- [16:11] この営業の中で1番売上の実績が高い人は
- [16:13] 誰ですかだとか、2024年の売上
- [16:16] ランキングを集計してみたいな情報をです
- [16:18] ね、AIに渡してAIがですね、その情報
- [16:20] をしっかりと理解した上でですね、親子
- [16:23] チャンクの情報を持ってきて実際に色々と
- [16:25] 処理ができるのかってところをちょっと
- [16:27] 確認しようかなと思います。説明するより
- [16:28] 見てもらって早いと思うので、実際作って
- [16:30] いきましょう。例えばアプリのアイコンは
- [16:32] AI、売上、分析、エージェントとかにし
- [16:34] ましょうか。ここはまあ、適当で大丈夫
- [16:35] ですね。で、作成スローを選択します。で
- [16:38] 、今回重要なのはですね、実際になれちの
- [16:41] 情報を取ってこないといけないので、まず
- [16:43] コンテキストの追加をしていきましょうか
- [16:44] 。で、コンテストの追加のボタンを押して
- [16:46] あげて、先ほど登録した売上データですね
- [16:48] 、売上データのナレッジを追加します。
- [16:51] そうすることによって、先ほど親子
- [16:53] チャンクとして登録したナチの情報をこの
- [16:55] AIエージェントから取得することができ
- [16:57] ました。で、プロンプト指示文ですね。
- [16:59] AIに指示をする文章ですね。プロンプト
- [17:01] 入れていきましょう。ま、適当に大丈夫
- [17:02] です。コンテクストの売上データを元に
- [17:04] 売上傾向を分析してください。こんな感じ
- [17:06] の適当なプロンプトで大丈夫です。この
- [17:08] ように記載することでAIはですね、
- [17:10] コンテクスト情報を参照しながら回答する
- [17:12] ことができるんじゃないかなと思います。
- [17:13] では実際にですね、デバクトプレビューで
- [17:16] 何か質問しましょうか。例えば山田太郎、
- [17:19] 山田太郎の売上分析してとか入れて
- [17:22] ましょうか。そうするとAIがですね、
- [17:26] このナチで登録した情報元にですね、色々
- [17:28] 分析してくれるんじゃないかなと思います
- [17:30] 。ただエラーが出ましたね。バットリ
- [17:32] クエスト。あ、これはですね、
- [17:33] コンテキスト情報が大きすぎ
- [17:35] るっていうことで、このGPT4だとこの
- [17:38] コンテキスト情報、つまりAIに渡す情報
- [17:40] が大きすぎる。今回全てこれをですね、
- [17:42] エアに渡したんですが、その情報が大き
- [17:44] すぎますよというエラーなので、もう少し
- [17:46] ですね、コンテクスト、つまり大量の情報
- [17:48] を読み取ってもエラーにならないような
- [17:50] AIのモデルを選択する図が必要があるの
- [17:52] で、それを選択しようかなと思います。何
- [17:54] でもいいんですが、GPT4とかであれば
- [17:56] 比較的大きめの情報も扱うことができるの
- [17:58] で、GPT4を選択しようかなと思います
- [18:01] 。で、サイドですね、この状態でもう1回
- [18:03] 質問しましょうか。山田太郎の売上分析し
- [18:06] てと言いました。そうすると使用中ベース
- [18:08] 出ましたね。そうすると山田太郎の売上
- [18:10] データ分析をしましたということで売上
- [18:12] 金額の分別だとか何月に何個の商品を打っ
- [18:15] たか個数っていうところをですね、エアが
- [18:17] 分析して色々と回答してくれました。これ
- [18:19] はどういったことを裏れしてるかと言うと
- [18:21] この情報ですね。まずコチャンクで山田
- [18:23] 太郎の情報を取ってきてで次にですね
- [18:26] チャンクとしてこの全ての情報をなれちと
- [18:28] して登録してるのでこの情報全体を把握し
- [18:30] た上でAIが回答してくれるような状態に
- [18:32] なっております。コチャンクの方で詳細の
- [18:35] 情報を取得して親子チャンクの方で概要
- [18:37] ですね。全体の売上のところも取得して
- [18:40] いるので、このようなこと細かいような
- [18:42] 回答してくれるようなことを実現すること
- [18:44] ができます。せっかくなんでもうちょっと
- [18:45] 違う質問もしてみましょうか。出てますね
- [18:47] 。各月の売上まで細かく出してくれてます
- [18:50] ね。ちょっと売上傾向も出てるんで
- [18:51] ちょっとだけ読んでみましょうか。売上
- [18:53] 傾向としては山田太郎の売上はB商品とC
- [18:56] で特に多くの売上がありましたと。特にB
- [18:59] 商品は2月に複数回高い売上金額を記録し
- [19:01] ていますみたいなことも回答してくれまし
- [19:04] たね。B商品とA商品も数回にわたって
- [19:06] 高額の売上を記録してますが、特定の月に
- [19:08] 集中してる傾向がありますといった情報も
- [19:10] あります。例えばこれをですね、自社の
- [19:12] 売上ランキングを元にですね、Aさんは
- [19:14] なんでこんなに売上が多いのかみたいな
- [19:16] 深掘りをしたりだとか、誰が売上のか、
- [19:18] どの商品が売上が上がってるのかっていう
- [19:20] ところもAENTを使って解析することが
- [19:22] できます。まあまあ、もう1個ぐらいし
- [19:24] ましょうか。例えば2024年、2024
- [19:26] 年の売上ランキングを作成して名前順にと
- [19:29] かにしましょうか。ま、適当に指示を入れ
- [19:31] てあとはエージェントに挙動任せましょう
- [19:33] 。表すると出てきましたね。2020の
- [19:36] 売上データを各担当者の売上見画の合計を
- [19:39] 計算し、名前順年でランキングを作成し
- [19:41] ましたと。で、2024年としては山田
- [19:43] さんが1番売上ようだとか、佐藤さんが
- [19:46] 1番売り上げてますようだとか、そういう
- [19:47] のが出てきますね。で、こんな感じで
- [19:48] ランキングもすぐ作ったりすることができ
- [19:50] ます。もう1個ぐらいやってみましょうか
- [19:52] 。例えば山田さん、ま、ちょっと抽象的な
- [19:54] 質問しましょうか。山田さんが売上を上げ
- [19:57] ている商品はみたいな感じでちょっと適当
- [19:59] に売ってみました。そうするとそれも解析
- [20:01] してくるんじゃないかなと思います。出て
- [20:03] きましたね。山田太郎が2020に売上を
- [20:05] 上げている商品を商品ごとの売上金額で
- [20:07] まとめるとA商品、B商品、Cでこんな
- [20:10] 感じで売上げてますよって感じと傾向とし
- [20:12] ては山田太郎は特にC商品で多くの売上い
- [20:15] ますと。こんな感じで分析することができ
- [20:17] ました。こんな感じで親子チャンクを使う
- [20:19] とですね、チャンクの精度が一気に上がる
- [20:21] ので親子チャンク理解してDEFの方で
- [20:23] 活用してみてください。ではエア
- [20:25] エージェントで実際に親子チャンクを利用
- [20:27] してみて親子チャンクの挙動イメージ
- [20:29] ところを理解できたと思うので最後まとめ
- [20:31] 話で終わろうかなと思います。で、今回
- [20:32] ですね、親子チャンクを説明しました。で
- [20:35] 、親子チャンクのない時代の従来の課題と
- [20:37] してはチャンクを細かくしすぎると背景が
- [20:40] 失われてしまうだかと言って大きすぎると
- [20:42] 情報にノイズが混じってしまう。こういっ
- [20:44] た課題がありました。そこをですね、解決
- [20:46] したのが今回の紹介した親子シャンクと
- [20:48] いう仕組みになっております。まずコ
- [20:50] チャンクの方でピンポイントで検索して
- [20:52] 制度を確保しながらその後にですね、親
- [20:54] チャンクで背景とか文脈を補強するので
- [20:57] 自然で豊かな回答をすることができます。
- [20:59] 親子チャンクを使えばですね、検索制度と
- [21:02] 文脈理解の両立を実現することができます
- [21:04] 。で、どんな時に利用できるのかっていう
- [21:06] と、例えばですね、今回紹介したような
- [21:08] 売上情報の分析ツールだとか、あとは
- [21:11] FAQ検索とかカスタマーサポートこう
- [21:14] いったところですね、活用できるんじゃ
- [21:15] ないかなと思います。デファイの活用とし
- [21:17] てですね、この親子チャンク非常に効果は
- [21:19] 高いんですがですね、実際に理解して活用
- [21:22] してる人が非常に少ないのでもったいない
- [21:23] なと思い今回動画を作らせていただきまし
- [21:25] た。以上になります。ありがとうござい
- [21:26] ました。現在弊社ではAI、DX、Web
- [21:30] 、そういった開発の相談を受け入れており
- [21:32] ます。興味ある方は概要欄の方からお
- [21:34] 問い合わせください。現在公式LINE
- [21:36] 登録者にプレゼントを配布しております。
- [21:39] YouTubeで公開したスライド
- [21:40] プレゼント、YouTubeで公開した
- [21:43] DifyのDSLプレゼント
- [21:45] YouTubeで公開したNのJon
- [21:48] プレゼントAI時に取り残されないための
- [21:50] クリティカルシンキング能力の付け方限定
- [21:52] 動画プレゼント生成AI注目サービス紹介
- [21:56] 記事プレゼント現役エンジニアが紹介する
- [21:58] weやAIの勉強会の参加件プレゼント
- [22:01] 公式LINE登録していただくとこのよう
- [22:03] なプレゼントを受け取ることができます。
