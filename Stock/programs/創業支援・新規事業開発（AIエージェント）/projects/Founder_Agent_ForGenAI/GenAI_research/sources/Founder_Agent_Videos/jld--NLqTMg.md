---
title: "はい、どうもこんにちは。ひろです。本日 はリファイトザピアMCPを連携させた 自動メール送信のAIエージェントの作り 方についてご紹介しようかなと思っており ます。今まで人間が手作業で行っていた"
video_id: "jld--NLqTMg"
video_url: "https://www.youtube.com/watch?v=jld--NLqTMg"
speaker: "Unknown"
channel: "Unknown"
date: ""
duration: ""
tags:
  - "AI"
  - "LLM"
topics:
  - "LLM Development"
  - "Tool Integration"
summary: |
  
key_points:
  - "See transcript for details"
category: "AI & Technology"
confidence_level: "high"
---

# Transcript: jld--NLqTMg

- URL: https://www.youtube.com/watch?v=jld--NLqTMg
- Retrieved at: 2025-12-30T16:00:05+09:00

## Text

- [00:00] はい、どうもこんにちは。ひろです。本日
- [00:02] はリファイトザピアMCPを連携させた
- [00:05] 自動メール送信のAIエージェントの作り
- [00:08] 方についてご紹介しようかなと思っており
- [00:10] ます。今まで人間が手作業で行っていた
- [00:13] 面倒なメール作業をAIエージェントに
- [00:16] 任せる方法です。初心者でも分かりやすく
- [00:19] ステップバイステップで今回も肝ゾ式でご
- [00:21] 紹介していこうかなと思います。はい。で
- [00:23] はですね、一旦デモを見てもらった方が
- [00:25] イメージがつきやすいと思うのでデモを
- [00:27] ちょっとしてみようかなと思います。で、
- [00:29] このメールの送り主にメールの送りたい人
- [00:32] の名前を入れます。例えば何でもいいん
- [00:34] ですが前だと入れます。で、これで
- [00:37] スタートチャットをします。そしてメール
- [00:39] を作ってもらいたいのでメールを作って
- [00:41] もらいましょうか。例えば井上さんに今日
- [00:44] の会議の予定を送って会議内容は適当に
- [00:46] 考えてっていう風に入れました。そうする
- [00:48] とですね、AIが自動で会議の内容を考え
- [00:51] てくれました。井上さんのメールアドレス
- [00:53] ですね。で、以下の内容でメールを作成し
- [00:55] ましたということで、ま、手先だとか本文
- [00:57] ですね。本文を考えてくれました。内容を
- [01:00] 変えたい場合は午後2時ではなく3時です
- [01:04] とか入れるとその内容を踏まえてAがま、
- [01:06] 考え直してくれると思います。ここですね
- [01:08] 。本日は午後3時2時から3時に変えて
- [01:10] くれたりだとかそういった細かい修正も
- [01:12] できます。で、修正した内容でメールを
- [01:14] 送信しても良いですかっていうこと
- [01:15] でオッケーですと入れると自動でですね、
- [01:18] AIがメール送ってくれるような感じに
- [01:20] なると思います。はい。こんな感じですね
- [01:22] 。メールを送信しました。井さんね、会議
- [01:24] の予定が届いていますってなってますので
- [01:27] 、実際に届いてるか確認しますとこんな
- [01:29] 感じですね。こんな感じでメールが届い
- [01:31] てるというような感じになります。この
- [01:33] ような挙動のAIエージェントを今から
- [01:35] 作っていこうかなと思います。で、この
- [01:36] 記事で学べることと言いますと、まず1つ
- [01:38] 目がDEFとの連携方法ですね。DIFが
- [01:42] サービスを操作できる仕組みについてご
- [01:44] 紹介しようかなと思います。で、その操作
- [01:46] の方法がMCPを通して行うので、その
- [01:49] MCPの操作方法ですね、defiザピア
- [01:51] の連携をMCPを使ってどうやって操作
- [01:54] するのかっていうところを紹介します。で
- [01:56] 、最終的にハズゾンですね、今回も
- [01:58] ハンズオンでメールの自動送信システムの
- [02:01] 作り方を教えていこうかなと思います。で
- [02:03] 、1番最初にですね、そもそもMCPとは
- [02:06] 何だっていう方も多いと思うので、MCP
- [02:07] の説明をしようかなと思います。MCPの
- [02:10] 仕組みを使うとAIエージェントですね。
- [02:12] このAIのマークがついてるのがAI
- [02:13] エージェントなんですが、AI
- [02:14] エージェントがMCPサーバーを通知て
- [02:17] 外部の様々なサービスやデータに自動で
- [02:19] アクセスして情報を取得したり変更を加え
- [02:22] たりすることが可能になります。で、今
- [02:24] までAIエージェントMCPがない時は
- [02:26] この状態だったんですが、各サービスに
- [02:28] アクセスする必要があったんですが、
- [02:30] MCPを通してアクセスすることによって
- [02:32] 各サービスを一元管理できるような
- [02:33] メリットがあります。このMCPについて
- [02:36] もっと詳しく知りたい方はMCPについて
- [02:38] ご紹介した動画がありますので概要欄の方
- [02:40] 載せておきますので興味ある方はまず
- [02:42] そちらを見てみてください。で、今回利用
- [02:44] するZAPIAですね、ZAPIAの説明
- [02:45] もしようかなと思っています。ZAPAと
- [02:48] は様々なWebのアプリケーションも自動
- [02:50] で連携させることができるサービスになっ
- [02:52] ております。またZAPIAでは8000
- [02:54] 以上のアプリケーションに対応してますの
- [02:56] で様々なアプリケーションを連携させる
- [02:58] ことができます。多種多様なワークフを
- [03:00] 組んで業務の自動化できるっていうのが
- [03:01] ザピアになります。プログラムの知識は
- [03:03] なくてもクリック操作だけで例えば何々を
- [03:05] したら何々を自動で実行してといった業務
- [03:08] のオートメーションを実現することが
- [03:09] できるのがこのザピアになります。で、
- [03:11] オートメーションってどんなことができる
- [03:13] のかて言いますと例えば業務効率系ですね
- [03:15] 。定型業務の自動化だとかメールの通知系
- [03:18] だとかマーケティングの対応だとかECだ
- [03:21] とか売上管理系また開発者AIをザピアを
- [03:25] すれば自動化することができます。
- [03:27] ちょっとこれだけだとよくわかんないと
- [03:28] 思うので具体例をちょっと上げてみようか
- [03:29] なと思っています。例えば業務効率系です
- [03:32] ね。も効率系でやりたいこととして、
- [03:34] 例えばホーム回答をまとめたいっていう
- [03:35] ニーズがあった時に自動化内容として
- [03:38] Googleフォに回答があったら
- [03:39] Googleスプレッドシートに自動で
- [03:41] 追求することを実現させたりだとか、毎日
- [03:43] レポートを確認したいということであれば
- [03:45] 毎朝決まった時間に売上レポートを
- [03:47] スラックに送信するようなことをしたりだ
- [03:49] とか、会議の予定を管理したい場合は
- [03:51] カレンダーに新しい予定が入ったら脳に
- [03:53] タスクとして通過する。このような業務
- [03:56] 効率系をザピアであればすることができ
- [03:58] ます。他にはメール通知系であればメール
- [04:01] の対応を早くしたいよってことであれば
- [04:02] Gmailで問い合わせという件命の
- [04:04] メールを受信したらスラックで通知する
- [04:06] 仕組みを作ったりだとか顧客対応を
- [04:08] スムーズにしたいということであれば
- [04:09] Googleフォムでアンケートに回答が
- [04:11] あったら自動でお礼メールを送信すると
- [04:13] いったことも自動化することができます。
- [04:16] で、そのZAPIAなんですが今回が
- [04:18] MCPサーバーとして提供を開始しました
- [04:21] 。このMCPとはこれを使えばですね、A
- [04:24] エージェントがZAPを通じて様々な
- [04:26] サービスを操作できるようになります。で
- [04:28] 、ちょっと今までのザピアとの比較が
- [04:30] 分からないと思うので、これも比較を作っ
- [04:31] てみました。今までのザピアですね、従来
- [04:34] のザピアの鳥ガー、ま、きっかけですね。
- [04:36] 処理のきっかけは人間だとか定義済みの
- [04:39] トガーがきっかけだったんですが、ザピア
- [04:41] のMCPはAIがですね、命令文を判断し
- [04:43] て同的にザップ、ザッププップっていうの
- [04:45] は1つの処理ですね、実行するというよう
- [04:47] な形になっています。また対応力で言うと
- [04:50] ザピアはパターン固定ですね。簡単固定
- [04:52] しかなかったんですが、ザピアのMCPを
- [04:54] 通せば自然分、複雑な状況だとか複雑な
- [04:57] アクションに対して自動で対応してくれる
- [04:59] ようになりました。また指導権は人間が
- [05:02] ザップを組むのが従来のザピアだったん
- [05:04] ですが、AIがですね、手指導でザップを
- [05:05] 呼び出し業務を実行してくれるような特徴
- [05:07] があります。複雑な処理だとか複数の
- [05:09] アクションにザピアMCPを使えば対応
- [05:11] 可能になったというようながMCPになり
- [05:14] ます。で、今回はですね、DEFからこの
- [05:15] ZapiaMCPを使っていこうかなと
- [05:17] 思っています。で、実際にですね、今回
- [05:19] 作るアプリケーションの概要図を見ていき
- [05:21] ましょうか。で、全体的な外図はこのよう
- [05:22] な形で作っていこうかなと思っています。
- [05:24] はい。ではまずユーザーがですね、
- [05:26] デファイに処理の入力をします。例えばな
- [05:29] んですが、田中さんに今日の会議
- [05:32] キャンセルになったっていう胸のメールを
- [05:33] 伝えてっていう風にリファyの方に指示の
- [05:35] プロンプトを送ります。そうするとですね
- [05:37] 、まずラグの方にその田中さんの情報を
- [05:40] 取得しに行きます。このラグの方にですね
- [05:42] 、顧客情報が載っているので、そこに名前
- [05:45] 、メールアドレス、武将というメール、
- [05:47] 顧客情報が載っているので、そちらから
- [05:49] 田中さんの情報を取得します。そしてです
- [05:51] ね、その情報をDIFのMCPサーバーの
- [05:53] 方に飛ばしてDEFのMCPサーバー
- [05:56] のザピアが連携しているGmailの
- [05:58] アクションを呼び出します。この
- [06:00] アクションの中にGmailを送る処理が
- [06:02] あるので、それをもにですね、田中さんに
- [06:04] 今日の会議キャンセルになりましたよって
- [06:06] いうようなメールを送信を送るといった
- [06:07] 流れでアプリケーションを動かしていこう
- [06:09] かなと思っています。ちょっとですね、話
- [06:11] だけだと難しそうだと思うので、これも
- [06:13] ですね、皆さん0から1から作っていこう
- [06:14] と思いますので、まず簡単にですね、この
- [06:16] アプリケーションの概要図を頭に入れて
- [06:18] から作ると非常に理解で理解でが深まるん
- [06:20] じゃないかなと思っております。で、今回
- [06:22] 難しいところで言うとこのDEFとIAを
- [06:24] 連携させるところで、先ほど紹介した
- [06:27] ZAPIAのMCPサーバーを設定しない
- [06:29] といけないので、そちらですね、そちらが
- [06:31] 結構難しいんですが、今回はそこをMCP
- [06:33] SSEプラグインというのがあるので、
- [06:35] こちらを使っていこうかなと思っており
- [06:36] ます。MCPプラグインというのはこちら
- [06:39] ですね。このギitハubに上げてらあげ
- [06:41] られてるようなプラグインなんですが、
- [06:43] 詳細な情報はこちらの情報を見れば分かる
- [06:46] かなと思っております。このですね、
- [06:47] リンクは概要欄の方に載せておきます。で
- [06:50] 、このプラグインしてるかと言いますと、
- [06:51] このHTTPとSSEという仕組みを使っ
- [06:54] てAIエージェントが複数のMCP
- [06:56] サーバーと常につがるやるために情報を
- [06:59] 受け取りながら今どんな外部ツールが
- [07:01] 使えるか自動でチェックしてくれるような
- [07:02] プラグになっております。ま、少しこの
- [07:04] 説明が難しいんですけど、超簡単に言うと
- [07:07] リファですね、どんなMCPサーバーと
- [07:09] 繋がってるのかってのを自動で検知して
- [07:11] くれて、使えるMCPですね、それを勝手
- [07:13] に使えるように連携してくれるような
- [07:15] プラグインになっております。ま、これを
- [07:16] することによってですね、必要になった時
- [07:18] にAIがすぐにそのツールを生み出して
- [07:20] 利用できるようにすることが可能になり
- [07:21] ます。で、ここまでてですね、大体大枠
- [07:25] 前提の話をしたので実際にですね、作って
- [07:28] いくんですが、その前に色々と事前準備が
- [07:30] 必要になります。それをまずしていこうか
- [07:32] なと思っています。まずはZAIAの
- [07:34] MCPエンドポイントの取得ですね。え、
- [07:36] これは何かと言いますと、このDEFI
- [07:38] からZAPIAの方に連携させる時にどこ
- [07:40] の向き先かっていうような送り先が必要な
- [07:43] んですが、それのエンドポイントを取得
- [07:45] する必要があるので、それをまず取得し
- [07:47] ます。で、次にAIに許可するアクション
- [07:49] ですね。先ほどピアって8000ほどの
- [07:51] アプリケーションに連携してるとか、
- [07:53] いろんな多数のアクションにせ連携して
- [07:55] いるみたいな話をしたと思うんですけど、
- [07:57] どのアクションを許可するのかっていうの
- [07:58] を事前に設定しないといけないんですね。
- [08:00] で、今回で言うとここのアクションが
- [08:02] メールを送信ですね。なのでGmailの
- [08:04] 送信を出せるようなアクションの設定を
- [08:06] 事前にしないといけないので、その設定を
- [08:08] しようかなと思っています。で、MCP
- [08:10] SSEのプラグインのインストールですね
- [08:12] 。こちらですね。ここに書いているこの
- [08:14] プラグインですね。このプラグインを
- [08:15] DEFの方にインストールしないといけ
- [08:17] ないので、そのインストールの方法をご
- [08:18] 紹介します。インストールした後にですね
- [08:20] 、MCFPプラグインの認証っていうのが
- [08:22] 必要なんですね。それをして、え、最後
- [08:24] 顧客情報の作成のところですね、顧客情報
- [08:26] の作成をですね、1から作っていこうかな
- [08:28] と思っています。これは今回Exelで
- [08:30] 作っていこうかなと思っています。事前
- [08:32] 準備ができたら実際に開発が映れるので
- [08:34] 開発をしていこうかなと思います。で、
- [08:36] その開発手順ですね。開発手順としては
- [08:39] まず顧客情報をラグとして登録しようかな
- [08:41] と思います。で、ラグって何だよっていう
- [08:43] 方は以前ラグについて説明した動画もあり
- [08:45] ますので、そちらの動画を概要欄の載せて
- [08:47] おきますので、そちらをまず見てみて
- [08:48] ください。ラグとして登録した後は
- [08:50] Gmail送信AIエージェントの開発
- [08:52] ですね。DEFの方でAIエージェントを
- [08:54] 開発していこうかなと思います。で、最終
- [08:56] 的にですね、挙動確認。実際にメールが
- [08:58] 送られるのかっていうところまで確認して
- [08:59] 終わりにしようかなと思っております。で
- [09:01] は1番最初ですね、ZAPIAのMCP
- [09:04] エンドポイントの取得から映っていこうか
- [09:05] なと思います。で、ZAPIAのMCP
- [09:07] エンドポイントの取得方法としてはですね
- [09:10] 、ZAPIAがMCPのサイトを公開して
- [09:13] おります。これですね、AIアクションっ
- [09:14] ていうところですね。まだβタ版なんです
- [09:16] が、こちらのサイトをまず開きます。で、
- [09:18] ここですね、左側のこのメニュー表って
- [09:21] いうんですかね、ここを見てみると
- [09:23] セッティングの下にMCPとのがあるんで
- [09:24] 、これを選択します。で、そうするとです
- [09:26] ね、ここにUアユニークMCPサーバー
- [09:28] エンドポイントっていうのが出てくると
- [09:30] 思います。自分の場合はですね、もう
- [09:31] すでに発行したことがあるので、このよう
- [09:33] にザピアのMCPのエンドポイントが出
- [09:35] てるんですが、初めての方はですね、多分
- [09:38] このような画面が出てるかなと思っており
- [09:40] ます。ここですね、UIMCPサーバー
- [09:43] エンドポイントの右にジェネレーURL
- [09:45] っていうボタンがあると思います。こちら
- [09:47] をクリックします。そうするとですね、
- [09:49] こんな感じでペッユニークのサーバーの
- [09:52] エンドポイント発行されると思いますので
- [09:54] 、こちらですね、後で使いますので、この
- [09:56] コピーURLってボタンを押して自分の
- [09:58] メモ帳などに貼り付けておいてください。
- [10:00] まずこれができれば1番最初のザピア
- [10:03] MCPエンドポイントの取得が完成になり
- [10:05] ます。で、次にですね、AIにアクション
- [10:07] 許可するアクションの設定ですね、こちら
- [10:09] していこうかなと思います。で、今回は
- [10:11] ですね、どのアクションを設定するの
- [10:12] かっていうところで言います。メールの
- [10:14] 送信ですね、ZAPIAからGmailを
- [10:15] 自由に送れるようなメールの送信とあとは
- [10:18] リプライですね。メールが来た後に返信
- [10:20] できるようにメールの返信、この2つの
- [10:22] アクションを追加していこうかなと思って
- [10:24] おります。これはどうするかと言いますと
- [10:26] ですね、先ほどと同じページですね、この
- [10:28] 下の方に行きますと、クイックスタートの
- [10:30] 下にコンギュアズっていうボタンがリンク
- [10:33] があると思います。これをクリックします
- [10:34] 。そうするとですね、このMCPの中に
- [10:37] どのアクションを追加しますかみたいな
- [10:38] 検索ボックスが出ると思うんですね。そこ
- [10:41] にGmailなどと打っていただくと
- [10:43] こんな感じで色々と出てくると思います。
- [10:45] この中に1番上に鮮度Eメールっていうの
- [10:47] があると思うので、これを選択します。
- [10:49] このセンドEmailはメールを送信する
- [10:51] というアクションですね。で、これを選択
- [10:53] するとですね、こんな感じの画面が出て
- [10:55] くると思います。で、ここにですね、まず
- [10:57] Gmailアカウントにですね、どの
- [10:58] Gmailと連携させたいのですか?
- [11:00] みたいな自分のGmailの連携先は出て
- [11:02] くると思うので、自分のGmailを選択
- [11:04] します。で、次にtoとブジェクトと
- [11:07] Bodyィですね。が送り先ですね。で、
- [11:09] サブジェクトがタイトルで、ボディが
- [11:11] メールの本文ですね。で、これをどういう
- [11:13] 感じで送りますかっていう選択が出てくる
- [11:15] と思うんですが、haveAIgetsア
- [11:18] forthisfieldっていう選択
- [11:19] でオッケーです。これどういう意味かと
- [11:21] 言いますと、Aがですね、吉に作って
- [11:23] くださいていうような意味ですね。で、
- [11:24] toもサブジェクトもボディもAIが吉に
- [11:27] 作って欲しいので、これを選択しておいて
- [11:28] ください。それができればですね、この下
- [11:31] にあるアクションズを選択します。これで
- [11:33] youaresaveMCPアクションの
- [11:35] 中にこんな感じでGmail、Eメっての
- [11:37] が新しく追加されていればオッケーです。
- [11:39] ちなみにここの右の緑のマークですね。
- [11:41] これをオフにしたい場合はこれをクリック
- [11:43] するとオフにすることができるんですが、
- [11:45] 今回使うのでオンにしといてください。で
- [11:47] 、次にですね、センドEmailが追加さ
- [11:49] れていれば今度はリプライのEmailの
- [11:51] アクションの追加もしたいので、同じよう
- [11:52] にですね、アクションズの中にGmail
- [11:55] と入れるとセンドEmailの下にto
- [11:57] Emailっていうのが出てくると思い
- [11:58] ます。で、これを選択します。そして同じ
- [12:00] ような画面が出てくると思うので、同じ
- [12:02] ようにGmailですね、連携させたい
- [12:04] Gmailのところを自分のGmailを
- [12:06] 選択します。で、他のところは先ほど説明
- [12:09] した通り全部AIに予測して欲しいので、
- [12:12] このhaveAIguessaValue
- [12:13] forthisfieldを選択しといて
- [12:15] ください。で、これを置ければEN
- [12:16] アクションズを選択します。そうすると
- [12:18] ですね、同じようにreplyイto
- [12:19] Emailも表示されると思うので、
- [12:21] replyイtoEmailとEmail
- [12:23] 、この2つがですね、アクションとして
- [12:24] 許可される設定になっていればオッケー
- [12:26] です。はい。で、ここまでできればですね
- [12:28] 、PやMCPエンドポイントを取得とAI
- [12:31] に許可するアクションの設定ができたので
- [12:33] 、次MCPSSEのプラグへのインストル
- [12:35] ですね、こちらをしていこうかなと思い
- [12:37] ます。で、その方法は非常に簡単ですね。
- [12:40] で、まずDEFINEのトップページを
- [12:41] 開きましょうか。はい。で、まず
- [12:43] プラディファイのトップページです。
- [12:44] こんなページが見えると思うので、この右
- [12:46] にプラグインンっていうのがあるんですね
- [12:47] 。ちょっとちっちゃくて申し訳ないんです
- [12:49] が、これを選択します。そうするとですね
- [12:51] 、こんな画面が出てくると思いますので、
- [12:54] プラグインを選択したらマーケットプレス
- [12:55] を探索するというボタンを選択します。で
- [12:58] 、この検索ボックスの中ね、MCPSSE
- [13:01] って入れるとですね、下の方に検索結果
- [13:03] 出るんですが、その中にこのボタンですね
- [13:05] 、MCPSSEっていうのが出てくれ
- [13:07] ばオッケーなので、これを選択します。
- [13:09] そうするとですね、インストールしますか
- [13:11] みたいな画面が出てくると思いますので、
- [13:13] インストールするっていうボタンを押し
- [13:15] ます。インストールの完了になります。で
- [13:17] 、インストール完了したらですね、次
- [13:18] MCPプラグの認証をする必要があります
- [13:21] 。で、これどういう意味かって言いますと
- [13:22] 、このDEFからに連携する時にですね、
- [13:25] このZAPIAが認証されている自分の
- [13:27] サーバーですよっていうのを認証する必要
- [13:29] があるので、その設定をしていこうかなと
- [13:30] 思います。で、その認証方法はと言います
- [13:32] と、MCPプラグインのインストールが
- [13:34] できればですね、このプラグインですね、
- [13:36] マーケットプレスの左にあるプラグインを
- [13:38] 押してあげると、今までインストールした
- [13:40] プラグインの一覧が出てくると思います。
- [13:42] で、この中に先ほどインストールしたMC
- [13:44] SECEがあるので、これを選択します。
- [13:46] そうするとですね、こんな画面で認証
- [13:48] するっていうボタンが出てくると思うので
- [13:50] 、この認証するのボタンを押します。そこ
- [13:52] でですね、認証設定のJonソンを設定
- [13:54] する必要があるので、その設定をします。
- [13:56] で、その設定方法がこれですね。サーバー
- [13:59] ネーム、URL、ヘッター、タイムアウト
- [14:00] 、SSリード、タイムアウトっていうのを
- [14:02] 設定しないといけないので、それを1つ
- [14:03] ずつ設定していこうかなと思います。この
- [14:05] URLが先ほどMCPのところで取得した
- [14:09] エンドポイントですね。MCPエンド
- [14:11] ポイントの取得した値を入れます。で、
- [14:13] どれかと言うとこれですね。ネクMCP
- [14:15] サーバーエンドポイントって書いてると
- [14:17] 思うんですけど、これをですね、取ってき
- [14:18] てあげて、ここの中に貼り付けます。で、
- [14:21] 次にヘッターとタイムアウトとSSE
- [14:23] タイムアウトの設定をします。で、これ
- [14:25] ちょっとですね、どういう意味かっていう
- [14:26] ところを簡単にまとめました。まずURL
- [14:29] が先ほど説明した、説明した通りですね、
- [14:31] 接続先のMCPサーバーのURLですね。
- [14:34] ここにAIが命令を飛ばすような形になり
- [14:36] ます。で、ヘッタの中にはリクエスト
- [14:38] ヘッターというのを設定する必要があるん
- [14:39] ですが、今回は特にですね、ヘッダーの設
- [14:41] 必要なので、体で問題ありません。で、
- [14:43] タイムアウトですね。HPリクエストの
- [14:45] タイムアウトの時間をここで設定します。
- [14:47] ここでは5秒以内に返事がなかったら失敗
- [14:50] 扱いしようかなと思っています。ま、基本
- [14:52] 的に5秒以上かかることはないと思うので
- [14:54] 5秒で大丈夫だと思います。で、SSE
- [14:56] リードタイムアウトですね。SSE接続の
- [14:58] 読み取りのタイムアウトの時間になります
- [15:00] 。300秒接続を維持してリアルタイムの
- [15:02] 応答を待つような設定にしておきました。
- [15:05] ま、でも基本的にはこの設定大丈夫と思う
- [15:07] ので、ここのURLのところだけ
- [15:09] 書き換えるような形で大丈夫だと思います
- [15:10] 。で、この情報をですね、保存しますと
- [15:13] ですね、認証済みというボタンが出ると
- [15:15] 思うので、認証の成功になります。で、
- [15:17] これができたらですね、MCPプラグの
- [15:19] 認証は完了になります。で、次にですね、
- [15:22] 顧客情報の作成をしようかなと思います。
- [15:24] で、この入力受けたまずDFIはですね、
- [15:27] 内部の情報データベースの方にアクセスし
- [15:30] て顧客情報ですね、名前、メールアドレス
- [15:32] 、部署というものを取得します。今回は
- [15:34] Excel形式で作成しようかなと思い
- [15:35] ます。こんな感じですね。名前とメール
- [15:38] あると部署ですね。これをまとめた
- [15:39] Exelの方を自分で新規で作成しておき
- [15:42] ました。これExcel自分で作っても
- [15:43] いいんですけど、めどくさいよという方は
- [15:45] ですね、この格情報サンプルのExcel
- [15:47] を用意したので、このダウンロードって
- [15:48] ボタンを押していただくとこの用意した
- [15:50] Exelはダウンロードすることができ
- [15:52] ます。この記事のノートはですね、概要欄
- [15:54] の方に載せておきます。で、ここまで
- [15:56] できればですね、逆情報の作成のところ
- [15:58] までできたので、事前準備は全部完了に
- [16:00] なります。ちょっとですね、長かったん
- [16:02] ですが、ここからやっと実装に映れるかな
- [16:04] と思っています。で、まず1番最初ですね
- [16:06] 、顧客情報を作ったものをラグとして登録
- [16:08] する必要がありますので、そちらを登録し
- [16:10] ていこうかなと思います。で、登録する
- [16:13] 方法はですね、まず1番最初DEFの
- [16:15] トップページに行ってあげてですね、この
- [16:17] ナレージっていうボタンを押します。で、
- [16:19] 次にですね、この左側にナリッジベースを
- [16:22] 作成っていうのがあるんで、これを選択し
- [16:24] ます。そうするとですね、このナレーチ
- [16:26] ラグですね、ラグを登録する画面が出てき
- [16:28] て、今回はexelテキストファイルです
- [16:30] ね。テキストファイルからも選択します。
- [16:33] で、その方法は簡単で、この下にあるです
- [16:35] ね、テクストファイルアップロード、
- [16:37] ファイルまたはフォルダーをドラッグア
- [16:39] ドロップする、もしくは3ってあるので、
- [16:40] この3章を選択します。はい。そうすると
- [16:43] ですね、色々と自分のパソコンにアクセス
- [16:46] できるんですが、この顧客情報exelっ
- [16:48] ていうのが作ったものなんで、これを選択
- [16:50] します。これを開くを押しますと、こんな
- [16:53] 感じでテキストファイルアップロードの中
- [16:54] にアップロードした顧客情報のサンプルが
- [16:57] ポコって出てくると思います。これで次A
- [16:59] を選択します。そうするとですね、これが
- [17:02] ラグの設定のページに移りまして、ま、
- [17:05] 色々とラグをですね、詳細の設定はできる
- [17:08] んですが、今回この説明すると
- [17:10] めちゃくちゃ長くなるんで、これも割愛し
- [17:11] ます。ちなみにこのラグの詳細の設定方法
- [17:14] とかも以前動画で説明したことがあるので
- [17:16] 、ラグを綺麗に分割したいとか、チャンク
- [17:19] 設定をうまく設定したい場合はそちらの
- [17:22] 動画見て見ていただくと非常に参考になる
- [17:24] んじゃないかなと思います。で、え、色々
- [17:26] ま、あるんですが、これは一旦オッケーで
- [17:29] デフォルトまで保存して処理のオッケーな
- [17:31] ので、これを選択します。そうするとです
- [17:33] ね、ナレッチベースが作成されましたて
- [17:35] いうことで、表示が出てくればオッケー
- [17:37] です。で、これができればナレッチベース
- [17:40] が作成されたので、まず1番最初のこれ
- [17:43] ですね、コ服情報をラグとして登録は完了
- [17:45] しました。で、次にですね、Gmail
- [17:47] 送信のARエージェントの開発。ここが
- [17:49] メインのところですね。これで映って
- [17:50] いこうかなと思います。で、それをどう
- [17:53] するかと言いますと、これも1から自分が
- [17:56] 作りますので、それを見ながら参考にして
- [17:58] いただければなと思います。まずアプリを
- [18:01] 作成ですね。こっから作、最初から作成を
- [18:03] 選択します。そしてアプリの種類は今回は
- [18:07] AIエージェントを作りたいので、この
- [18:09] エージェントを選択します。で、アイコン
- [18:11] と名前なんですが、今回は特に指定はない
- [18:14] んですが、メール自動送信AI、AI
- [18:17] エージェントにしましょう
- [18:19] かと入れました。で、説明のところも同じ
- [18:22] やつを入れていきましょう。で、これで
- [18:24] 作成するのボタンを押します。そうすると
- [18:26] このような画面が出てくれば大丈夫です。
- [18:29] で、まずですね、今回AIエージェントを
- [18:31] 使うLLMなんですが、GPT3.5
- [18:34] ターボだとちょっと弱いので、もう
- [18:36] ちょっと強めのやつを使おうかなと思い
- [18:39] ます。えっと、何でもいいんですが、
- [18:41] GPT4Oぐらいがいいかなと思うので、
- [18:44] それを選択しましょうか。ありましたね。
- [18:46] これを選択します。で、次にですね、この
- [18:48] ツールですね。何を使うかと言うと事前に
- [18:50] ですね、MCPSSEプラグインを選択し
- [18:53] たのでこれを使いたいと思います。で、
- [18:55] MCPと入れていただくと
- [18:57] 、もしちゃんと先ほどのプラグインの
- [19:00] インストールと認証ができていれば、
- [19:02] MCPプラグの中にFHMCPツールと
- [19:05] コールMCPツールってのが出るので、2
- [19:07] つとも選択します。ちなみにフェッチは
- [19:10] 何かと言うと、使えるMCPを取得する、
- [19:13] どんなツールがあるかっていうのを取得で
- [19:14] するのと、え、コールの方がですね、その
- [19:16] MCPのアクションを実際に使うっていう
- [19:18] 使い分けになっております。で、次にです
- [19:20] ね、こラグ事前に登録したので、この
- [19:22] コンテキストから追加しようかなと思い
- [19:24] ます。で、先ほどですね、登録していた
- [19:27] 顧客情報exelですね。これ自分の場合
- [19:29] 2つ、あの、事前に作っちゃってるので2
- [19:32] 個出てるんですが、2つ、1つだけだと
- [19:33] 思います。なので、この情報サンプルの
- [19:35] EXELを選択してあげて追加を選択し
- [19:37] ます。そしてですね、このステーション書
- [19:40] の中にプロンプトですね、指示プロンプト
- [19:42] を入れていこうかなと思います。で、指示
- [19:44] プロンプトは結構長いんですが事前に作っ
- [19:47] ておきました。これですね。これをコピー
- [19:50] してあげてオーケストルの後の中に
- [19:53] コピーペします。で、ここですね、実際に
- [19:55] AIエージェントの指示の内容を入れて
- [19:56] おります。まず役割としてあなたはメール
- [19:59] 送信アシスタントですと入れました。で、
- [20:02] できることとしてはGmailセド、
- [20:04] Emailという名前のツールを使って
- [20:06] メールを送信することができますという
- [20:08] ところと知識ベースを使って連絡先の
- [20:10] メールアドレスを自動的に検索してきます
- [20:12] ていうこの2つをできることに入れまして
- [20:15] 、で、具体的な作業手順ですね。で、作業
- [20:17] 手順としてはユーザーですね。ユーザーが
- [20:20] メールの送信者となります。ま、例えば
- [20:22] 前田さんから送りたい場合は前田さん
- [20:24] みたいなユーザーネームを入れるって感じ
- [20:25] ですね。で、このユーザーリクエストに
- [20:27] 応じてメールの宛先見明本文を決定して
- [20:30] くださいと。必要に応じて知識ベースから
- [20:33] 当て先のメールアドレスを検索しますと。
- [20:34] で、誰々さんに送りたいっていう場合は
- [20:36] ですね、その誰々さんはどういう情報を
- [20:38] 持ってるのかっていうのをラグの方から
- [20:39] ですね、こんなラグの方から取得してその
- [20:42] 顧客情報を元に使ってくださいって意味
- [20:45] ですね。で、ツールを使ってメールを送信
- [20:47] する前に必ずユーザーに対してメールの
- [20:49] 内容を表示し確認を取ってくださいと。
- [20:52] これ結構大事かなと思ってるんですけど、
- [20:54] これ確認取らずにメール送っちゃうとなん
- [20:55] か変なメールとか送っちゃうことになるの
- [20:57] で、メール送る前に1回送り先の自分に
- [21:00] 必ずメールの内容を表示してオッケーで
- [21:02] あればメールを送信してくださいっていう
- [21:04] 手順を入れておきました。で、ユーザーの
- [21:06] 確認ですね。ユーザーの確認でメール送っ
- [21:07] てオッケーだよってなればメールの送信
- [21:09] ツールの呼び出しを準備をしてくださいと
- [21:11] いう風にしました。で、ツールの呼び出し
- [21:13] 要件としてはメールの送信者の送信のため
- [21:15] に呼び出すツールは必ずメGmailセド
- [21:18] Emailという名前のツールのみとし
- [21:19] ますと。で、Gmail、ILツールを
- [21:21] 呼び出す際には3つのキーワードですね、
- [21:23] to送り先とサブジェクト、件命、ボディ
- [21:26] 、この3つを必ず作成してくださいという
- [21:28] ことでツールの呼び出し要件を入れました
- [21:30] 。で、ツールと呼び出しの例として
- [21:31] Gmail、Eメ時はこういった
- [21:33] Jonソンで使ってくださいっていうの例
- [21:35] を入れてあげると分かりやすいので、これ
- [21:37] も入れておきました。で、ここができたら
- [21:40] ですね、指示プロンプとかできまして、
- [21:42] この変数の中に変数の設定をしないといけ
- [21:44] ないので、この変数の設定をしましょうか
- [21:45] 。で、変数の設定はここの部分にありまし
- [21:48] て、このユーザーネイムっていうところを
- [21:49] 編集しましょうか。このままでもいいっ
- [21:51] ちゃいいんですが、このラベル名が英語に
- [21:53] なってるので、ここだけちょっと日本語に
- [21:54] しようかなと思います。メールの送り主と
- [21:57] しましょうか。これでオッケーです。そう
- [22:00] するとですね、このラベルがメール送る主
- [22:02] という風に変わるので分かりやすいかなと
- [22:04] 思います。はい。ここまでできればですね
- [22:06] 、Gmail送信AIエージの開発が一旦
- [22:08] 終わったので、実際に挙動確認してみよう
- [22:10] かなと思います。で、実際に挙動確認する
- [22:12] 前に作ったものを保存したいので公開する
- [22:15] の更新を公開にします。そしてアプリを
- [22:18] 実行を選択します。そうするとですね、
- [22:21] こんな感じで画面が出てくるので、ここで
- [22:23] 実際に挙動確認してみようかなと思います
- [22:25] 。で、もメールの送り主は前田とし
- [22:28] ましょうか。ま、誰でもいいんですか?
- [22:30] 名前は。で、前田にしてスタートチャット
- [22:32] をします。で、ここに実際にね、送りたい
- [22:34] 内容ですね。井上さんに本日の会議
- [22:37] キャンセルになった件をメールで送ってと
- [22:39] 入れました。これをまずクリックして送っ
- [22:41] てみます。そうするとね、ナレッジって
- [22:43] 出ると思うんですが、ここですね、1回
- [22:44] 自分の井上さんの情報をですね、ラグの方
- [22:46] に撮ってる感じですね。で、取り終えたら
- [22:48] こんな感じでメールの下書きを作ってくれ
- [22:50] ます。井上さんのメールアドレスは井上
- [22:53] 12y@gmail.comcomですと
- [22:54] 。で、以下の内容でメールを作成します。
- [22:56] ということで、当て先が自分ですね。自分
- [22:58] のメールアドレスと件命本日の会議
- [23:00] キャンセルについてで、本文がこんな感じ
- [23:02] でいいですか?みたいな、ま、下書きを
- [23:04] 書いてくれました。で、この内容で送信し
- [23:06] ても良いですかと出るので、このまま送っ
- [23:09] てもいいんですが、ちょっとた色々試して
- [23:11] みたいと思うので、本文をもう少し
- [23:13] カジュアルにとか入れてみましょうか。
- [23:16] 本文をもう少しカジュアルに変更してと
- [23:18] 入れました。これでもう1回送ってみ
- [23:19] ましょう。で、分かりました。本文を
- [23:22] カジュアルにしましたっていうことで、
- [23:23] また違う形の本文が出てくるかなと思い
- [23:26] ます。出てきましたね。こんにちは、前田
- [23:27] です。急なお知らせですが、今日の会議は
- [23:29] キャンセルになりました。また日程を調整
- [23:31] しますのでよろしくお願いします。という
- [23:33] ことで、ま、ちょっと硬いのから確かに
- [23:35] ちょっとカジュアルになったんですかね。
- [23:36] カジュアルに本文を変更してくれるみたい
- [23:38] なこともできます。で、まあいいでしょう
- [23:41] 。今回送りたいのでこなで送信しても良い
- [23:43] ですかって言ったらオッケーと言ってみ
- [23:44] ましょうか。それとそうするとですね、
- [23:46] MCPCコールツールっていうMCPのコ
- [23:49] ツールですね。これが今使われていて、
- [23:51] メールが送られてる処理が裏側で走ってる
- [23:53] んじゃないかなと思います。で、出ました
- [23:55] ね。メールを送信しました井上さんに会議
- [23:58] キャンセルについての連絡が完了しました
- [23:59] 。何か他にお手伝いできることがあればお
- [24:02] 知らせくださいと出ましたね。で、
- [24:04] ちょっと一旦自分のGmailを確認して
- [24:06] 実際に送られてるか確認してみようかなと
- [24:08] 思います。はい。メールを確認してみたん
- [24:10] ですが、ちゃんとメール送られて
- [24:12] るっぽいですね。本日の会議キャンセルに
- [24:13] ついてというタイトルでこんな感じの
- [24:15] メールが送られていました。こんにちは、
- [24:17] 前田です。急なお知らせですが、本日の
- [24:19] 予定はキャンセルになりました。
- [24:21] ブラブラブラですね。全く同じ内容の
- [24:23] メールが送られてきてるのでですね、
- [24:25] メールを送ってくれるっていうところまで
- [24:27] 確認することができました。なので最初に
- [24:30] 説明したこのようなアプリケーションの
- [24:31] 概要図をもにですね、この入力された内容
- [24:34] をラグから顧客情報を取ってきて
- [24:36] DEFINEのザピアMCPサーバーを
- [24:37] 通してメールの送信ができてい
- [24:39] るっていうこの情報ですね。この
- [24:40] アプリケーションがうまく動いて
- [24:42] るってことを確認することができたので、
- [24:43] ま、一旦オッケーかなと思います。で、
- [24:45] ここまでできたらですね、挙動確認も
- [24:47] 終わったので一旦オッケーです。で、最後
- [24:49] まとめですね。まとめを話して終わりに
- [24:51] しようかなと思います。で、まず学んだ
- [24:53] ことといえば外部連携ですね。MCPを
- [24:55] 使ってAIが外部ツールと繋が
- [24:57] るってことを確認することができました。
- [24:59] で、今回ですね、あのメール送信っていう
- [25:01] 簡単な操作しかしてなかったんですが、
- [25:03] 本来アって8000以上のアプリを操作
- [25:05] することができるんですね。なので自分で
- [25:07] ですね、こんなワークフローとか自動化し
- [25:09] たいみたいなのがあれば多種多様なアプリ
- [25:11] を自分で作ることができるので、自分でも
- [25:13] ちょっとPのMCPとDFIをんでアプリ
- [25:15] で作ってみるの面白いんじゃないかなと
- [25:16] 思っています。で、業務も自動化ですね。
- [25:19] DIFIの顧客データを使ってメール送信
- [25:21] の自動化をするってところを確認しました
- [25:22] 。以上になります。ありがとうございまし
- [25:24] た。現在LINE登録者限定に無料特典を
- [25:27] 配布しています。YouTubeで利用し
- [25:29] たスライドプレゼント、YouTubeで
- [25:30] 紹介したDEFのDSLプレゼントAI
- [25:33] 時代に必要なクリティカルシンキング能力
- [25:35] の付け方限定動画プレゼント生成AI注目
- [25:39] サービス紹介まとめプレゼント原営
- [25:41] エンジニアが解説する無料のWebやAI
- [25:44] の勉強会の参加件プレゼント森沢さの内容
- [25:47] になっておりますので興味ある方は概要欄
- [25:48] からご登録ください。
- [25:55] ます。
